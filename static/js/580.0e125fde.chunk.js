/*! For license information please see 580.0e125fde.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkzkboogie_client_bench=self.webpackChunkzkboogie_client_bench||[]).push([[580],{373:(t,e,a)=>{a.d(e,{p:()=>d});const o=Symbol("Comlink.proxy"),i=Symbol("Comlink.endpoint"),n=Symbol("Comlink.releaseProxy"),c=Symbol("Comlink.finalizer"),l=Symbol("Comlink.thrown"),r=t=>"object"===typeof t&&null!==t||"function"===typeof t,s=new Map([["proxy",{canHandle:t=>r(t)&&t[o],serialize(t){const{port1:e,port2:a}=new MessageChannel;return d(t,e),[a,[a]]},deserialize(t){return t.start(),p(t,[],e);var e}}],["throw",{canHandle:t=>r(t)&&l in t,serialize(t){let e,{value:a}=t;return e=a instanceof Error?{isError:!0,value:{message:a.message,name:a.name,stack:a.stack}}:{isError:!1,value:a},[e,[]]},deserialize(t){if(t.isError)throw Object.assign(new Error(t.value.message),t.value);throw t.value}}]]);function d(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:globalThis,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["*"];e.addEventListener("message",(function i(n){if(!n||!n.data)return;if(!function(t,e){for(const a of t){if(e===a||"*"===a)return!0;if(a instanceof RegExp&&a.test(e))return!0}return!1}(a,n.origin))return void console.warn("Invalid origin '".concat(n.origin,"' for comlink proxy"));const{id:r,type:s,path:u}=Object.assign({path:[]},n.data),g=(n.data.argumentList||[]).map(I);let f;try{const e=u.slice(0,-1).reduce(((t,e)=>t[e]),t),a=u.reduce(((t,e)=>t[e]),t);switch(s){case"GET":f=a;break;case"SET":e[u.slice(-1)[0]]=I(n.data.value),f=!0;break;case"APPLY":f=a.apply(e,g);break;case"CONSTRUCT":f=function(t){return Object.assign(t,{[o]:!0})}(new a(...g));break;case"ENDPOINT":{const{port1:e,port2:a}=new MessageChannel;d(t,a),f=function(t,e){return m.set(t,e),t}(e,[e])}break;case"RELEASE":f=void 0;break;default:return}}catch(h){f={value:h,[l]:0}}Promise.resolve(f).catch((t=>({value:t,[l]:0}))).then((a=>{const[o,n]=A(a);e.postMessage(Object.assign(Object.assign({},o),{id:r}),n),"RELEASE"===s&&(e.removeEventListener("message",i),_(e),c in t&&"function"===typeof t[c]&&t[c]())})).catch((t=>{const[a,o]=A({value:new TypeError("Unserializable return value"),[l]:0});e.postMessage(Object.assign(Object.assign({},a),{id:r}),o)}))})),e.start&&e.start()}function _(t){(function(t){return"MessagePort"===t.constructor.name})(t)&&t.close()}function u(t){if(t)throw new Error("Proxy has been released and is not useable")}function g(t){return b(t,{type:"RELEASE"}).then((()=>{_(t)}))}const f=new WeakMap,h="FinalizationRegistry"in globalThis&&new FinalizationRegistry((t=>{const e=(f.get(t)||0)-1;f.set(t,e),0===e&&g(t)}));function p(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=!1;const o=new Proxy(arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},{get(i,c){if(u(a),c===n)return()=>{!function(t){h&&h.unregister(t)}(o),g(t),a=!0};if("then"===c){if(0===e.length)return{then:()=>o};const a=b(t,{type:"GET",path:e.map((t=>t.toString()))}).then(I);return a.then.bind(a)}return p(t,[...e,c])},set(o,i,n){u(a);const[c,l]=A(n);return b(t,{type:"SET",path:[...e,i].map((t=>t.toString())),value:c},l).then(I)},apply(o,n,c){u(a);const l=e[e.length-1];if(l===i)return b(t,{type:"ENDPOINT"}).then(I);if("bind"===l)return p(t,e.slice(0,-1));const[r,s]=L(c);return b(t,{type:"APPLY",path:e.map((t=>t.toString())),argumentList:r},s).then(I)},construct(o,i){u(a);const[n,c]=L(i);return b(t,{type:"CONSTRUCT",path:e.map((t=>t.toString())),argumentList:n},c).then(I)}});return function(t,e){const a=(f.get(e)||0)+1;f.set(e,a),h&&h.register(t,e,t)}(o,t),o}function L(t){const e=t.map(A);return[e.map((t=>t[0])),(a=e.map((t=>t[1])),Array.prototype.concat.apply([],a))];var a}const m=new WeakMap;function A(t){for(const[e,a]of s)if(a.canHandle(t)){const[o,i]=a.serialize(t);return[{type:"HANDLER",name:e,value:o},i]}return[{type:"RAW",value:t},m.get(t)||[]]}function I(t){switch(t.type){case"HANDLER":return s.get(t.name).deserialize(t.value);case"RAW":return t.value}}function b(t,e,a){return new Promise((o=>{const i=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");t.addEventListener("message",(function e(a){a.data&&a.data.id&&a.data.id===i&&(t.removeEventListener("message",e),o(a.data))})),t.start&&t.start(),t.postMessage(Object.assign({id:i},e),a)}))}},264:(t,e,a)=>{a.d(e,{_9:()=>ni});const o=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];function i(t,e){return e&&10!=e?16==e?"0x"==t.slice(0,2)?BigInt(t):BigInt("0x"+t):void 0:BigInt(t)}const n=i;function c(t){const e=t.toString(16);return 4*(e.length-1)+o[parseInt(e[0],16)]}function l(t){return BigInt(t)<BigInt(0)}function r(t){return!t}function s(t,e){return BigInt(t)<<BigInt(e)}function d(t,e){return BigInt(t)>>BigInt(e)}const _=s,u=d;function g(t){return(BigInt(t)&BigInt(1))==BigInt(1)}function f(t){let e=BigInt(t);const a=[];for(;e;){if(e&BigInt(1)){const t=2-Number(e%BigInt(4));a.push(t),e-=BigInt(t)}else a.push(0);e>>=BigInt(1)}return a}function h(t){let e=BigInt(t);const a=[];for(;e;)e&BigInt(1)?a.push(1):a.push(0),e>>=BigInt(1);return a}function p(t){if(t>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("Number too big");return Number(t)}function L(t,e){return BigInt(t)+BigInt(e)}function m(t,e){return BigInt(t)-BigInt(e)}function A(t){return-BigInt(t)}function I(t,e){return BigInt(t)*BigInt(e)}function b(t,e){return BigInt(t)**BigInt(e)}function y(t,e){return BigInt(t)/BigInt(e)}function C(t,e){return BigInt(t)%BigInt(e)}function w(t,e){return BigInt(t)==BigInt(e)}function B(t,e){return BigInt(t)>BigInt(e)}function x(t,e){return BigInt(t)>=BigInt(e)}function F(t,e){return BigInt(t)&BigInt(e)}function E(t,e,a,o){const i="0000000"+a.toString(16),n=new Uint32Array(t.buffer,t.byteOffset+e,o/4),c=1+(4*(i.length-7)-1>>5);for(let l=0;l<c;l++)n[l]=parseInt(i.substring(i.length-8*l-8,i.length-8*l),16);for(let l=c;l<n.length;l++)n[l]=0;for(let l=4*n.length;l<o;l++)t[l]=p(F(d(a,8*l),255))}function S(t,e,a,o){const i="0000000"+a.toString(16),n=new DataView(t.buffer,t.byteOffset+e,o),c=1+(4*(i.length-7)-1>>5);for(let l=0;l<c;l++)n.setUint32(o-4*l-4,parseInt(i.substring(i.length-8*l-8,i.length-8*l),16),!1);for(let l=0;l<o/4-c;l++)n[l]=0}function v(t,e,a){a=a||t.byteLength,e=e||0;const o=new Uint32Array(t.buffer,t.byteOffset+e,a/4),n=new Array(a/4);return o.forEach(((t,e)=>n[n.length-e-1]=t.toString(16).padStart(8,"0"))),i(n.join(""),16)}function P(t,e,a){a=a||t.byteLength,e=e||0;const o=new DataView(t.buffer,t.byteOffset+e,a),n=new Array(a/4);for(let i=0;i<a/4;i++)n[i]=o.getUint32(4*i,!1).toString(16).padStart(8,"0");return i(n.join(""),16)}function O(t,e){return t.toString(e)}function Q(t){const e=new Uint8Array(Math.floor((c(t)-1)/8)+1);return E(e,0,t,e.byteLength),e}const q=n(0),U=n(1);var M=Object.freeze({__proto__:null,abs:function(t){return BigInt(t)>=0?BigInt(t):-BigInt(t)},add:L,band:F,bitLength:c,bits:h,bor:function(t,e){return BigInt(t)|BigInt(e)},bxor:function(t,e){return BigInt(t)^BigInt(e)},div:y,e:n,eq:w,exp:function(t,e){return BigInt(t)**BigInt(e)},fromArray:function(t,e){let a=BigInt(0);e=BigInt(e);for(let o=0;o<t.length;o++)a=a*e+BigInt(t[o]);return a},fromRprBE:P,fromRprLE:v,fromString:i,geq:x,gt:B,isNegative:l,isOdd:g,isZero:r,land:function(t,e){return BigInt(t)&&BigInt(e)},leq:function(t,e){return BigInt(t)<=BigInt(e)},lnot:function(t){return!BigInt(t)},lor:function(t,e){return BigInt(t)||BigInt(e)},lt:function(t,e){return BigInt(t)<BigInt(e)},mod:C,mul:I,naf:f,neg:A,neq:function(t,e){return BigInt(t)!=BigInt(e)},one:U,pow:b,shiftLeft:s,shiftRight:d,shl:_,shr:u,square:function(t){return BigInt(t)*BigInt(t)},sub:m,toArray:function(t,e){const a=[];let o=BigInt(t);for(e=BigInt(e);o;)a.unshift(Number(o%e)),o/=e;return a},toLEBuff:Q,toNumber:p,toRprBE:S,toRprLE:E,toString:O,zero:q});const z=[];for(let yi=0;yi<256;yi++)z[yi]=D(yi,8);function D(t,e){let a=0,o=t;for(let i=0;i<e;i++)a<<=1,a|=1&o,o>>=1;return a}function G(t,e,a){if(r(a))return t.one;const o=h(a);if(0==o.length)return t.one;let i=e;for(let n=o.length-2;n>=0;n--)i=t.square(i),o[n]&&(i=t.mul(i,e));return i}function k(t){if(t.m%2==1)if(w(C(t.p,4),1))if(w(C(t.p,8),1))if(w(C(t.p,16),1))!function(t){t.sqrt_q=b(t.p,t.m),t.sqrt_s=0,t.sqrt_t=m(t.sqrt_q,1);for(;!g(t.sqrt_t);)t.sqrt_s=t.sqrt_s+1,t.sqrt_t=y(t.sqrt_t,2);let e=t.one;for(;t.eq(e,t.one);){const a=t.random();t.sqrt_z=t.pow(a,t.sqrt_t),e=t.pow(t.sqrt_z,2**(t.sqrt_s-1))}t.sqrt_tm1d2=y(m(t.sqrt_t,1),2),t.sqrt=function(t){const e=this;if(e.isZero(t))return e.zero;let a=e.pow(t,e.sqrt_tm1d2);const o=e.pow(e.mul(e.square(a),t),2**(e.sqrt_s-1));if(e.eq(o,e.negone))return null;let i=e.sqrt_s,n=e.mul(t,a),c=e.mul(n,a),l=e.sqrt_z;for(;!e.eq(c,e.one);){let t=e.square(c),o=1;for(;!e.eq(t,e.one);)t=e.square(t),o++;a=l;for(let n=0;n<i-o-1;n++)a=e.square(a);l=e.square(a),c=e.mul(c,l),n=e.mul(n,a),i=o}return e.geq(n,e.zero)?n:e.neg(n)}}(t);else{if(!w(C(t.p,16),9))throw new Error("Field withot sqrt");!function(t){t.sqrt=function(){throw new Error("Sqrt alg 4 not implemented")}}(t)}else{if(!w(C(t.p,8),5))throw new Error("Field withot sqrt");!function(t){t.sqrt=function(){throw new Error("Sqrt alg 3 not implemented")}}(t)}else w(C(t.p,4),3)&&function(t){t.sqrt_q=b(t.p,t.m),t.sqrt_e1=y(m(t.sqrt_q,3),4),t.sqrt=function(e){if(this.isZero(e))return this.zero;const a=this.pow(e,this.sqrt_e1),o=this.mul(this.square(a),e);if(this.eq(o,this.negone))return null;const i=this.mul(a,e);return t.geq(i,t.zero)?i:t.neg(i)}}(t);else{const e=C(b(t.p,t.m/2),4);1==e?function(t){t.sqrt=function(){throw new Error("Sqrt alg 10 not implemented")}}(t):3==e?function(t){t.sqrt_q=b(t.p,t.m/2),t.sqrt_e34=y(m(t.sqrt_q,3),4),t.sqrt_e12=y(m(t.sqrt_q,1),2),t.frobenius=function(e,a){return e%2==1?t.conjugate(a):a},t.sqrt=function(t){const e=this,a=e.pow(t,e.sqrt_e34),o=e.mul(e.square(a),t),i=e.mul(e.frobenius(1,o),o);if(e.eq(i,e.negone))return null;const n=e.mul(a,t);let c;if(e.eq(o,e.negone))c=e.mul(n,[e.F.zero,e.F.one]);else{const t=e.pow(e.add(e.one,o),e.sqrt_e12);c=e.mul(t,n)}return e.geq(c,e.zero)?c:e.neg(c)}}(t):function(t){t.sqrt=function(){throw new Error("Sqrt alg 8 not implemented")}}(t)}}function T(t,e,a,o,i){t[e]=t[e]+t[a]>>>0,t[i]=(t[i]^t[e])>>>0,t[i]=(t[i]<<16|t[i]>>>16&65535)>>>0,t[o]=t[o]+t[i]>>>0,t[a]=(t[a]^t[o])>>>0,t[a]=(t[a]<<12|t[a]>>>20&4095)>>>0,t[e]=t[e]+t[a]>>>0,t[i]=(t[i]^t[e])>>>0,t[i]=(t[i]<<8|t[i]>>>24&255)>>>0,t[o]=t[o]+t[i]>>>0,t[a]=(t[a]^t[o])>>>0,t[a]=(t[a]<<7|t[a]>>>25&127)>>>0}class N{constructor(t){t=t||[0,0,0,0,0,0,0,0],this.state=[1634760805,857760878,2036477234,1797285236,t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],0,0,0,0],this.idx=16,this.buff=new Array(16)}nextU32(){return 16==this.idx&&this.update(),this.buff[this.idx++]}nextU64(){return L(I(this.nextU32(),4294967296),this.nextU32())}nextBool(){return 1==(1&this.nextU32())}update(){for(let e=0;e<16;e++)this.buff[e]=this.state[e];for(let e=0;e<10;e++)T(t=this.buff,0,4,8,12),T(t,1,5,9,13),T(t,2,6,10,14),T(t,3,7,11,15),T(t,0,5,10,15),T(t,1,6,11,12),T(t,2,7,8,13),T(t,3,4,9,14);var t;for(let e=0;e<16;e++)this.buff[e]=this.buff[e]+this.state[e]>>>0;this.idx=0,this.state[12]=this.state[12]+1>>>0,0==this.state[12]&&(this.state[13]=this.state[13]+1>>>0,0==this.state[13]&&(this.state[14]=this.state[14]+1>>>0,0==this.state[14]&&(this.state[15]=this.state[15]+1>>>0)))}}function R(t){let e=new Uint8Array(t);if("undefined"!==typeof globalThis.crypto)globalThis.crypto.getRandomValues(e);else for(let a=0;a<t;a++)e[a]=4294967296*Math.random()>>>0;return e}let K=null;function V(){return K||(K=new N(function(){const t=R(32),e=new Uint32Array(t.buffer),a=[];for(let o=0;o<8;o++)a.push(e[o]);return a}()),K)}class j{constructor(t,e,a){this.F=e,this.G=t,this.opMulGF=a;let o=e.sqrt_t||e.t,i=e.sqrt_s||e.s,n=e.one;for(;e.eq(e.pow(n,e.half),e.one);)n=e.add(n,e.one);this.w=new Array(i+1),this.wi=new Array(i+1),this.w[i]=this.F.pow(n,o),this.wi[i]=this.F.inv(this.w[i]);let c=i-1;for(;c>=0;)this.w[c]=this.F.square(this.w[c+1]),this.wi[c]=this.F.square(this.wi[c+1]),c--;this.roots=[],this._setRoots(Math.min(i,15))}_setRoots(t){for(let e=t;e>=0&&!this.roots[e];e--){let t=this.F.one;const a=1<<e,o=new Array(a);for(let i=0;i<a;i++)o[i]=t,t=this.F.mul(t,this.w[e]);this.roots[e]=o}}fft(t){if(t.length<=1)return t;const e=H(t.length-1)+1;this._setRoots(e);const a=1<<e;if(t.length!=a)throw new Error("Size must be multiple of 2");return Y(this,t,e,0,1)}ifft(t){if(t.length<=1)return t;const e=H(t.length-1)+1;this._setRoots(e);const a=1<<e;if(t.length!=a)throw new Error("Size must be multiple of 2");const o=Y(this,t,e,0,1),i=this.F.inv(this.F.mulScalar(this.F.one,a)),n=new Array(a);for(let c=0;c<a;c++)n[c]=this.opMulGF(o[(a-c)%a],i);return n}}function H(t){return(0!==(4294901760&t)?(t&=4294901760,16):0)|(0!==(4278255360&t)?(t&=4278255360,8):0)|(0!==(4042322160&t)?(t&=4042322160,4):0)|(0!==(3435973836&t)?(t&=3435973836,2):0)|0!==(2863311530&t)}function Y(t,e,a,o,i){const n=1<<a;if(1==n)return[e[o]];if(2==n)return[t.G.add(e[o],e[o+i]),t.G.sub(e[o],e[o+i])];const c=n>>1,l=Y(t,e,a-1,o,2*i),r=Y(t,e,a-1,o+i,2*i),s=new Array(n);for(let d=0;d<c;d++)s[d]=t.G.add(l[d],t.opMulGF(r[d],t.roots[a][d])),s[d+c]=t.G.sub(l[d],t.opMulGF(r[d],t.roots[a][d]));return s}class J{constructor(t){this.type="F1",this.one=BigInt(1),this.zero=BigInt(0),this.p=BigInt(t),this.m=1,this.negone=this.p-this.one,this.two=BigInt(2),this.half=this.p>>this.one,this.bitLength=c(this.p),this.mask=(this.one<<BigInt(this.bitLength))-this.one,this.n64=Math.floor((this.bitLength-1)/64)+1,this.n32=2*this.n64,this.n8=8*this.n64,this.R=this.e(this.one<<BigInt(64*this.n64)),this.Ri=this.inv(this.R);const e=this.negone>>this.one;this.nqr=this.two;let a=this.pow(this.nqr,e);for(;!this.eq(a,this.negone);)this.nqr=this.nqr+this.one,a=this.pow(this.nqr,e);for(this.s=0,this.t=this.negone;(this.t&this.one)==this.zero;)this.s=this.s+1,this.t=this.t>>this.one;this.nqr_to_t=this.pow(this.nqr,this.t),k(this),this.FFT=new j(this,this,this.mul.bind(this)),this.fft=this.FFT.fft.bind(this.FFT),this.ifft=this.FFT.ifft.bind(this.FFT),this.w=this.FFT.w,this.wi=this.FFT.wi,this.shift=this.square(this.nqr),this.k=this.exp(this.nqr,2**this.s)}e(t,e){let a;if(e?16==e&&(a=BigInt("0x"+t)):a=BigInt(t),a<0){let t=-a;return t>=this.p&&(t%=this.p),this.p-t}return a>=this.p?a%this.p:a}add(t,e){const a=t+e;return a>=this.p?a-this.p:a}sub(t,e){return t>=e?t-e:this.p-e+t}neg(t){return t?this.p-t:t}mul(t,e){return t*e%this.p}mulScalar(t,e){return t*this.e(e)%this.p}square(t){return t*t%this.p}eq(t,e){return t==e}neq(t,e){return t!=e}lt(t,e){return(t>this.half?t-this.p:t)<(e>this.half?e-this.p:e)}gt(t,e){return(t>this.half?t-this.p:t)>(e>this.half?e-this.p:e)}leq(t,e){return(t>this.half?t-this.p:t)<=(e>this.half?e-this.p:e)}geq(t,e){return(t>this.half?t-this.p:t)>=(e>this.half?e-this.p:e)}div(t,e){return this.mul(t,this.inv(e))}idiv(t,e){if(!e)throw new Error("Division by zero");return t/e}inv(t){if(!t)throw new Error("Division by zero");let e=this.zero,a=this.p,o=this.one,i=t%this.p;for(;i;){let t=a/i;[e,o]=[o,e-t*o],[a,i]=[i,a-t*i]}return e<this.zero&&(e+=this.p),e}mod(t,e){return t%e}pow(t,e){return G(this,t,e)}exp(t,e){return G(this,t,e)}band(t,e){const a=t&e&this.mask;return a>=this.p?a-this.p:a}bor(t,e){const a=(t|e)&this.mask;return a>=this.p?a-this.p:a}bxor(t,e){const a=(t^e)&this.mask;return a>=this.p?a-this.p:a}bnot(t){const e=t^this.mask;return e>=this.p?e-this.p:e}shl(t,e){if(Number(e)<this.bitLength){const a=t<<e&this.mask;return a>=this.p?a-this.p:a}{const a=this.p-e;return Number(a)<this.bitLength?t>>a:this.zero}}shr(t,e){if(Number(e)<this.bitLength)return t>>e;{const a=this.p-e;if(Number(a)<this.bitLength){const e=t<<a&this.mask;return e>=this.p?e-this.p:e}return 0}}land(t,e){return t&&e?this.one:this.zero}lor(t,e){return t||e?this.one:this.zero}lnot(t){return t?this.zero:this.one}sqrt_old(t){if(t==this.zero)return this.zero;if(this.pow(t,this.negone>>this.one)!=this.one)return null;let e=this.s,a=this.nqr_to_t,o=this.pow(t,this.t),i=this.pow(t,this.add(this.t,this.one)>>this.one);for(;o!=this.one;){let t=this.square(o),n=1;for(;t!=this.one;)n++,t=this.square(t);let c=a;for(let a=0;a<e-n-1;a++)c=this.square(c);e=n,a=this.square(c),o=this.mul(o,a),i=this.mul(i,c)}return i>this.p>>this.one&&(i=this.neg(i)),i}normalize(t,e){if((t=BigInt(t,e))<0){let e=-t;return e>=this.p&&(e%=this.p),this.p-e}return t>=this.p?t%this.p:t}random(){const t=2*this.bitLength/8;let e=this.zero;for(let a=0;a<t;a++)e=(e<<BigInt(8))+BigInt(R(1)[0]);return e%this.p}toString(t,e){let a;if(e=e||10,t>this.half&&10==e){a="-"+(this.p-t).toString(e)}else a=t.toString(e);return a}isZero(t){return t==this.zero}fromRng(t){let e;do{e=this.zero;for(let a=0;a<this.n64;a++)e+=t.nextU64()<<BigInt(64*a);e&=this.mask}while(e>=this.p);return e=e*this.Ri%this.p,e}fft(t){return this.FFT.fft(t)}ifft(t){return this.FFT.ifft(t)}toRprLE(t,e,a){E(t,e,a,8*this.n64)}toRprBE(t,e,a){S(t,e,a,8*this.n64)}toRprBEM(t,e,a){return this.toRprBE(t,e,this.mul(this.R,a))}toRprLEM(t,e,a){return this.toRprLE(t,e,this.mul(this.R,a))}fromRprLE(t,e){return v(t,e,this.n8)}fromRprBE(t,e){return P(t,e,this.n8)}fromRprLEM(t,e){return this.mul(this.fromRprLE(t,e),this.Ri)}fromRprBEM(t,e){return this.mul(this.fromRprBE(t,e),this.Ri)}toObject(t){return t}}var W={bigInt2BytesLE:function(t,e){const a=Array(e);let o=BigInt(t);for(let i=0;i<e;i++)a[i]=Number(0xFFn&o),o>>=8n;return a},bigInt2U32LE:function(t,e){const a=Array(e);let o=BigInt(t);for(let i=0;i<e;i++)a[i]=Number(0xFFFFFFFFn&o),o>>=32n;return a},isOcamNum:function(t){return!!Array.isArray(t)&&(3==t.length&&("number"===typeof t[0]&&("number"===typeof t[1]&&!!Array.isArray(t[2]))))}},Z=function(t,e,a,o,i,n,c){const l=t.addFunction(e);l.addParam("base","i32"),l.addParam("scalar","i32"),l.addParam("scalarLength","i32"),l.addParam("r","i32"),l.addLocal("i","i32"),l.addLocal("b","i32");const r=l.getCodeBuilder(),s=r.i32_const(t.alloc(a));l.addCode(r.if(r.i32_eqz(r.getLocal("scalarLength")),[...r.call(c,r.getLocal("r")),...r.ret([])])),l.addCode(r.call(n,r.getLocal("base"),s)),l.addCode(r.call(c,r.getLocal("r"))),l.addCode(r.setLocal("i",r.getLocal("scalarLength"))),l.addCode(r.block(r.loop(r.setLocal("i",r.i32_sub(r.getLocal("i"),r.i32_const(1))),r.setLocal("b",r.i32_load8_u(r.i32_add(r.getLocal("scalar"),r.getLocal("i")))),...function(){const t=[];for(let e=0;e<8;e++)t.push(...r.call(i,r.getLocal("r"),r.getLocal("r")),...r.if(r.i32_ge_u(r.getLocal("b"),r.i32_const(128>>e)),[...r.setLocal("b",r.i32_sub(r.getLocal("b"),r.i32_const(128>>e))),...r.call(o,r.getLocal("r"),s,r.getLocal("r"))]));return t}(),r.br_if(1,r.i32_eqz(r.getLocal("i"))),r.br(0))))},X=function(t,e){const a=8*t.modules[e].n64,o=t.addFunction(e+"_batchInverse");o.addParam("pIn","i32"),o.addParam("inStep","i32"),o.addParam("n","i32"),o.addParam("pOut","i32"),o.addParam("outStep","i32"),o.addLocal("itAux","i32"),o.addLocal("itIn","i32"),o.addLocal("itOut","i32"),o.addLocal("i","i32");const i=o.getCodeBuilder(),n=i.i32_const(t.alloc(a));o.addCode(i.setLocal("itAux",i.i32_load(i.i32_const(0))),i.i32_store(i.i32_const(0),i.i32_add(i.getLocal("itAux"),i.i32_mul(i.i32_add(i.getLocal("n"),i.i32_const(1)),i.i32_const(a))))),o.addCode(i.call(e+"_one",i.getLocal("itAux")),i.setLocal("itIn",i.getLocal("pIn")),i.setLocal("itAux",i.i32_add(i.getLocal("itAux"),i.i32_const(a))),i.setLocal("i",i.i32_const(0)),i.block(i.loop(i.br_if(1,i.i32_eq(i.getLocal("i"),i.getLocal("n"))),i.if(i.call(e+"_isZero",i.getLocal("itIn")),i.call(e+"_copy",i.i32_sub(i.getLocal("itAux"),i.i32_const(a)),i.getLocal("itAux")),i.call(e+"_mul",i.getLocal("itIn"),i.i32_sub(i.getLocal("itAux"),i.i32_const(a)),i.getLocal("itAux"))),i.setLocal("itIn",i.i32_add(i.getLocal("itIn"),i.getLocal("inStep"))),i.setLocal("itAux",i.i32_add(i.getLocal("itAux"),i.i32_const(a))),i.setLocal("i",i.i32_add(i.getLocal("i"),i.i32_const(1))),i.br(0))),i.setLocal("itIn",i.i32_sub(i.getLocal("itIn"),i.getLocal("inStep"))),i.setLocal("itAux",i.i32_sub(i.getLocal("itAux"),i.i32_const(a))),i.setLocal("itOut",i.i32_add(i.getLocal("pOut"),i.i32_mul(i.i32_sub(i.getLocal("n"),i.i32_const(1)),i.getLocal("outStep")))),i.call(e+"_inverse",i.getLocal("itAux"),i.getLocal("itAux")),i.block(i.loop(i.br_if(1,i.i32_eqz(i.getLocal("i"))),i.if(i.call(e+"_isZero",i.getLocal("itIn")),[...i.call(e+"_copy",i.getLocal("itAux"),i.i32_sub(i.getLocal("itAux"),i.i32_const(a))),...i.call(e+"_zero",i.getLocal("itOut"))],[...i.call(e+"_copy",i.i32_sub(i.getLocal("itAux"),i.i32_const(a)),n),...i.call(e+"_mul",i.getLocal("itAux"),i.getLocal("itIn"),i.i32_sub(i.getLocal("itAux"),i.i32_const(a))),...i.call(e+"_mul",i.getLocal("itAux"),n,i.getLocal("itOut"))]),i.setLocal("itIn",i.i32_sub(i.getLocal("itIn"),i.getLocal("inStep"))),i.setLocal("itOut",i.i32_sub(i.getLocal("itOut"),i.getLocal("outStep"))),i.setLocal("itAux",i.i32_sub(i.getLocal("itAux"),i.i32_const(a))),i.setLocal("i",i.i32_sub(i.getLocal("i"),i.i32_const(1))),i.br(0)))),o.addCode(i.i32_store(i.i32_const(0),i.getLocal("itAux")))};var $=function(t,e,a,o,i,n){"undefined"===typeof n&&(n=o<i);const c=t.addFunction(e);c.addParam("pIn","i32"),c.addParam("n","i32"),c.addParam("pOut","i32"),c.addLocal("i","i32"),c.addLocal("itIn","i32"),c.addLocal("itOut","i32");const l=c.getCodeBuilder();n?c.addCode(l.setLocal("itIn",l.i32_add(l.getLocal("pIn"),l.i32_mul(l.i32_sub(l.getLocal("n"),l.i32_const(1)),l.i32_const(o)))),l.setLocal("itOut",l.i32_add(l.getLocal("pOut"),l.i32_mul(l.i32_sub(l.getLocal("n"),l.i32_const(1)),l.i32_const(i)))),l.setLocal("i",l.i32_const(0)),l.block(l.loop(l.br_if(1,l.i32_eq(l.getLocal("i"),l.getLocal("n"))),l.call(a,l.getLocal("itIn"),l.getLocal("itOut")),l.setLocal("itIn",l.i32_sub(l.getLocal("itIn"),l.i32_const(o))),l.setLocal("itOut",l.i32_sub(l.getLocal("itOut"),l.i32_const(i))),l.setLocal("i",l.i32_add(l.getLocal("i"),l.i32_const(1))),l.br(0)))):c.addCode(l.setLocal("itIn",l.getLocal("pIn")),l.setLocal("itOut",l.getLocal("pOut")),l.setLocal("i",l.i32_const(0)),l.block(l.loop(l.br_if(1,l.i32_eq(l.getLocal("i"),l.getLocal("n"))),l.call(a,l.getLocal("itIn"),l.getLocal("itOut")),l.setLocal("itIn",l.i32_add(l.getLocal("itIn"),l.i32_const(o))),l.setLocal("itOut",l.i32_add(l.getLocal("itOut"),l.i32_const(i))),l.setLocal("i",l.i32_add(l.getLocal("i"),l.i32_const(1))),l.br(0))))};var tt=function(t,e,a,o,i,n){"undefined"===typeof n&&(n=o<i);const c=t.addFunction(e);c.addParam("pIn1","i32"),c.addParam("pIn2","i32"),c.addParam("n","i32"),c.addParam("pOut","i32"),c.addLocal("i","i32"),c.addLocal("itIn1","i32"),c.addLocal("itIn2","i32"),c.addLocal("itOut","i32");const l=c.getCodeBuilder();n?c.addCode(l.setLocal("itIn1",l.i32_add(l.getLocal("pIn1"),l.i32_mul(l.i32_sub(l.getLocal("n"),l.i32_const(1)),l.i32_const(o)))),l.setLocal("itIn2",l.i32_add(l.getLocal("pIn2"),l.i32_mul(l.i32_sub(l.getLocal("n"),l.i32_const(1)),l.i32_const(o)))),l.setLocal("itOut",l.i32_add(l.getLocal("pOut"),l.i32_mul(l.i32_sub(l.getLocal("n"),l.i32_const(1)),l.i32_const(i)))),l.setLocal("i",l.i32_const(0)),l.block(l.loop(l.br_if(1,l.i32_eq(l.getLocal("i"),l.getLocal("n"))),l.call(a,l.getLocal("itIn1"),l.getLocal("itIn2"),l.getLocal("itOut")),l.setLocal("itIn1",l.i32_sub(l.getLocal("itIn1"),l.i32_const(o))),l.setLocal("itIn2",l.i32_sub(l.getLocal("itIn2"),l.i32_const(o))),l.setLocal("itOut",l.i32_sub(l.getLocal("itOut"),l.i32_const(i))),l.setLocal("i",l.i32_add(l.getLocal("i"),l.i32_const(1))),l.br(0)))):c.addCode(l.setLocal("itIn1",l.getLocal("pIn1")),l.setLocal("itIn2",l.getLocal("pIn2")),l.setLocal("itOut",l.getLocal("pOut")),l.setLocal("i",l.i32_const(0)),l.block(l.loop(l.br_if(1,l.i32_eq(l.getLocal("i"),l.getLocal("n"))),l.call(a,l.getLocal("itIn1"),l.getLocal("itIn2"),l.getLocal("itOut")),l.setLocal("itIn1",l.i32_add(l.getLocal("itIn1"),l.i32_const(o))),l.setLocal("itIn2",l.i32_add(l.getLocal("itIn2"),l.i32_const(o))),l.setLocal("itOut",l.i32_add(l.getLocal("itOut"),l.i32_const(i))),l.setLocal("i",l.i32_add(l.getLocal("i"),l.i32_const(1))),l.br(0))))};var et={};function at(t,e){return t===e?0:t>e?1:-1}function ot(t){return t*t}function it(t){return t%2n!==0n}function nt(t){return t%2n===0n}function ct(t){return t<0n}function lt(t){return t>0n}function rt(t){return ct(t)?t.toString(2).length-1:t.toString(2).length}function st(t){return t<0n?-t:t}function dt(t){return 1n===st(t)}function _t(t,e){for(var a,o,i,n=0n,c=1n,l=e,r=st(t);0n!==r;)a=l/r,o=n,i=l,n=c,l=r,c=o-a*c,r=i-a*r;if(!dt(l))throw new Error(t.toString()+" and "+e.toString()+" are not co-prime");return-1===at(n,0n)&&(n+=e),ct(t)?-n:n}function ut(t,e,a){if(0n===a)throw new Error("Cannot take modPow with modulus 0");var o=1n,i=t%a;for(ct(e)&&(e*=-1n,i=_t(i,a));lt(e);){if(0n===i)return 0n;it(e)&&(o=o*i%a),e/=2n,i=ot(i)%a}return o}function gt(t,e){return 0n!==e&&(!!dt(e)||(0===function(t,e){return(t=t>=0n?t:-t)===(e=e>=0n?e:-e)?0:t>e?1:-1}(e,2n)?nt(t):t%e===0n))}function ft(t,e){for(var a,o,i,n=function(t){return t-1n}(t),c=n,l=0;nt(c);)c/=2n,l++;t:for(o=0;o<e.length;o++)if(!(t<e[o])&&!dt(i=ut(BigInt(e[o]),c,t))&&i!==n){for(a=l-1;0!=a;a--){if(dt(i=ot(i)%t))return!1;if(i===n)continue t}return!1}return!0}et.bitLength=rt,et.isOdd=it,et.isNegative=ct,et.abs=st,et.isUnit=dt,et.compare=at,et.modInv=_t,et.modPow=ut,et.isPrime=function(t){var e=function(t){var e=st(t);return!dt(e)&&(2n===e||3n===e||5n===e||!(nt(e)||gt(e,3n)||gt(e,5n))&&(e<49n||void 0))}(t);if(void 0!==e)return e;var a=st(t),o=rt(a);if(o<=64)return ft(a,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var i=Math.log(2)*Number(o),n=Math.ceil(i),c=[],l=0;l<n;l++)c.push(BigInt(l+2));return ft(a,c)},et.square=ot;const ht=function(t,e,a){const o=a||"int";if(t.modules[o])return o;t.modules[o]={};const i=2*e,n=8*e;return function(){const a=t.addFunction(o+"_copy");a.addParam("px","i32"),a.addParam("pr","i32");const i=a.getCodeBuilder();for(let t=0;t<e;t++)a.addCode(i.i64_store(i.getLocal("pr"),8*t,i.i64_load(i.getLocal("px"),8*t)))}(),function(){const a=t.addFunction(o+"_zero");a.addParam("pr","i32");const i=a.getCodeBuilder();for(let t=0;t<e;t++)a.addCode(i.i64_store(i.getLocal("pr"),8*t,i.i64_const(0)))}(),function(){const a=t.addFunction(o+"_isZero");a.addParam("px","i32"),a.setReturnType("i32");const i=a.getCodeBuilder();a.addCode(function t(e){return 0==e?i.ret(i.i64_eqz(i.i64_load(i.getLocal("px")))):i.if(i.i64_eqz(i.i64_load(i.getLocal("px"),8*e)),t(e-1),i.ret(i.i32_const(0)))}(e-1)),a.addCode(i.ret(i.i32_const(0)))}(),function(){const a=t.addFunction(o+"_one");a.addParam("pr","i32");const i=a.getCodeBuilder();a.addCode(i.i64_store(i.getLocal("pr"),0,i.i64_const(1)));for(let t=1;t<e;t++)a.addCode(i.i64_store(i.getLocal("pr"),8*t,i.i64_const(0)))}(),function(){const a=t.addFunction(o+"_eq");a.addParam("px","i32"),a.addParam("py","i32"),a.setReturnType("i32");const i=a.getCodeBuilder();a.addCode(function t(e){return 0==e?i.ret(i.i64_eq(i.i64_load(i.getLocal("px")),i.i64_load(i.getLocal("py")))):i.if(i.i64_eq(i.i64_load(i.getLocal("px"),8*e),i.i64_load(i.getLocal("py"),8*e)),t(e-1),i.ret(i.i32_const(0)))}(e-1)),a.addCode(i.ret(i.i32_const(0)))}(),function(){const a=t.addFunction(o+"_gte");a.addParam("px","i32"),a.addParam("py","i32"),a.setReturnType("i32");const i=a.getCodeBuilder();a.addCode(function t(e){return 0==e?i.ret(i.i64_ge_u(i.i64_load(i.getLocal("px")),i.i64_load(i.getLocal("py")))):i.if(i.i64_lt_u(i.i64_load(i.getLocal("px"),8*e),i.i64_load(i.getLocal("py"),8*e)),i.ret(i.i32_const(0)),i.if(i.i64_gt_u(i.i64_load(i.getLocal("px"),8*e),i.i64_load(i.getLocal("py"),8*e)),i.ret(i.i32_const(1)),t(e-1)))}(e-1)),a.addCode(i.ret(i.i32_const(0)))}(),function(){const e=t.addFunction(o+"_add");e.addParam("x","i32"),e.addParam("y","i32"),e.addParam("r","i32"),e.setReturnType("i32"),e.addLocal("c","i64");const a=e.getCodeBuilder();e.addCode(a.setLocal("c",a.i64_add(a.i64_load32_u(a.getLocal("x")),a.i64_load32_u(a.getLocal("y"))))),e.addCode(a.i64_store32(a.getLocal("r"),a.getLocal("c")));for(let t=1;t<i;t++)e.addCode(a.setLocal("c",a.i64_add(a.i64_add(a.i64_load32_u(a.getLocal("x"),4*t),a.i64_load32_u(a.getLocal("y"),4*t)),a.i64_shr_u(a.getLocal("c"),a.i64_const(32))))),e.addCode(a.i64_store32(a.getLocal("r"),4*t,a.getLocal("c")));e.addCode(a.i32_wrap_i64(a.i64_shr_u(a.getLocal("c"),a.i64_const(32))))}(),function(){const e=t.addFunction(o+"_sub");e.addParam("x","i32"),e.addParam("y","i32"),e.addParam("r","i32"),e.setReturnType("i32"),e.addLocal("c","i64");const a=e.getCodeBuilder();e.addCode(a.setLocal("c",a.i64_sub(a.i64_load32_u(a.getLocal("x")),a.i64_load32_u(a.getLocal("y"))))),e.addCode(a.i64_store32(a.getLocal("r"),a.i64_and(a.getLocal("c"),a.i64_const("0xFFFFFFFF"))));for(let t=1;t<i;t++)e.addCode(a.setLocal("c",a.i64_add(a.i64_sub(a.i64_load32_u(a.getLocal("x"),4*t),a.i64_load32_u(a.getLocal("y"),4*t)),a.i64_shr_s(a.getLocal("c"),a.i64_const(32))))),e.addCode(a.i64_store32(a.getLocal("r"),4*t,a.i64_and(a.getLocal("c"),a.i64_const("0xFFFFFFFF"))));e.addCode(a.i32_wrap_i64(a.i64_shr_s(a.getLocal("c"),a.i64_const(32))))}(),function(){const e=t.addFunction(o+"_mul");e.addParam("x","i32"),e.addParam("y","i32"),e.addParam("r","i32"),e.addLocal("c0","i64"),e.addLocal("c1","i64");for(let t=0;t<i;t++)e.addLocal("x"+t,"i64"),e.addLocal("y"+t,"i64");const a=e.getCodeBuilder(),n=[],c=[];function l(t,e){let o,i;return n[t]?o=a.getLocal("x"+t):(o=a.teeLocal("x"+t,a.i64_load32_u(a.getLocal("x"),4*t)),n[t]=!0),c[e]?i=a.getLocal("y"+e):(i=a.teeLocal("y"+e,a.i64_load32_u(a.getLocal("y"),4*e)),c[e]=!0),a.i64_mul(o,i)}let r="c0",s="c1";for(let t=0;t<2*i-1;t++){for(let o=Math.max(0,t-i+1);o<=t&&o<i;o++){const i=t-o;e.addCode(a.setLocal(r,a.i64_add(a.i64_and(a.getLocal(r),a.i64_const(4294967295)),l(o,i)))),e.addCode(a.setLocal(s,a.i64_add(a.getLocal(s),a.i64_shr_u(a.getLocal(r),a.i64_const(32)))))}e.addCode(a.i64_store32(a.getLocal("r"),4*t,a.getLocal(r))),[r,s]=[s,r],e.addCode(a.setLocal(s,a.i64_shr_u(a.getLocal(r),a.i64_const(32))))}e.addCode(a.i64_store32(a.getLocal("r"),4*i*2-4,a.getLocal(r)))}(),function(){const e=t.addFunction(o+"_square");e.addParam("x","i32"),e.addParam("r","i32"),e.addLocal("c0","i64"),e.addLocal("c1","i64"),e.addLocal("c0_old","i64"),e.addLocal("c1_old","i64");for(let t=0;t<i;t++)e.addLocal("x"+t,"i64");const a=e.getCodeBuilder(),n=[];function c(t,e){let o,i;return n[t]?o=a.getLocal("x"+t):(o=a.teeLocal("x"+t,a.i64_load32_u(a.getLocal("x"),4*t)),n[t]=!0),n[e]?i=a.getLocal("x"+e):(i=a.teeLocal("x"+e,a.i64_load32_u(a.getLocal("x"),4*e)),n[e]=!0),a.i64_mul(o,i)}let l="c0",r="c1",s="c0_old",d="c1_old";for(let t=0;t<2*i-1;t++){e.addCode(a.setLocal(l,a.i64_const(0)),a.setLocal(r,a.i64_const(0)));for(let o=Math.max(0,t-i+1);o<t+1>>1&&o<i;o++){const i=t-o;e.addCode(a.setLocal(l,a.i64_add(a.i64_and(a.getLocal(l),a.i64_const(4294967295)),c(o,i)))),e.addCode(a.setLocal(r,a.i64_add(a.getLocal(r),a.i64_shr_u(a.getLocal(l),a.i64_const(32)))))}e.addCode(a.setLocal(l,a.i64_shl(a.i64_and(a.getLocal(l),a.i64_const(4294967295)),a.i64_const(1)))),e.addCode(a.setLocal(r,a.i64_add(a.i64_shl(a.getLocal(r),a.i64_const(1)),a.i64_shr_u(a.getLocal(l),a.i64_const(32))))),t%2==0&&(e.addCode(a.setLocal(l,a.i64_add(a.i64_and(a.getLocal(l),a.i64_const(4294967295)),c(t>>1,t>>1)))),e.addCode(a.setLocal(r,a.i64_add(a.getLocal(r),a.i64_shr_u(a.getLocal(l),a.i64_const(32)))))),t>0&&(e.addCode(a.setLocal(l,a.i64_add(a.i64_and(a.getLocal(l),a.i64_const(4294967295)),a.i64_and(a.getLocal(s),a.i64_const(4294967295))))),e.addCode(a.setLocal(r,a.i64_add(a.i64_add(a.getLocal(r),a.i64_shr_u(a.getLocal(l),a.i64_const(32))),a.getLocal(d))))),e.addCode(a.i64_store32(a.getLocal("r"),4*t,a.getLocal(l))),e.addCode(a.setLocal(s,a.getLocal(r)),a.setLocal(d,a.i64_shr_u(a.getLocal(s),a.i64_const(32))))}e.addCode(a.i64_store32(a.getLocal("r"),4*i*2-4,a.getLocal(s)))}(),function(){const e=t.addFunction(o+"_squareOld");e.addParam("x","i32"),e.addParam("r","i32");const a=e.getCodeBuilder();e.addCode(a.call(o+"_mul",a.getLocal("x"),a.getLocal("x"),a.getLocal("r")))}(),function(){!function(){const e=t.addFunction(o+"__mul1");e.addParam("px","i32"),e.addParam("y","i64"),e.addParam("pr","i32"),e.addLocal("c","i64");const a=e.getCodeBuilder();e.addCode(a.setLocal("c",a.i64_mul(a.i64_load32_u(a.getLocal("px"),0,0),a.getLocal("y")))),e.addCode(a.i64_store32(a.getLocal("pr"),0,0,a.getLocal("c")));for(let t=1;t<i;t++)e.addCode(a.setLocal("c",a.i64_add(a.i64_mul(a.i64_load32_u(a.getLocal("px"),4*t,0),a.getLocal("y")),a.i64_shr_u(a.getLocal("c"),a.i64_const(32))))),e.addCode(a.i64_store32(a.getLocal("pr"),4*t,0,a.getLocal("c")))}(),function(){const e=t.addFunction(o+"__add1");e.addParam("x","i32"),e.addParam("y","i64"),e.addLocal("c","i64"),e.addLocal("px","i32");const a=e.getCodeBuilder();e.addCode(a.setLocal("px",a.getLocal("x"))),e.addCode(a.setLocal("c",a.i64_add(a.i64_load32_u(a.getLocal("px"),0,0),a.getLocal("y")))),e.addCode(a.i64_store32(a.getLocal("px"),0,0,a.getLocal("c"))),e.addCode(a.setLocal("c",a.i64_shr_u(a.getLocal("c"),a.i64_const(32)))),e.addCode(a.block(a.loop(a.br_if(1,a.i64_eqz(a.getLocal("c"))),a.setLocal("px",a.i32_add(a.getLocal("px"),a.i32_const(4))),a.setLocal("c",a.i64_add(a.i64_load32_u(a.getLocal("px"),0,0),a.getLocal("c"))),a.i64_store32(a.getLocal("px"),0,0,a.getLocal("c")),a.setLocal("c",a.i64_shr_u(a.getLocal("c"),a.i64_const(32))),a.br(0))))}();const e=t.addFunction(o+"_div");e.addParam("x","i32"),e.addParam("y","i32"),e.addParam("c","i32"),e.addParam("r","i32"),e.addLocal("rr","i32"),e.addLocal("cc","i32"),e.addLocal("eX","i32"),e.addLocal("eY","i32"),e.addLocal("sy","i64"),e.addLocal("sx","i64"),e.addLocal("ec","i32");const a=e.getCodeBuilder(),c=a.i32_const(t.alloc(n)),l=a.i32_const(t.alloc(n)),r=a.i32_const(t.alloc(n)),s=a.getLocal("cc"),d=a.getLocal("rr"),_=t.alloc(2*n),u=a.i32_const(_),g=a.i32_const(_+n);e.addCode(a.if(a.getLocal("c"),a.setLocal("cc",a.getLocal("c")),a.setLocal("cc",l))),e.addCode(a.if(a.getLocal("r"),a.setLocal("rr",a.getLocal("r")),a.setLocal("rr",r))),e.addCode(a.call(o+"_copy",a.getLocal("x"),d)),e.addCode(a.call(o+"_copy",a.getLocal("y"),c)),e.addCode(a.call(o+"_zero",s)),e.addCode(a.call(o+"_zero",u)),e.addCode(a.setLocal("eX",a.i32_const(n-1))),e.addCode(a.setLocal("eY",a.i32_const(n-1))),e.addCode(a.block(a.loop(a.br_if(1,a.i32_or(a.i32_load8_u(a.i32_add(c,a.getLocal("eY")),0,0),a.i32_eq(a.getLocal("eY"),a.i32_const(3)))),a.setLocal("eY",a.i32_sub(a.getLocal("eY"),a.i32_const(1))),a.br(0)))),e.addCode(a.setLocal("sy",a.i64_add(a.i64_load32_u(a.i32_sub(a.i32_add(c,a.getLocal("eY")),a.i32_const(3)),0,0),a.i64_const(1)))),e.addCode(a.if(a.i64_eq(a.getLocal("sy"),a.i64_const(1)),a.drop(a.i64_div_u(a.i64_const(0),a.i64_const(0))))),e.addCode(a.block(a.loop(a.block(a.loop(a.br_if(1,a.i32_or(a.i32_load8_u(a.i32_add(d,a.getLocal("eX")),0,0),a.i32_eq(a.getLocal("eX"),a.i32_const(7)))),a.setLocal("eX",a.i32_sub(a.getLocal("eX"),a.i32_const(1))),a.br(0))),a.setLocal("sx",a.i64_load(a.i32_sub(a.i32_add(d,a.getLocal("eX")),a.i32_const(7)),0,0)),a.setLocal("sx",a.i64_div_u(a.getLocal("sx"),a.getLocal("sy"))),a.setLocal("ec",a.i32_sub(a.i32_sub(a.getLocal("eX"),a.getLocal("eY")),a.i32_const(4))),a.block(a.loop(a.br_if(1,a.i32_and(a.i64_eqz(a.i64_and(a.getLocal("sx"),a.i64_const("0xFFFFFFFF00000000"))),a.i32_ge_s(a.getLocal("ec"),a.i32_const(0)))),a.setLocal("sx",a.i64_shr_u(a.getLocal("sx"),a.i64_const(8))),a.setLocal("ec",a.i32_add(a.getLocal("ec"),a.i32_const(1))),a.br(0))),a.if(a.i64_eqz(a.getLocal("sx")),[...a.br_if(2,a.i32_eqz(a.call(o+"_gte",d,c))),...a.setLocal("sx",a.i64_const(1)),...a.setLocal("ec",a.i32_const(0))]),a.call(o+"__mul1",c,a.getLocal("sx"),g),a.drop(a.call(o+"_sub",d,a.i32_sub(g,a.getLocal("ec")),d)),a.call(o+"__add1",a.i32_add(s,a.getLocal("ec")),a.getLocal("sx")),a.br(0))))}(),function(){const e=t.addFunction(o+"_inverseMod");e.addParam("px","i32"),e.addParam("pm","i32"),e.addParam("pr","i32"),e.addLocal("t","i32"),e.addLocal("newt","i32"),e.addLocal("r","i32"),e.addLocal("qq","i32"),e.addLocal("qr","i32"),e.addLocal("newr","i32"),e.addLocal("swp","i32"),e.addLocal("x","i32"),e.addLocal("signt","i32"),e.addLocal("signnewt","i32"),e.addLocal("signx","i32");const a=e.getCodeBuilder(),i=a.i32_const(t.alloc(n)),c=a.i32_const(t.alloc(n)),l=a.i32_const(t.alloc(n)),r=a.i32_const(t.alloc(n)),s=a.i32_const(t.alloc(n)),d=a.i32_const(t.alloc(n)),_=a.i32_const(t.alloc(2*n)),u=a.i32_const(t.alloc(n));e.addCode(a.setLocal("t",i),a.call(o+"_zero",i),a.setLocal("signt",a.i32_const(0))),e.addCode(a.setLocal("r",c),a.call(o+"_copy",a.getLocal("pm"),c)),e.addCode(a.setLocal("newt",l),a.call(o+"_one",l),a.setLocal("signnewt",a.i32_const(0))),e.addCode(a.setLocal("newr",r),a.call(o+"_copy",a.getLocal("px"),r)),e.addCode(a.setLocal("qq",s)),e.addCode(a.setLocal("qr",d)),e.addCode(a.setLocal("x",u)),e.addCode(a.block(a.loop(a.br_if(1,a.call(o+"_isZero",a.getLocal("newr"))),a.call(o+"_div",a.getLocal("r"),a.getLocal("newr"),a.getLocal("qq"),a.getLocal("qr")),a.call(o+"_mul",a.getLocal("qq"),a.getLocal("newt"),_),a.if(a.getLocal("signt"),a.if(a.getLocal("signnewt"),a.if(a.call(o+"_gte",_,a.getLocal("t")),[...a.drop(a.call(o+"_sub",_,a.getLocal("t"),a.getLocal("x"))),...a.setLocal("signx",a.i32_const(0))],[...a.drop(a.call(o+"_sub",a.getLocal("t"),_,a.getLocal("x"))),...a.setLocal("signx",a.i32_const(1))]),[...a.drop(a.call(o+"_add",_,a.getLocal("t"),a.getLocal("x"))),...a.setLocal("signx",a.i32_const(1))]),a.if(a.getLocal("signnewt"),[...a.drop(a.call(o+"_add",_,a.getLocal("t"),a.getLocal("x"))),...a.setLocal("signx",a.i32_const(0))],a.if(a.call(o+"_gte",a.getLocal("t"),_),[...a.drop(a.call(o+"_sub",a.getLocal("t"),_,a.getLocal("x"))),...a.setLocal("signx",a.i32_const(0))],[...a.drop(a.call(o+"_sub",_,a.getLocal("t"),a.getLocal("x"))),...a.setLocal("signx",a.i32_const(1))]))),a.setLocal("swp",a.getLocal("t")),a.setLocal("t",a.getLocal("newt")),a.setLocal("newt",a.getLocal("x")),a.setLocal("x",a.getLocal("swp")),a.setLocal("signt",a.getLocal("signnewt")),a.setLocal("signnewt",a.getLocal("signx")),a.setLocal("swp",a.getLocal("r")),a.setLocal("r",a.getLocal("newr")),a.setLocal("newr",a.getLocal("qr")),a.setLocal("qr",a.getLocal("swp")),a.br(0)))),e.addCode(a.if(a.getLocal("signt"),a.drop(a.call(o+"_sub",a.getLocal("pm"),a.getLocal("t"),a.getLocal("pr"))),a.call(o+"_copy",a.getLocal("t"),a.getLocal("pr"))))}(),t.exportFunction(o+"_copy"),t.exportFunction(o+"_zero"),t.exportFunction(o+"_one"),t.exportFunction(o+"_isZero"),t.exportFunction(o+"_eq"),t.exportFunction(o+"_gte"),t.exportFunction(o+"_add"),t.exportFunction(o+"_sub"),t.exportFunction(o+"_mul"),t.exportFunction(o+"_square"),t.exportFunction(o+"_squareOld"),t.exportFunction(o+"_div"),t.exportFunction(o+"_inverseMod"),o},pt=W,Lt=Z,mt=X,At=$,It=tt,{bitLength:bt,modInv:yt,modPow:Ct,isPrime:wt,isOdd:Bt,square:xt}=et;var Ft=function(t,e,a,o){const i=BigInt(e),n=Math.floor((bt(i-1n)-1)/64)+1,c=2*n,l=8*n,r=a||"f1m";if(t.modules[r])return r;const s=ht(t,n,o),d=t.alloc(l,pt.bigInt2BytesLE(i,l)),_=t.alloc(pt.bigInt2BytesLE(xt(1n<<BigInt(64*n))%i,l)),u=t.alloc(pt.bigInt2BytesLE((1n<<BigInt(64*n))%i,l)),g=t.alloc(pt.bigInt2BytesLE(0n,l)),f=i-1n,h=f>>1n,p=t.alloc(l,pt.bigInt2BytesLE(h,l)),L=h+1n,m=t.alloc(l,pt.bigInt2BytesLE(L,l));t.modules[r]={pq:d,pR2:_,n64:n,q:i,pOne:u,pZero:g,pePlusOne:m};let A=2n;if(wt(i))for(;Ct(A,h,i)!==f;)A+=1n;let I=0,b=f;for(;!Bt(b)&&0n!==b;)I++,b>>=1n;const y=t.alloc(l,pt.bigInt2BytesLE(b,l)),C=Ct(A,b,i),w=t.alloc(pt.bigInt2BytesLE((C<<BigInt(64*n))%i,l)),B=b+1n>>1n,x=t.alloc(l,pt.bigInt2BytesLE(B,l));return t.exportFunction(s+"_copy",r+"_copy"),t.exportFunction(s+"_zero",r+"_zero"),t.exportFunction(s+"_isZero",r+"_isZero"),t.exportFunction(s+"_eq",r+"_eq"),function(){const e=t.addFunction(r+"_isOne");e.addParam("x","i32"),e.setReturnType("i32");const a=e.getCodeBuilder();e.addCode(a.ret(a.call(s+"_eq",a.getLocal("x"),a.i32_const(u))))}(),function(){const e=t.addFunction(r+"_add");e.addParam("x","i32"),e.addParam("y","i32"),e.addParam("r","i32");const a=e.getCodeBuilder();e.addCode(a.if(a.call(s+"_add",a.getLocal("x"),a.getLocal("y"),a.getLocal("r")),a.drop(a.call(s+"_sub",a.getLocal("r"),a.i32_const(d),a.getLocal("r"))),a.if(a.call(s+"_gte",a.getLocal("r"),a.i32_const(d)),a.drop(a.call(s+"_sub",a.getLocal("r"),a.i32_const(d),a.getLocal("r"))))))}(),function(){const e=t.addFunction(r+"_sub");e.addParam("x","i32"),e.addParam("y","i32"),e.addParam("r","i32");const a=e.getCodeBuilder();e.addCode(a.if(a.call(s+"_sub",a.getLocal("x"),a.getLocal("y"),a.getLocal("r")),a.drop(a.call(s+"_add",a.getLocal("r"),a.i32_const(d),a.getLocal("r")))))}(),function(){const e=t.addFunction(r+"_neg");e.addParam("x","i32"),e.addParam("r","i32");const a=e.getCodeBuilder();e.addCode(a.call(r+"_sub",a.i32_const(g),a.getLocal("x"),a.getLocal("r")))}(),function(){const e=t.alloc(c*c*8),a=t.addFunction(r+"_mReduct");a.addParam("t","i32"),a.addParam("r","i32"),a.addLocal("np32","i64"),a.addLocal("c","i64"),a.addLocal("m","i64");const o=a.getCodeBuilder(),n=Number(0x100000000n-yt(i,0x100000000n));a.addCode(o.setLocal("np32",o.i64_const(n)));for(let t=0;t<c;t++){a.addCode(o.setLocal("c",o.i64_const(0))),a.addCode(o.setLocal("m",o.i64_and(o.i64_mul(o.i64_load32_u(o.getLocal("t"),4*t),o.getLocal("np32")),o.i64_const("0xFFFFFFFF"))));for(let e=0;e<c;e++)a.addCode(o.setLocal("c",o.i64_add(o.i64_add(o.i64_load32_u(o.getLocal("t"),4*(t+e)),o.i64_shr_u(o.getLocal("c"),o.i64_const(32))),o.i64_mul(o.i64_load32_u(o.i32_const(d),4*e),o.getLocal("m"))))),a.addCode(o.i64_store32(o.getLocal("t"),4*(t+e),o.getLocal("c")));a.addCode(o.i64_store32(o.i32_const(e),4*t,o.i64_shr_u(o.getLocal("c"),o.i64_const(32))))}a.addCode(o.call(r+"_add",o.i32_const(e),o.i32_add(o.getLocal("t"),o.i32_const(4*c)),o.getLocal("r")))}(),function(){const e=t.addFunction(r+"_mul");e.addParam("x","i32"),e.addParam("y","i32"),e.addParam("r","i32"),e.addLocal("c0","i64"),e.addLocal("c1","i64"),e.addLocal("np32","i64");for(let t=0;t<c;t++)e.addLocal("x"+t,"i64"),e.addLocal("y"+t,"i64"),e.addLocal("m"+t,"i64"),e.addLocal("q"+t,"i64");const a=e.getCodeBuilder(),o=Number(0x100000000n-yt(i,0x100000000n));e.addCode(a.setLocal("np32",a.i64_const(o)));const n=[],l=[],_=[];function u(t,e){let o,i;return n[t]?o=a.getLocal("x"+t):(o=a.teeLocal("x"+t,a.i64_load32_u(a.getLocal("x"),4*t)),n[t]=!0),l[e]?i=a.getLocal("y"+e):(i=a.teeLocal("y"+e,a.i64_load32_u(a.getLocal("y"),4*e)),l[e]=!0),a.i64_mul(o,i)}function g(t,e){let o,i;return _[t]?o=a.getLocal("q"+t):(o=a.teeLocal("q"+t,a.i64_load32_u(a.i32_const(0),d+4*t)),_[t]=!0),i=a.getLocal("m"+e),a.i64_mul(o,i)}let f="c0",h="c1";for(let t=0;t<2*c-1;t++){for(let o=Math.max(0,t-c+1);o<=t&&o<c;o++){const i=t-o;e.addCode(a.setLocal(f,a.i64_add(a.i64_and(a.getLocal(f),a.i64_const(4294967295)),u(o,i)))),e.addCode(a.setLocal(h,a.i64_add(a.getLocal(h),a.i64_shr_u(a.getLocal(f),a.i64_const(32)))))}for(let o=Math.max(1,t-c+1);o<=t&&o<c;o++){const i=t-o;e.addCode(a.setLocal(f,a.i64_add(a.i64_and(a.getLocal(f),a.i64_const(4294967295)),g(o,i)))),e.addCode(a.setLocal(h,a.i64_add(a.getLocal(h),a.i64_shr_u(a.getLocal(f),a.i64_const(32)))))}t<c&&(e.addCode(a.setLocal("m"+t,a.i64_and(a.i64_mul(a.i64_and(a.getLocal(f),a.i64_const(4294967295)),a.getLocal("np32")),a.i64_const("0xFFFFFFFF")))),e.addCode(a.setLocal(f,a.i64_add(a.i64_and(a.getLocal(f),a.i64_const(4294967295)),g(0,t)))),e.addCode(a.setLocal(h,a.i64_add(a.getLocal(h),a.i64_shr_u(a.getLocal(f),a.i64_const(32)))))),t>=c&&e.addCode(a.i64_store32(a.getLocal("r"),4*(t-c),a.getLocal(f))),[f,h]=[h,f],e.addCode(a.setLocal(h,a.i64_shr_u(a.getLocal(f),a.i64_const(32))))}e.addCode(a.i64_store32(a.getLocal("r"),4*c-4,a.getLocal(f))),e.addCode(a.if(a.i32_wrap_i64(a.getLocal(h)),a.drop(a.call(s+"_sub",a.getLocal("r"),a.i32_const(d),a.getLocal("r"))),a.if(a.call(s+"_gte",a.getLocal("r"),a.i32_const(d)),a.drop(a.call(s+"_sub",a.getLocal("r"),a.i32_const(d),a.getLocal("r"))))))}(),function(){const e=t.addFunction(r+"_square");e.addParam("x","i32"),e.addParam("r","i32"),e.addLocal("c0","i64"),e.addLocal("c1","i64"),e.addLocal("c0_old","i64"),e.addLocal("c1_old","i64"),e.addLocal("np32","i64");for(let t=0;t<c;t++)e.addLocal("x"+t,"i64"),e.addLocal("m"+t,"i64"),e.addLocal("q"+t,"i64");const a=e.getCodeBuilder(),o=Number(0x100000000n-yt(i,0x100000000n));e.addCode(a.setLocal("np32",a.i64_const(o)));const n=[],l=[];function _(t,e){let o,i;return n[t]?o=a.getLocal("x"+t):(o=a.teeLocal("x"+t,a.i64_load32_u(a.getLocal("x"),4*t)),n[t]=!0),n[e]?i=a.getLocal("x"+e):(i=a.teeLocal("x"+e,a.i64_load32_u(a.getLocal("x"),4*e)),n[e]=!0),a.i64_mul(o,i)}function u(t,e){let o,i;return l[t]?o=a.getLocal("q"+t):(o=a.teeLocal("q"+t,a.i64_load32_u(a.i32_const(0),d+4*t)),l[t]=!0),i=a.getLocal("m"+e),a.i64_mul(o,i)}let g="c0",f="c1",h="c0_old",p="c1_old";for(let t=0;t<2*c-1;t++){e.addCode(a.setLocal(g,a.i64_const(0)),a.setLocal(f,a.i64_const(0)));for(let o=Math.max(0,t-c+1);o<t+1>>1&&o<c;o++){const i=t-o;e.addCode(a.setLocal(g,a.i64_add(a.i64_and(a.getLocal(g),a.i64_const(4294967295)),_(o,i)))),e.addCode(a.setLocal(f,a.i64_add(a.getLocal(f),a.i64_shr_u(a.getLocal(g),a.i64_const(32)))))}e.addCode(a.setLocal(g,a.i64_shl(a.i64_and(a.getLocal(g),a.i64_const(4294967295)),a.i64_const(1)))),e.addCode(a.setLocal(f,a.i64_add(a.i64_shl(a.getLocal(f),a.i64_const(1)),a.i64_shr_u(a.getLocal(g),a.i64_const(32))))),t%2==0&&(e.addCode(a.setLocal(g,a.i64_add(a.i64_and(a.getLocal(g),a.i64_const(4294967295)),_(t>>1,t>>1)))),e.addCode(a.setLocal(f,a.i64_add(a.getLocal(f),a.i64_shr_u(a.getLocal(g),a.i64_const(32)))))),t>0&&(e.addCode(a.setLocal(g,a.i64_add(a.i64_and(a.getLocal(g),a.i64_const(4294967295)),a.i64_and(a.getLocal(h),a.i64_const(4294967295))))),e.addCode(a.setLocal(f,a.i64_add(a.i64_add(a.getLocal(f),a.i64_shr_u(a.getLocal(g),a.i64_const(32))),a.getLocal(p)))));for(let o=Math.max(1,t-c+1);o<=t&&o<c;o++){const i=t-o;e.addCode(a.setLocal(g,a.i64_add(a.i64_and(a.getLocal(g),a.i64_const(4294967295)),u(o,i)))),e.addCode(a.setLocal(f,a.i64_add(a.getLocal(f),a.i64_shr_u(a.getLocal(g),a.i64_const(32)))))}t<c&&(e.addCode(a.setLocal("m"+t,a.i64_and(a.i64_mul(a.i64_and(a.getLocal(g),a.i64_const(4294967295)),a.getLocal("np32")),a.i64_const("0xFFFFFFFF")))),e.addCode(a.setLocal(g,a.i64_add(a.i64_and(a.getLocal(g),a.i64_const(4294967295)),u(0,t)))),e.addCode(a.setLocal(f,a.i64_add(a.getLocal(f),a.i64_shr_u(a.getLocal(g),a.i64_const(32)))))),t>=c&&e.addCode(a.i64_store32(a.getLocal("r"),4*(t-c),a.getLocal(g))),e.addCode(a.setLocal(h,a.getLocal(f)),a.setLocal(p,a.i64_shr_u(a.getLocal(h),a.i64_const(32))))}e.addCode(a.i64_store32(a.getLocal("r"),4*c-4,a.getLocal(h))),e.addCode(a.if(a.i32_wrap_i64(a.getLocal(p)),a.drop(a.call(s+"_sub",a.getLocal("r"),a.i32_const(d),a.getLocal("r"))),a.if(a.call(s+"_gte",a.getLocal("r"),a.i32_const(d)),a.drop(a.call(s+"_sub",a.getLocal("r"),a.i32_const(d),a.getLocal("r"))))))}(),function(){const e=t.addFunction(r+"_squareOld");e.addParam("x","i32"),e.addParam("r","i32");const a=e.getCodeBuilder();e.addCode(a.call(r+"_mul",a.getLocal("x"),a.getLocal("x"),a.getLocal("r")))}(),function(){const e=t.addFunction(r+"_toMontgomery");e.addParam("x","i32"),e.addParam("r","i32");const a=e.getCodeBuilder();e.addCode(a.call(r+"_mul",a.getLocal("x"),a.i32_const(_),a.getLocal("r")))}(),function(){const e=t.alloc(2*l),a=t.addFunction(r+"_fromMontgomery");a.addParam("x","i32"),a.addParam("r","i32");const o=a.getCodeBuilder();a.addCode(o.call(s+"_copy",o.getLocal("x"),o.i32_const(e))),a.addCode(o.call(s+"_zero",o.i32_const(e+l))),a.addCode(o.call(r+"_mReduct",o.i32_const(e),o.getLocal("r")))}(),function(){const e=t.addFunction(r+"_isNegative");e.addParam("x","i32"),e.setReturnType("i32");const a=e.getCodeBuilder(),o=a.i32_const(t.alloc(l));e.addCode(a.call(r+"_fromMontgomery",a.getLocal("x"),o),a.call(s+"_gte",o,a.i32_const(m)))}(),function(){const e=t.addFunction(r+"_sign");e.addParam("x","i32"),e.setReturnType("i32");const a=e.getCodeBuilder(),o=a.i32_const(t.alloc(l));e.addCode(a.if(a.call(s+"_isZero",a.getLocal("x")),a.ret(a.i32_const(0))),a.call(r+"_fromMontgomery",a.getLocal("x"),o),a.if(a.call(s+"_gte",o,a.i32_const(m)),a.ret(a.i32_const(-1))),a.ret(a.i32_const(1)))}(),function(){const e=t.addFunction(r+"_inverse");e.addParam("x","i32"),e.addParam("r","i32");const a=e.getCodeBuilder();e.addCode(a.call(r+"_fromMontgomery",a.getLocal("x"),a.getLocal("r"))),e.addCode(a.call(s+"_inverseMod",a.getLocal("r"),a.i32_const(d),a.getLocal("r"))),e.addCode(a.call(r+"_toMontgomery",a.getLocal("r"),a.getLocal("r")))}(),function(){const e=t.addFunction(r+"_one");e.addParam("pr","i32");const a=e.getCodeBuilder();e.addCode(a.call(s+"_copy",a.i32_const(u),a.getLocal("pr")))}(),function(){const e=t.addFunction(r+"_load");e.addParam("scalar","i32"),e.addParam("scalarLen","i32"),e.addParam("r","i32"),e.addLocal("p","i32"),e.addLocal("l","i32"),e.addLocal("i","i32"),e.addLocal("j","i32");const a=e.getCodeBuilder(),o=a.i32_const(t.alloc(l)),i=t.alloc(l),n=a.i32_const(i);e.addCode(a.call(s+"_zero",a.getLocal("r")),a.setLocal("i",a.i32_const(l)),a.setLocal("p",a.getLocal("scalar")),a.block(a.loop(a.br_if(1,a.i32_gt_u(a.getLocal("i"),a.getLocal("scalarLen"))),a.if(a.i32_eq(a.getLocal("i"),a.i32_const(l)),a.call(r+"_one",o),a.call(r+"_mul",o,a.i32_const(_),o)),a.call(r+"_mul",a.getLocal("p"),o,n),a.call(r+"_add",a.getLocal("r"),n,a.getLocal("r")),a.setLocal("p",a.i32_add(a.getLocal("p"),a.i32_const(l))),a.setLocal("i",a.i32_add(a.getLocal("i"),a.i32_const(l))),a.br(0))),a.setLocal("l",a.i32_rem_u(a.getLocal("scalarLen"),a.i32_const(l))),a.if(a.i32_eqz(a.getLocal("l")),a.ret([])),a.call(s+"_zero",n),a.setLocal("j",a.i32_const(0)),a.block(a.loop(a.br_if(1,a.i32_eq(a.getLocal("j"),a.getLocal("l"))),a.i32_store8(a.getLocal("j"),i,a.i32_load8_u(a.getLocal("p"))),a.setLocal("p",a.i32_add(a.getLocal("p"),a.i32_const(1))),a.setLocal("j",a.i32_add(a.getLocal("j"),a.i32_const(1))),a.br(0))),a.if(a.i32_eq(a.getLocal("i"),a.i32_const(l)),a.call(r+"_one",o),a.call(r+"_mul",o,a.i32_const(_),o)),a.call(r+"_mul",n,o,n),a.call(r+"_add",a.getLocal("r"),n,a.getLocal("r")))}(),function(){const e=t.addFunction(r+"_timesScalar");e.addParam("x","i32"),e.addParam("scalar","i32"),e.addParam("scalarLen","i32"),e.addParam("r","i32");const a=e.getCodeBuilder(),o=a.i32_const(t.alloc(l));e.addCode(a.call(r+"_load",a.getLocal("scalar"),a.getLocal("scalarLen"),o),a.call(r+"_toMontgomery",o,o),a.call(r+"_mul",a.getLocal("x"),o,a.getLocal("r")))}(),mt(t,r),At(t,r+"_batchToMontgomery",r+"_toMontgomery",l,l),At(t,r+"_batchFromMontgomery",r+"_fromMontgomery",l,l),At(t,r+"_batchNeg",r+"_neg",l,l),It(t,r+"_batchAdd",r+"_add",l,l),It(t,r+"_batchSub",r+"_sub",l,l),It(t,r+"_batchMul",r+"_mul",l,l),t.exportFunction(r+"_add"),t.exportFunction(r+"_sub"),t.exportFunction(r+"_neg"),t.exportFunction(r+"_isNegative"),t.exportFunction(r+"_isOne"),t.exportFunction(r+"_sign"),t.exportFunction(r+"_mReduct"),t.exportFunction(r+"_mul"),t.exportFunction(r+"_square"),t.exportFunction(r+"_squareOld"),t.exportFunction(r+"_fromMontgomery"),t.exportFunction(r+"_toMontgomery"),t.exportFunction(r+"_inverse"),t.exportFunction(r+"_one"),t.exportFunction(r+"_load"),t.exportFunction(r+"_timesScalar"),Lt(t,r+"_exp",l,r+"_mul",r+"_square",s+"_copy",r+"_one"),t.exportFunction(r+"_exp"),t.exportFunction(r+"_batchInverse"),wt(i)&&(!function(){const e=t.addFunction(r+"_sqrt");e.addParam("n","i32"),e.addParam("r","i32"),e.addLocal("m","i32"),e.addLocal("i","i32"),e.addLocal("j","i32");const a=e.getCodeBuilder(),o=a.i32_const(u),i=a.i32_const(t.alloc(l)),n=a.i32_const(t.alloc(l)),c=a.i32_const(t.alloc(l)),s=a.i32_const(t.alloc(l)),d=a.i32_const(t.alloc(l));e.addCode(a.if(a.call(r+"_isZero",a.getLocal("n")),a.ret(a.call(r+"_zero",a.getLocal("r")))),a.setLocal("m",a.i32_const(I)),a.call(r+"_copy",a.i32_const(w),i),a.call(r+"_exp",a.getLocal("n"),a.i32_const(y),a.i32_const(l),n),a.call(r+"_exp",a.getLocal("n"),a.i32_const(x),a.i32_const(l),c),a.block(a.loop(a.br_if(1,a.call(r+"_eq",n,o)),a.call(r+"_square",n,s),a.setLocal("i",a.i32_const(1)),a.block(a.loop(a.br_if(1,a.call(r+"_eq",s,o)),a.call(r+"_square",s,s),a.setLocal("i",a.i32_add(a.getLocal("i"),a.i32_const(1))),a.br(0))),a.call(r+"_copy",i,d),a.setLocal("j",a.i32_sub(a.i32_sub(a.getLocal("m"),a.getLocal("i")),a.i32_const(1))),a.block(a.loop(a.br_if(1,a.i32_eqz(a.getLocal("j"))),a.call(r+"_square",d,d),a.setLocal("j",a.i32_sub(a.getLocal("j"),a.i32_const(1))),a.br(0))),a.setLocal("m",a.getLocal("i")),a.call(r+"_square",d,i),a.call(r+"_mul",n,i,n),a.call(r+"_mul",c,d,c),a.br(0))),a.if(a.call(r+"_isNegative",c),a.call(r+"_neg",c,a.getLocal("r")),a.call(r+"_copy",c,a.getLocal("r"))))}(),function(){const e=t.addFunction(r+"_isSquare");e.addParam("n","i32"),e.setReturnType("i32");const a=e.getCodeBuilder(),o=a.i32_const(u),i=a.i32_const(t.alloc(l));e.addCode(a.if(a.call(r+"_isZero",a.getLocal("n")),a.ret(a.i32_const(1))),a.call(r+"_exp",a.getLocal("n"),a.i32_const(p),a.i32_const(l),i),a.call(r+"_eq",i,o))}(),t.exportFunction(r+"_sqrt"),t.exportFunction(r+"_isSquare")),t.exportFunction(r+"_batchToMontgomery"),t.exportFunction(r+"_batchFromMontgomery"),r};const Et=Ft,{bitLength:St}=et;var vt=function(t,e,a,o,i){const n=BigInt(e),c=Math.floor((St(n-1n)-1)/64)+1,l=8*c,r=a||"f1";if(t.modules[r])return r;t.modules[r]={n64:c};const s=i||"int",d=Et(t,n,o,s),_=t.modules[d].pR2,u=t.modules[d].pq,g=t.modules[d].pePlusOne;return function(){const e=t.alloc(l),a=t.addFunction(r+"_mul");a.addParam("x","i32"),a.addParam("y","i32"),a.addParam("r","i32");const o=a.getCodeBuilder();a.addCode(o.call(d+"_mul",o.getLocal("x"),o.getLocal("y"),o.i32_const(e))),a.addCode(o.call(d+"_mul",o.i32_const(e),o.i32_const(_),o.getLocal("r")))}(),function(){const e=t.addFunction(r+"_square");e.addParam("x","i32"),e.addParam("r","i32");const a=e.getCodeBuilder();e.addCode(a.call(r+"_mul",a.getLocal("x"),a.getLocal("x"),a.getLocal("r")))}(),function(){const e=t.addFunction(r+"_inverse");e.addParam("x","i32"),e.addParam("r","i32");const a=e.getCodeBuilder();e.addCode(a.call(s+"_inverseMod",a.getLocal("x"),a.i32_const(u),a.getLocal("r")))}(),function(){const e=t.addFunction(r+"_isNegative");e.addParam("x","i32"),e.setReturnType("i32");const a=e.getCodeBuilder();e.addCode(a.call(s+"_gte",a.getLocal("x"),a.i32_const(g)))}(),t.exportFunction(d+"_add",r+"_add"),t.exportFunction(d+"_sub",r+"_sub"),t.exportFunction(d+"_neg",r+"_neg"),t.exportFunction(r+"_mul"),t.exportFunction(r+"_square"),t.exportFunction(r+"_inverse"),t.exportFunction(r+"_isNegative"),t.exportFunction(d+"_copy",r+"_copy"),t.exportFunction(d+"_zero",r+"_zero"),t.exportFunction(d+"_one",r+"_one"),t.exportFunction(d+"_isZero",r+"_isZero"),t.exportFunction(d+"_eq",r+"_eq"),r};const Pt=Z,Ot=X,Qt=W;var qt=function(t,e,a,o){if(t.modules[a])return a;const i=8*t.modules[o].n64,n=t.modules[o].q;return t.modules[a]={n64:2*t.modules[o].n64},function(){const e=t.addFunction(a+"_isZero");e.addParam("x","i32"),e.setReturnType("i32");const n=e.getCodeBuilder(),c=n.getLocal("x"),l=n.i32_add(n.getLocal("x"),n.i32_const(i));e.addCode(n.i32_and(n.call(o+"_isZero",c),n.call(o+"_isZero",l)))}(),function(){const e=t.addFunction(a+"_isOne");e.addParam("x","i32"),e.setReturnType("i32");const n=e.getCodeBuilder(),c=n.getLocal("x"),l=n.i32_add(n.getLocal("x"),n.i32_const(i));e.addCode(n.ret(n.i32_and(n.call(o+"_isOne",c),n.call(o+"_isZero",l))))}(),function(){const e=t.addFunction(a+"_zero");e.addParam("x","i32");const n=e.getCodeBuilder(),c=n.getLocal("x"),l=n.i32_add(n.getLocal("x"),n.i32_const(i));e.addCode(n.call(o+"_zero",c),n.call(o+"_zero",l))}(),function(){const e=t.addFunction(a+"_one");e.addParam("x","i32");const n=e.getCodeBuilder(),c=n.getLocal("x"),l=n.i32_add(n.getLocal("x"),n.i32_const(i));e.addCode(n.call(o+"_one",c),n.call(o+"_zero",l))}(),function(){const e=t.addFunction(a+"_copy");e.addParam("x","i32"),e.addParam("r","i32");const n=e.getCodeBuilder(),c=n.getLocal("x"),l=n.i32_add(n.getLocal("x"),n.i32_const(i)),r=n.getLocal("r"),s=n.i32_add(n.getLocal("r"),n.i32_const(i));e.addCode(n.call(o+"_copy",c,r),n.call(o+"_copy",l,s))}(),function(){const n=t.addFunction(a+"_mul");n.addParam("x","i32"),n.addParam("y","i32"),n.addParam("r","i32");const c=n.getCodeBuilder(),l=c.getLocal("x"),r=c.i32_add(c.getLocal("x"),c.i32_const(i)),s=c.getLocal("y"),d=c.i32_add(c.getLocal("y"),c.i32_const(i)),_=c.getLocal("r"),u=c.i32_add(c.getLocal("r"),c.i32_const(i)),g=c.i32_const(t.alloc(i)),f=c.i32_const(t.alloc(i)),h=c.i32_const(t.alloc(i)),p=c.i32_const(t.alloc(i));n.addCode(c.call(o+"_mul",l,s,g),c.call(o+"_mul",r,d,f),c.call(o+"_add",l,r,h),c.call(o+"_add",s,d,p),c.call(o+"_mul",h,p,h),c.call(e,f,_),c.call(o+"_add",g,_,_),c.call(o+"_add",g,f,u),c.call(o+"_sub",h,u,u))}(),function(){const e=t.addFunction(a+"_mul1");e.addParam("x","i32"),e.addParam("y","i32"),e.addParam("r","i32");const n=e.getCodeBuilder(),c=n.getLocal("x"),l=n.i32_add(n.getLocal("x"),n.i32_const(i)),r=n.getLocal("y"),s=n.getLocal("r"),d=n.i32_add(n.getLocal("r"),n.i32_const(i));e.addCode(n.call(o+"_mul",c,r,s),n.call(o+"_mul",l,r,d))}(),function(){const n=t.addFunction(a+"_square");n.addParam("x","i32"),n.addParam("r","i32");const c=n.getCodeBuilder(),l=c.getLocal("x"),r=c.i32_add(c.getLocal("x"),c.i32_const(i)),s=c.getLocal("r"),d=c.i32_add(c.getLocal("r"),c.i32_const(i)),_=c.i32_const(t.alloc(i)),u=c.i32_const(t.alloc(i)),g=c.i32_const(t.alloc(i)),f=c.i32_const(t.alloc(i));n.addCode(c.call(o+"_mul",l,r,_),c.call(o+"_add",l,r,u),c.call(e,r,g),c.call(o+"_add",l,g,g),c.call(e,_,f),c.call(o+"_add",f,_,f),c.call(o+"_mul",u,g,s),c.call(o+"_sub",s,f,s),c.call(o+"_add",_,_,d))}(),function(){const e=t.addFunction(a+"_add");e.addParam("x","i32"),e.addParam("y","i32"),e.addParam("r","i32");const n=e.getCodeBuilder(),c=n.getLocal("x"),l=n.i32_add(n.getLocal("x"),n.i32_const(i)),r=n.getLocal("y"),s=n.i32_add(n.getLocal("y"),n.i32_const(i)),d=n.getLocal("r"),_=n.i32_add(n.getLocal("r"),n.i32_const(i));e.addCode(n.call(o+"_add",c,r,d),n.call(o+"_add",l,s,_))}(),function(){const e=t.addFunction(a+"_sub");e.addParam("x","i32"),e.addParam("y","i32"),e.addParam("r","i32");const n=e.getCodeBuilder(),c=n.getLocal("x"),l=n.i32_add(n.getLocal("x"),n.i32_const(i)),r=n.getLocal("y"),s=n.i32_add(n.getLocal("y"),n.i32_const(i)),d=n.getLocal("r"),_=n.i32_add(n.getLocal("r"),n.i32_const(i));e.addCode(n.call(o+"_sub",c,r,d),n.call(o+"_sub",l,s,_))}(),function(){const e=t.addFunction(a+"_neg");e.addParam("x","i32"),e.addParam("r","i32");const n=e.getCodeBuilder(),c=n.getLocal("x"),l=n.i32_add(n.getLocal("x"),n.i32_const(i)),r=n.getLocal("r"),s=n.i32_add(n.getLocal("r"),n.i32_const(i));e.addCode(n.call(o+"_neg",c,r),n.call(o+"_neg",l,s))}(),function(){const e=t.addFunction(a+"_conjugate");e.addParam("x","i32"),e.addParam("r","i32");const n=e.getCodeBuilder(),c=n.getLocal("x"),l=n.i32_add(n.getLocal("x"),n.i32_const(i)),r=n.getLocal("r"),s=n.i32_add(n.getLocal("r"),n.i32_const(i));e.addCode(n.call(o+"_copy",c,r),n.call(o+"_neg",l,s))}(),function(){const e=t.addFunction(a+"_toMontgomery");e.addParam("x","i32"),e.addParam("r","i32");const n=e.getCodeBuilder(),c=n.getLocal("x"),l=n.i32_add(n.getLocal("x"),n.i32_const(i)),r=n.getLocal("r"),s=n.i32_add(n.getLocal("r"),n.i32_const(i));e.addCode(n.call(o+"_toMontgomery",c,r),n.call(o+"_toMontgomery",l,s))}(),function(){const e=t.addFunction(a+"_fromMontgomery");e.addParam("x","i32"),e.addParam("r","i32");const n=e.getCodeBuilder(),c=n.getLocal("x"),l=n.i32_add(n.getLocal("x"),n.i32_const(i)),r=n.getLocal("r"),s=n.i32_add(n.getLocal("r"),n.i32_const(i));e.addCode(n.call(o+"_fromMontgomery",c,r),n.call(o+"_fromMontgomery",l,s))}(),function(){const e=t.addFunction(a+"_eq");e.addParam("x","i32"),e.addParam("y","i32"),e.setReturnType("i32");const n=e.getCodeBuilder(),c=n.getLocal("x"),l=n.i32_add(n.getLocal("x"),n.i32_const(i)),r=n.getLocal("y"),s=n.i32_add(n.getLocal("y"),n.i32_const(i));e.addCode(n.i32_and(n.call(o+"_eq",c,r),n.call(o+"_eq",l,s)))}(),function(){const n=t.addFunction(a+"_inverse");n.addParam("x","i32"),n.addParam("r","i32");const c=n.getCodeBuilder(),l=c.getLocal("x"),r=c.i32_add(c.getLocal("x"),c.i32_const(i)),s=c.getLocal("r"),d=c.i32_add(c.getLocal("r"),c.i32_const(i)),_=c.i32_const(t.alloc(i)),u=c.i32_const(t.alloc(i)),g=c.i32_const(t.alloc(i)),f=c.i32_const(t.alloc(i));n.addCode(c.call(o+"_square",l,_),c.call(o+"_square",r,u),c.call(e,u,g),c.call(o+"_sub",_,g,g),c.call(o+"_inverse",g,f),c.call(o+"_mul",l,f,s),c.call(o+"_mul",r,f,d),c.call(o+"_neg",d,d))}(),function(){const e=t.addFunction(a+"_timesScalar");e.addParam("x","i32"),e.addParam("scalar","i32"),e.addParam("scalarLen","i32"),e.addParam("r","i32");const n=e.getCodeBuilder(),c=n.getLocal("x"),l=n.i32_add(n.getLocal("x"),n.i32_const(i)),r=n.getLocal("r"),s=n.i32_add(n.getLocal("r"),n.i32_const(i));e.addCode(n.call(o+"_timesScalar",c,n.getLocal("scalar"),n.getLocal("scalarLen"),r),n.call(o+"_timesScalar",l,n.getLocal("scalar"),n.getLocal("scalarLen"),s))}(),function(){const e=t.addFunction(a+"_sign");e.addParam("x","i32"),e.addLocal("s","i32"),e.setReturnType("i32");const n=e.getCodeBuilder(),c=n.getLocal("x"),l=n.i32_add(n.getLocal("x"),n.i32_const(i));e.addCode(n.setLocal("s",n.call(o+"_sign",l)),n.if(n.getLocal("s"),n.ret(n.getLocal("s"))),n.ret(n.call(o+"_sign",c)))}(),function(){const e=t.addFunction(a+"_isNegative");e.addParam("x","i32"),e.setReturnType("i32");const n=e.getCodeBuilder(),c=n.getLocal("x"),l=n.i32_add(n.getLocal("x"),n.i32_const(i));e.addCode(n.if(n.call(o+"_isZero",l),n.ret(n.call(o+"_isNegative",c))),n.ret(n.call(o+"_isNegative",l)))}(),t.exportFunction(a+"_isZero"),t.exportFunction(a+"_isOne"),t.exportFunction(a+"_zero"),t.exportFunction(a+"_one"),t.exportFunction(a+"_copy"),t.exportFunction(a+"_mul"),t.exportFunction(a+"_mul1"),t.exportFunction(a+"_square"),t.exportFunction(a+"_add"),t.exportFunction(a+"_sub"),t.exportFunction(a+"_neg"),t.exportFunction(a+"_sign"),t.exportFunction(a+"_conjugate"),t.exportFunction(a+"_fromMontgomery"),t.exportFunction(a+"_toMontgomery"),t.exportFunction(a+"_eq"),t.exportFunction(a+"_inverse"),Ot(t,a),Pt(t,a+"_exp",2*i,a+"_mul",a+"_square",a+"_copy",a+"_one"),function(){const e=t.addFunction(a+"_sqrt");e.addParam("a","i32"),e.addParam("pr","i32");const c=e.getCodeBuilder(),l=c.i32_const(t.alloc(Qt.bigInt2BytesLE((BigInt(n||0)-3n)/4n,i))),r=c.i32_const(t.alloc(Qt.bigInt2BytesLE((BigInt(n||0)-1n)/2n,i))),s=c.getLocal("a"),d=c.i32_const(t.alloc(2*i)),_=c.i32_const(t.alloc(2*i)),u=c.i32_const(t.alloc(2*i)),g=t.alloc(2*i),f=c.i32_const(g),h=c.i32_const(g),p=c.i32_const(g+i),L=c.i32_const(t.alloc(2*i)),m=c.i32_const(t.alloc(2*i));e.addCode(c.call(a+"_one",f),c.call(a+"_neg",f,f),c.call(a+"_exp",s,l,c.i32_const(i),d),c.call(a+"_square",d,_),c.call(a+"_mul",s,_,_),c.call(a+"_conjugate",_,u),c.call(a+"_mul",u,_,u),c.if(c.call(a+"_eq",u,f),c.unreachable()),c.call(a+"_mul",d,s,L),c.if(c.call(a+"_eq",_,f),[...c.call(o+"_zero",h),...c.call(o+"_one",p),...c.call(a+"_mul",f,L,c.getLocal("pr"))],[...c.call(a+"_one",m),...c.call(a+"_add",m,_,m),...c.call(a+"_exp",m,r,c.i32_const(i),m),...c.call(a+"_mul",m,L,c.getLocal("pr"))]))}(),function(){const e=t.addFunction(a+"_isSquare");e.addParam("a","i32"),e.setReturnType("i32");const o=e.getCodeBuilder(),c=o.i32_const(t.alloc(Qt.bigInt2BytesLE((BigInt(n||0)-3n)/4n,i))),l=o.getLocal("a"),r=o.i32_const(t.alloc(2*i)),s=o.i32_const(t.alloc(2*i)),d=o.i32_const(t.alloc(2*i)),_=t.alloc(2*i),u=o.i32_const(_);e.addCode(o.call(a+"_one",u),o.call(a+"_neg",u,u),o.call(a+"_exp",l,c,o.i32_const(i),r),o.call(a+"_square",r,s),o.call(a+"_mul",l,s,s),o.call(a+"_conjugate",s,d),o.call(a+"_mul",d,s,d),o.if(o.call(a+"_eq",d,u),o.ret(o.i32_const(0))),o.ret(o.i32_const(1)))}(),t.exportFunction(a+"_exp"),t.exportFunction(a+"_timesScalar"),t.exportFunction(a+"_batchInverse"),t.exportFunction(a+"_sqrt"),t.exportFunction(a+"_isSquare"),t.exportFunction(a+"_isNegative"),a};const Ut=Z,Mt=X;var zt=function(t,e,a,o){if(t.modules[a])return a;const i=8*t.modules[o].n64;return t.modules[a]={n64:3*t.modules[o].n64},function(){const e=t.addFunction(a+"_isZero");e.addParam("x","i32"),e.setReturnType("i32");const n=e.getCodeBuilder(),c=n.getLocal("x"),l=n.i32_add(n.getLocal("x"),n.i32_const(i)),r=n.i32_add(n.getLocal("x"),n.i32_const(2*i));e.addCode(n.i32_and(n.i32_and(n.call(o+"_isZero",c),n.call(o+"_isZero",l)),n.call(o+"_isZero",r)))}(),function(){const e=t.addFunction(a+"_isOne");e.addParam("x","i32"),e.setReturnType("i32");const n=e.getCodeBuilder(),c=n.getLocal("x"),l=n.i32_add(n.getLocal("x"),n.i32_const(i)),r=n.i32_add(n.getLocal("x"),n.i32_const(2*i));e.addCode(n.ret(n.i32_and(n.i32_and(n.call(o+"_isOne",c),n.call(o+"_isZero",l)),n.call(o+"_isZero",r))))}(),function(){const e=t.addFunction(a+"_zero");e.addParam("x","i32");const n=e.getCodeBuilder(),c=n.getLocal("x"),l=n.i32_add(n.getLocal("x"),n.i32_const(i)),r=n.i32_add(n.getLocal("x"),n.i32_const(2*i));e.addCode(n.call(o+"_zero",c),n.call(o+"_zero",l),n.call(o+"_zero",r))}(),function(){const e=t.addFunction(a+"_one");e.addParam("x","i32");const n=e.getCodeBuilder(),c=n.getLocal("x"),l=n.i32_add(n.getLocal("x"),n.i32_const(i)),r=n.i32_add(n.getLocal("x"),n.i32_const(2*i));e.addCode(n.call(o+"_one",c),n.call(o+"_zero",l),n.call(o+"_zero",r))}(),function(){const e=t.addFunction(a+"_copy");e.addParam("x","i32"),e.addParam("r","i32");const n=e.getCodeBuilder(),c=n.getLocal("x"),l=n.i32_add(n.getLocal("x"),n.i32_const(i)),r=n.i32_add(n.getLocal("x"),n.i32_const(2*i)),s=n.getLocal("r"),d=n.i32_add(n.getLocal("r"),n.i32_const(i)),_=n.i32_add(n.getLocal("r"),n.i32_const(2*i));e.addCode(n.call(o+"_copy",c,s),n.call(o+"_copy",l,d),n.call(o+"_copy",r,_))}(),function(){const n=t.addFunction(a+"_mul");n.addParam("x","i32"),n.addParam("y","i32"),n.addParam("r","i32");const c=n.getCodeBuilder(),l=c.getLocal("x"),r=c.i32_add(c.getLocal("x"),c.i32_const(i)),s=c.i32_add(c.getLocal("x"),c.i32_const(2*i)),d=c.getLocal("y"),_=c.i32_add(c.getLocal("y"),c.i32_const(i)),u=c.i32_add(c.getLocal("y"),c.i32_const(2*i)),g=c.getLocal("r"),f=c.i32_add(c.getLocal("r"),c.i32_const(i)),h=c.i32_add(c.getLocal("r"),c.i32_const(2*i)),p=c.i32_const(t.alloc(i)),L=c.i32_const(t.alloc(i)),m=c.i32_const(t.alloc(i)),A=c.i32_const(t.alloc(i)),I=c.i32_const(t.alloc(i)),b=c.i32_const(t.alloc(i)),y=c.i32_const(t.alloc(i)),C=c.i32_const(t.alloc(i)),w=c.i32_const(t.alloc(i)),B=c.i32_const(t.alloc(i)),x=c.i32_const(t.alloc(i)),F=c.i32_const(t.alloc(i)),E=c.i32_const(t.alloc(i));n.addCode(c.call(o+"_mul",l,d,p),c.call(o+"_mul",r,_,L),c.call(o+"_mul",s,u,m),c.call(o+"_add",l,r,A),c.call(o+"_add",d,_,I),c.call(o+"_add",l,s,b),c.call(o+"_add",d,u,y),c.call(o+"_add",r,s,C),c.call(o+"_add",_,u,w),c.call(o+"_add",p,L,B),c.call(o+"_add",p,m,x),c.call(o+"_add",L,m,F),c.call(o+"_mul",C,w,g),c.call(o+"_sub",g,F,g),c.call(e,g,g),c.call(o+"_add",p,g,g),c.call(o+"_mul",A,I,f),c.call(o+"_sub",f,B,f),c.call(e,m,E),c.call(o+"_add",f,E,f),c.call(o+"_mul",b,y,h),c.call(o+"_sub",h,x,h),c.call(o+"_add",h,L,h))}(),function(){const n=t.addFunction(a+"_square");n.addParam("x","i32"),n.addParam("r","i32");const c=n.getCodeBuilder(),l=c.getLocal("x"),r=c.i32_add(c.getLocal("x"),c.i32_const(i)),s=c.i32_add(c.getLocal("x"),c.i32_const(2*i)),d=c.getLocal("r"),_=c.i32_add(c.getLocal("r"),c.i32_const(i)),u=c.i32_add(c.getLocal("r"),c.i32_const(2*i)),g=c.i32_const(t.alloc(i)),f=c.i32_const(t.alloc(i)),h=c.i32_const(t.alloc(i)),p=c.i32_const(t.alloc(i)),L=c.i32_const(t.alloc(i)),m=c.i32_const(t.alloc(i)),A=c.i32_const(t.alloc(i));n.addCode(c.call(o+"_square",l,g),c.call(o+"_mul",l,r,f),c.call(o+"_add",f,f,h),c.call(o+"_sub",l,r,p),c.call(o+"_add",p,s,p),c.call(o+"_square",p,p),c.call(o+"_mul",r,s,L),c.call(o+"_add",L,L,m),c.call(o+"_square",s,A),c.call(e,m,d),c.call(o+"_add",g,d,d),c.call(e,A,_),c.call(o+"_add",h,_,_),c.call(o+"_add",g,A,u),c.call(o+"_sub",m,u,u),c.call(o+"_add",p,u,u),c.call(o+"_add",h,u,u))}(),function(){const e=t.addFunction(a+"_add");e.addParam("x","i32"),e.addParam("y","i32"),e.addParam("r","i32");const n=e.getCodeBuilder(),c=n.getLocal("x"),l=n.i32_add(n.getLocal("x"),n.i32_const(i)),r=n.i32_add(n.getLocal("x"),n.i32_const(2*i)),s=n.getLocal("y"),d=n.i32_add(n.getLocal("y"),n.i32_const(i)),_=n.i32_add(n.getLocal("y"),n.i32_const(2*i)),u=n.getLocal("r"),g=n.i32_add(n.getLocal("r"),n.i32_const(i)),f=n.i32_add(n.getLocal("r"),n.i32_const(2*i));e.addCode(n.call(o+"_add",c,s,u),n.call(o+"_add",l,d,g),n.call(o+"_add",r,_,f))}(),function(){const e=t.addFunction(a+"_sub");e.addParam("x","i32"),e.addParam("y","i32"),e.addParam("r","i32");const n=e.getCodeBuilder(),c=n.getLocal("x"),l=n.i32_add(n.getLocal("x"),n.i32_const(i)),r=n.i32_add(n.getLocal("x"),n.i32_const(2*i)),s=n.getLocal("y"),d=n.i32_add(n.getLocal("y"),n.i32_const(i)),_=n.i32_add(n.getLocal("y"),n.i32_const(2*i)),u=n.getLocal("r"),g=n.i32_add(n.getLocal("r"),n.i32_const(i)),f=n.i32_add(n.getLocal("r"),n.i32_const(2*i));e.addCode(n.call(o+"_sub",c,s,u),n.call(o+"_sub",l,d,g),n.call(o+"_sub",r,_,f))}(),function(){const e=t.addFunction(a+"_neg");e.addParam("x","i32"),e.addParam("r","i32");const n=e.getCodeBuilder(),c=n.getLocal("x"),l=n.i32_add(n.getLocal("x"),n.i32_const(i)),r=n.i32_add(n.getLocal("x"),n.i32_const(2*i)),s=n.getLocal("r"),d=n.i32_add(n.getLocal("r"),n.i32_const(i)),_=n.i32_add(n.getLocal("r"),n.i32_const(2*i));e.addCode(n.call(o+"_neg",c,s),n.call(o+"_neg",l,d),n.call(o+"_neg",r,_))}(),function(){const e=t.addFunction(a+"_sign");e.addParam("x","i32"),e.addLocal("s","i32"),e.setReturnType("i32");const n=e.getCodeBuilder(),c=n.getLocal("x"),l=n.i32_add(n.getLocal("x"),n.i32_const(i)),r=n.i32_add(n.getLocal("x"),n.i32_const(2*i));e.addCode(n.setLocal("s",n.call(o+"_sign",r)),n.if(n.getLocal("s"),n.ret(n.getLocal("s"))),n.setLocal("s",n.call(o+"_sign",l)),n.if(n.getLocal("s"),n.ret(n.getLocal("s"))),n.ret(n.call(o+"_sign",c)))}(),function(){const e=t.addFunction(a+"_toMontgomery");e.addParam("x","i32"),e.addParam("r","i32");const n=e.getCodeBuilder(),c=n.getLocal("x"),l=n.i32_add(n.getLocal("x"),n.i32_const(i)),r=n.i32_add(n.getLocal("x"),n.i32_const(2*i)),s=n.getLocal("r"),d=n.i32_add(n.getLocal("r"),n.i32_const(i)),_=n.i32_add(n.getLocal("r"),n.i32_const(2*i));e.addCode(n.call(o+"_toMontgomery",c,s),n.call(o+"_toMontgomery",l,d),n.call(o+"_toMontgomery",r,_))}(),function(){const e=t.addFunction(a+"_fromMontgomery");e.addParam("x","i32"),e.addParam("r","i32");const n=e.getCodeBuilder(),c=n.getLocal("x"),l=n.i32_add(n.getLocal("x"),n.i32_const(i)),r=n.i32_add(n.getLocal("x"),n.i32_const(2*i)),s=n.getLocal("r"),d=n.i32_add(n.getLocal("r"),n.i32_const(i)),_=n.i32_add(n.getLocal("r"),n.i32_const(2*i));e.addCode(n.call(o+"_fromMontgomery",c,s),n.call(o+"_fromMontgomery",l,d),n.call(o+"_fromMontgomery",r,_))}(),function(){const e=t.addFunction(a+"_eq");e.addParam("x","i32"),e.addParam("y","i32"),e.setReturnType("i32");const n=e.getCodeBuilder(),c=n.getLocal("x"),l=n.i32_add(n.getLocal("x"),n.i32_const(i)),r=n.i32_add(n.getLocal("x"),n.i32_const(2*i)),s=n.getLocal("y"),d=n.i32_add(n.getLocal("y"),n.i32_const(i)),_=n.i32_add(n.getLocal("y"),n.i32_const(2*i));e.addCode(n.i32_and(n.i32_and(n.call(o+"_eq",c,s),n.call(o+"_eq",l,d)),n.call(o+"_eq",r,_)))}(),function(){const n=t.addFunction(a+"_inverse");n.addParam("x","i32"),n.addParam("r","i32");const c=n.getCodeBuilder(),l=c.getLocal("x"),r=c.i32_add(c.getLocal("x"),c.i32_const(i)),s=c.i32_add(c.getLocal("x"),c.i32_const(2*i)),d=c.getLocal("r"),_=c.i32_add(c.getLocal("r"),c.i32_const(i)),u=c.i32_add(c.getLocal("r"),c.i32_const(2*i)),g=c.i32_const(t.alloc(i)),f=c.i32_const(t.alloc(i)),h=c.i32_const(t.alloc(i)),p=c.i32_const(t.alloc(i)),L=c.i32_const(t.alloc(i)),m=c.i32_const(t.alloc(i)),A=c.i32_const(t.alloc(i)),I=c.i32_const(t.alloc(i)),b=c.i32_const(t.alloc(i)),y=c.i32_const(t.alloc(i)),C=c.i32_const(t.alloc(i));n.addCode(c.call(o+"_square",l,g),c.call(o+"_square",r,f),c.call(o+"_square",s,h),c.call(o+"_mul",l,r,p),c.call(o+"_mul",l,s,L),c.call(o+"_mul",r,s,m),c.call(e,m,A),c.call(o+"_sub",g,A,A),c.call(e,h,I),c.call(o+"_sub",I,p,I),c.call(o+"_sub",f,L,b),c.call(o+"_mul",s,I,y),c.call(o+"_mul",r,b,C),c.call(o+"_add",y,C,y),c.call(e,y,y),c.call(o+"_mul",l,A,C),c.call(o+"_add",C,y,y),c.call(o+"_inverse",y,y),c.call(o+"_mul",y,A,d),c.call(o+"_mul",y,I,_),c.call(o+"_mul",y,b,u))}(),function(){const e=t.addFunction(a+"_timesScalar");e.addParam("x","i32"),e.addParam("scalar","i32"),e.addParam("scalarLen","i32"),e.addParam("r","i32");const n=e.getCodeBuilder(),c=n.getLocal("x"),l=n.i32_add(n.getLocal("x"),n.i32_const(i)),r=n.i32_add(n.getLocal("x"),n.i32_const(2*i)),s=n.getLocal("r"),d=n.i32_add(n.getLocal("r"),n.i32_const(i)),_=n.i32_add(n.getLocal("r"),n.i32_const(2*i));e.addCode(n.call(o+"_timesScalar",c,n.getLocal("scalar"),n.getLocal("scalarLen"),s),n.call(o+"_timesScalar",l,n.getLocal("scalar"),n.getLocal("scalarLen"),d),n.call(o+"_timesScalar",r,n.getLocal("scalar"),n.getLocal("scalarLen"),_))}(),function(){const e=t.addFunction(a+"_isNegative");e.addParam("x","i32"),e.setReturnType("i32");const n=e.getCodeBuilder(),c=n.getLocal("x"),l=n.i32_add(n.getLocal("x"),n.i32_const(i)),r=n.i32_add(n.getLocal("x"),n.i32_const(2*i));e.addCode(n.if(n.call(o+"_isZero",r),n.if(n.call(o+"_isZero",l),n.ret(n.call(o+"_isNegative",c)),n.ret(n.call(o+"_isNegative",l)))),n.ret(n.call(o+"_isNegative",r)))}(),t.exportFunction(a+"_isZero"),t.exportFunction(a+"_isOne"),t.exportFunction(a+"_zero"),t.exportFunction(a+"_one"),t.exportFunction(a+"_copy"),t.exportFunction(a+"_mul"),t.exportFunction(a+"_square"),t.exportFunction(a+"_add"),t.exportFunction(a+"_sub"),t.exportFunction(a+"_neg"),t.exportFunction(a+"_sign"),t.exportFunction(a+"_fromMontgomery"),t.exportFunction(a+"_toMontgomery"),t.exportFunction(a+"_eq"),t.exportFunction(a+"_inverse"),Mt(t,a),Ut(t,a+"_exp",3*i,a+"_mul",a+"_square",a+"_copy",a+"_one"),t.exportFunction(a+"_exp"),t.exportFunction(a+"_timesScalar"),t.exportFunction(a+"_batchInverse"),t.exportFunction(a+"_isNegative"),a};const Dt=function(t,e,a,o,i,n,c,l){const r=t.addFunction(e);r.addParam("base","i32"),r.addParam("scalar","i32"),r.addParam("scalarLength","i32"),r.addParam("r","i32"),r.addLocal("old0","i32"),r.addLocal("nbits","i32"),r.addLocal("i","i32"),r.addLocal("last","i32"),r.addLocal("cur","i32"),r.addLocal("carry","i32"),r.addLocal("p","i32");const s=r.getCodeBuilder(),d=s.i32_const(t.alloc(a));function _(t){return s.i32_and(s.i32_shr_u(s.i32_load(s.i32_add(s.getLocal("scalar"),s.i32_and(s.i32_shr_u(t,s.i32_const(3)),s.i32_const(4294967292)))),s.i32_and(t,s.i32_const(31))),s.i32_const(1))}function u(t){return[...s.i32_store8(s.getLocal("p"),s.i32_const(t)),...s.setLocal("p",s.i32_add(s.getLocal("p"),s.i32_const(1)))]}r.addCode(s.if(s.i32_eqz(s.getLocal("scalarLength")),[...s.call(l,s.getLocal("r")),...s.ret([])]),s.setLocal("nbits",s.i32_shl(s.getLocal("scalarLength"),s.i32_const(3))),s.setLocal("old0",s.i32_load(s.i32_const(0))),s.setLocal("p",s.getLocal("old0")),s.i32_store(s.i32_const(0),s.i32_and(s.i32_add(s.i32_add(s.getLocal("old0"),s.i32_const(32)),s.getLocal("nbits")),s.i32_const(4294967288))),s.setLocal("i",s.i32_const(1)),s.setLocal("last",_(s.i32_const(0))),s.setLocal("carry",s.i32_const(0)),s.block(s.loop(s.br_if(1,s.i32_eq(s.getLocal("i"),s.getLocal("nbits"))),s.setLocal("cur",_(s.getLocal("i"))),s.if(s.getLocal("last"),s.if(s.getLocal("cur"),s.if(s.getLocal("carry"),[...s.setLocal("last",s.i32_const(0)),...s.setLocal("carry",s.i32_const(1)),...u(1)],[...s.setLocal("last",s.i32_const(0)),...s.setLocal("carry",s.i32_const(1)),...u(255)]),s.if(s.getLocal("carry"),[...s.setLocal("last",s.i32_const(0)),...s.setLocal("carry",s.i32_const(1)),...u(255)],[...s.setLocal("last",s.i32_const(0)),...s.setLocal("carry",s.i32_const(0)),...u(1)])),s.if(s.getLocal("cur"),s.if(s.getLocal("carry"),[...s.setLocal("last",s.i32_const(0)),...s.setLocal("carry",s.i32_const(1)),...u(0)],[...s.setLocal("last",s.i32_const(1)),...s.setLocal("carry",s.i32_const(0)),...u(0)]),s.if(s.getLocal("carry"),[...s.setLocal("last",s.i32_const(1)),...s.setLocal("carry",s.i32_const(0)),...u(0)],[...s.setLocal("last",s.i32_const(0)),...s.setLocal("carry",s.i32_const(0)),...u(0)]))),s.setLocal("i",s.i32_add(s.getLocal("i"),s.i32_const(1))),s.br(0))),s.if(s.getLocal("last"),s.if(s.getLocal("carry"),[...u(255),...u(0),...u(1)],[...u(1)]),s.if(s.getLocal("carry"),[...u(0),...u(1)])),s.setLocal("p",s.i32_sub(s.getLocal("p"),s.i32_const(1))),s.call(c,s.getLocal("base"),d),s.call(l,s.getLocal("r")),s.block(s.loop(s.call(i,s.getLocal("r"),s.getLocal("r")),s.setLocal("cur",s.i32_load8_u(s.getLocal("p"))),s.if(s.getLocal("cur"),s.if(s.i32_eq(s.getLocal("cur"),s.i32_const(1)),s.call(o,s.getLocal("r"),d,s.getLocal("r")),s.call(n,s.getLocal("r"),d,s.getLocal("r")))),s.br_if(1,s.i32_eq(s.getLocal("old0"),s.getLocal("p"))),s.setLocal("p",s.i32_sub(s.getLocal("p"),s.i32_const(1))),s.br(0))),s.i32_store(s.i32_const(0),s.getLocal("old0")))},Gt=$,kt=function(t,e,a,o,i){const n=8*t.modules[e].n64;function c(){const o=t.addFunction(a);o.addParam("pBases","i32"),o.addParam("pScalars","i32"),o.addParam("scalarSize","i32"),o.addParam("n","i32"),o.addParam("pr","i32"),o.addLocal("chunkSize","i32"),o.addLocal("nChunks","i32"),o.addLocal("itScalar","i32"),o.addLocal("endScalar","i32"),o.addLocal("itBase","i32"),o.addLocal("itBit","i32"),o.addLocal("i","i32"),o.addLocal("j","i32"),o.addLocal("nTable","i32"),o.addLocal("pTable","i32"),o.addLocal("idx","i32"),o.addLocal("pIdxTable","i32");const i=o.getCodeBuilder(),c=i.i32_const(t.alloc(n)),l=t.alloc([17,17,17,17,17,17,17,17,17,17,16,16,15,14,13,13,12,11,10,9,8,7,7,6,5,4,3,2,1,1,1,1]);o.addCode(i.call(e+"_zero",i.getLocal("pr")),i.if(i.i32_eqz(i.getLocal("n")),i.ret([])),i.setLocal("chunkSize",i.i32_load8_u(i.i32_clz(i.getLocal("n")),l)),i.setLocal("nChunks",i.i32_add(i.i32_div_u(i.i32_sub(i.i32_shl(i.getLocal("scalarSize"),i.i32_const(3)),i.i32_const(1)),i.getLocal("chunkSize")),i.i32_const(1))),i.setLocal("itBit",i.i32_mul(i.i32_sub(i.getLocal("nChunks"),i.i32_const(1)),i.getLocal("chunkSize"))),i.block(i.loop(i.br_if(1,i.i32_lt_s(i.getLocal("itBit"),i.i32_const(0))),i.if(i.i32_eqz(i.call(e+"_isZero",i.getLocal("pr"))),[...i.setLocal("j",i.i32_const(0)),...i.block(i.loop(i.br_if(1,i.i32_eq(i.getLocal("j"),i.getLocal("chunkSize"))),i.call(e+"_double",i.getLocal("pr"),i.getLocal("pr")),i.setLocal("j",i.i32_add(i.getLocal("j"),i.i32_const(1))),i.br(0)))]),i.call(a+"_chunk",i.getLocal("pBases"),i.getLocal("pScalars"),i.getLocal("scalarSize"),i.getLocal("n"),i.getLocal("itBit"),i.getLocal("chunkSize"),c),i.call(e+"_add",i.getLocal("pr"),c,i.getLocal("pr")),i.setLocal("itBit",i.i32_sub(i.getLocal("itBit"),i.getLocal("chunkSize"))),i.br(0))))}!function(){const e=t.addFunction(a+"_getChunk");e.addParam("pScalar","i32"),e.addParam("scalarSize","i32"),e.addParam("startBit","i32"),e.addParam("chunkSize","i32"),e.addLocal("bitsToEnd","i32"),e.addLocal("mask","i32"),e.setReturnType("i32");const o=e.getCodeBuilder();e.addCode(o.setLocal("bitsToEnd",o.i32_sub(o.i32_mul(o.getLocal("scalarSize"),o.i32_const(8)),o.getLocal("startBit"))),o.if(o.i32_gt_s(o.getLocal("chunkSize"),o.getLocal("bitsToEnd")),o.setLocal("mask",o.i32_sub(o.i32_shl(o.i32_const(1),o.getLocal("bitsToEnd")),o.i32_const(1))),o.setLocal("mask",o.i32_sub(o.i32_shl(o.i32_const(1),o.getLocal("chunkSize")),o.i32_const(1)))),o.i32_and(o.i32_shr_u(o.i32_load(o.i32_add(o.getLocal("pScalar"),o.i32_shr_u(o.getLocal("startBit"),o.i32_const(3))),0,0),o.i32_and(o.getLocal("startBit"),o.i32_const(7))),o.getLocal("mask")))}(),function(){const o=t.addFunction(a+"_reduceTable");o.addParam("pTable","i32"),o.addParam("p","i32"),o.addLocal("half","i32"),o.addLocal("it1","i32"),o.addLocal("it2","i32"),o.addLocal("pAcc","i32");const i=o.getCodeBuilder();o.addCode(i.if(i.i32_eq(i.getLocal("p"),i.i32_const(1)),i.ret([])),i.setLocal("half",i.i32_shl(i.i32_const(1),i.i32_sub(i.getLocal("p"),i.i32_const(1)))),i.setLocal("it1",i.getLocal("pTable")),i.setLocal("it2",i.i32_add(i.getLocal("pTable"),i.i32_mul(i.getLocal("half"),i.i32_const(n)))),i.setLocal("pAcc",i.i32_sub(i.getLocal("it2"),i.i32_const(n))),i.block(i.loop(i.br_if(1,i.i32_eq(i.getLocal("it1"),i.getLocal("pAcc"))),i.call(e+"_add",i.getLocal("it1"),i.getLocal("it2"),i.getLocal("it1")),i.call(e+"_add",i.getLocal("pAcc"),i.getLocal("it2"),i.getLocal("pAcc")),i.setLocal("it1",i.i32_add(i.getLocal("it1"),i.i32_const(n))),i.setLocal("it2",i.i32_add(i.getLocal("it2"),i.i32_const(n))),i.br(0))),i.call(a+"_reduceTable",i.getLocal("pTable"),i.i32_sub(i.getLocal("p"),i.i32_const(1))),i.setLocal("p",i.i32_sub(i.getLocal("p"),i.i32_const(1))),i.block(i.loop(i.br_if(1,i.i32_eqz(i.getLocal("p"))),i.call(e+"_double",i.getLocal("pAcc"),i.getLocal("pAcc")),i.setLocal("p",i.i32_sub(i.getLocal("p"),i.i32_const(1))),i.br(0))),i.call(e+"_add",i.getLocal("pTable"),i.getLocal("pAcc"),i.getLocal("pTable")))}(),function(){const c=t.addFunction(a+"_chunk");c.addParam("pBases","i32"),c.addParam("pScalars","i32"),c.addParam("scalarSize","i32"),c.addParam("n","i32"),c.addParam("startBit","i32"),c.addParam("chunkSize","i32"),c.addParam("pr","i32"),c.addLocal("nChunks","i32"),c.addLocal("itScalar","i32"),c.addLocal("endScalar","i32"),c.addLocal("itBase","i32"),c.addLocal("i","i32"),c.addLocal("j","i32"),c.addLocal("nTable","i32"),c.addLocal("pTable","i32"),c.addLocal("idx","i32"),c.addLocal("pIdxTable","i32");const l=c.getCodeBuilder();c.addCode(l.if(l.i32_eqz(l.getLocal("n")),[...l.call(e+"_zero",l.getLocal("pr")),...l.ret([])]),l.setLocal("nTable",l.i32_shl(l.i32_const(1),l.getLocal("chunkSize"))),l.setLocal("pTable",l.i32_load(l.i32_const(0))),l.i32_store(l.i32_const(0),l.i32_add(l.getLocal("pTable"),l.i32_mul(l.getLocal("nTable"),l.i32_const(n)))),l.setLocal("j",l.i32_const(0)),l.block(l.loop(l.br_if(1,l.i32_eq(l.getLocal("j"),l.getLocal("nTable"))),l.call(e+"_zero",l.i32_add(l.getLocal("pTable"),l.i32_mul(l.getLocal("j"),l.i32_const(n)))),l.setLocal("j",l.i32_add(l.getLocal("j"),l.i32_const(1))),l.br(0))),l.setLocal("itBase",l.getLocal("pBases")),l.setLocal("itScalar",l.getLocal("pScalars")),l.setLocal("endScalar",l.i32_add(l.getLocal("pScalars"),l.i32_mul(l.getLocal("n"),l.getLocal("scalarSize")))),l.block(l.loop(l.br_if(1,l.i32_eq(l.getLocal("itScalar"),l.getLocal("endScalar"))),l.setLocal("idx",l.call(a+"_getChunk",l.getLocal("itScalar"),l.getLocal("scalarSize"),l.getLocal("startBit"),l.getLocal("chunkSize"))),l.if(l.getLocal("idx"),[...l.setLocal("pIdxTable",l.i32_add(l.getLocal("pTable"),l.i32_mul(l.i32_sub(l.getLocal("idx"),l.i32_const(1)),l.i32_const(n)))),...l.call(o,l.getLocal("pIdxTable"),l.getLocal("itBase"),l.getLocal("pIdxTable"))]),l.setLocal("itScalar",l.i32_add(l.getLocal("itScalar"),l.getLocal("scalarSize"))),l.setLocal("itBase",l.i32_add(l.getLocal("itBase"),l.i32_const(i))),l.br(0))),l.call(a+"_reduceTable",l.getLocal("pTable"),l.getLocal("chunkSize")),l.call(e+"_copy",l.getLocal("pTable"),l.getLocal("pr")),l.i32_store(l.i32_const(0),l.getLocal("pTable")))}(),c(),t.exportFunction(a),t.exportFunction(a+"_chunk")};var Tt=function(t,e,a,o){const i=t.modules[a].n64,n=8*i;if(t.modules[e])return e;return t.modules[e]={n64:3*i},function(){const o=t.addFunction(e+"_isZeroAffine");o.addParam("p1","i32"),o.setReturnType("i32");const i=o.getCodeBuilder();o.addCode(i.i32_and(i.call(a+"_isZero",i.getLocal("p1")),i.call(a+"_isZero",i.i32_add(i.getLocal("p1"),i.i32_const(n)))))}(),function(){const o=t.addFunction(e+"_isZero");o.addParam("p1","i32"),o.setReturnType("i32");const i=o.getCodeBuilder();o.addCode(i.call(a+"_isZero",i.i32_add(i.getLocal("p1"),i.i32_const(2*n))))}(),function(){const o=t.addFunction(e+"_zeroAffine");o.addParam("pr","i32");const i=o.getCodeBuilder();o.addCode(i.call(a+"_zero",i.getLocal("pr"))),o.addCode(i.call(a+"_zero",i.i32_add(i.getLocal("pr"),i.i32_const(n))))}(),function(){const o=t.addFunction(e+"_zero");o.addParam("pr","i32");const i=o.getCodeBuilder();o.addCode(i.call(a+"_zero",i.getLocal("pr"))),o.addCode(i.call(a+"_one",i.i32_add(i.getLocal("pr"),i.i32_const(n)))),o.addCode(i.call(a+"_zero",i.i32_add(i.getLocal("pr"),i.i32_const(2*n))))}(),function(){const a=t.addFunction(e+"_copyAffine");a.addParam("ps","i32"),a.addParam("pd","i32");const o=a.getCodeBuilder();for(let t=0;t<2*i;t++)a.addCode(o.i64_store(o.getLocal("pd"),8*t,o.i64_load(o.getLocal("ps"),8*t)))}(),function(){const a=t.addFunction(e+"_copy");a.addParam("ps","i32"),a.addParam("pd","i32");const o=a.getCodeBuilder();for(let t=0;t<3*i;t++)a.addCode(o.i64_store(o.getLocal("pd"),8*t,o.i64_load(o.getLocal("ps"),8*t)))}(),function(){const o=t.addFunction(e+"_toJacobian");o.addParam("p1","i32"),o.addParam("pr","i32");const i=o.getCodeBuilder(),c=i.getLocal("p1"),l=i.i32_add(i.getLocal("p1"),i.i32_const(n)),r=i.getLocal("pr"),s=i.i32_add(i.getLocal("pr"),i.i32_const(n)),d=i.i32_add(i.getLocal("pr"),i.i32_const(2*n));o.addCode(i.if(i.call(e+"_isZeroAffine",i.getLocal("p1")),i.call(e+"_zero",i.getLocal("pr")),[...i.call(a+"_one",d),...i.call(a+"_copy",l,s),...i.call(a+"_copy",c,r)]))}(),function(){const o=t.addFunction(e+"_eqAffine");o.addParam("p1","i32"),o.addParam("p2","i32"),o.setReturnType("i32"),o.addLocal("z1","i32");const i=o.getCodeBuilder();o.addCode(i.ret(i.i32_and(i.call(a+"_eq",i.getLocal("p1"),i.getLocal("p2")),i.call(a+"_eq",i.i32_add(i.getLocal("p1"),i.i32_const(n)),i.i32_add(i.getLocal("p2"),i.i32_const(n))))))}(),function(){const o=t.addFunction(e+"_eqMixed");o.addParam("p1","i32"),o.addParam("p2","i32"),o.setReturnType("i32"),o.addLocal("z1","i32");const i=o.getCodeBuilder(),c=i.getLocal("p1"),l=i.i32_add(i.getLocal("p1"),i.i32_const(n));o.addCode(i.setLocal("z1",i.i32_add(i.getLocal("p1"),i.i32_const(2*n))));const r=i.getLocal("z1"),s=i.getLocal("p2"),d=i.i32_add(i.getLocal("p2"),i.i32_const(n)),_=i.i32_const(t.alloc(n)),u=i.i32_const(t.alloc(n)),g=i.i32_const(t.alloc(n)),f=i.i32_const(t.alloc(n));o.addCode(i.if(i.call(e+"_isZero",i.getLocal("p1")),i.ret(i.call(e+"_isZeroAffine",i.getLocal("p2")))),i.if(i.call(e+"_isZeroAffine",i.getLocal("p2")),i.ret(i.i32_const(0))),i.if(i.call(a+"_isOne",r),i.ret(i.call(e+"_eqAffine",i.getLocal("p1"),i.getLocal("p2")))),i.call(a+"_square",r,_),i.call(a+"_mul",s,_,u),i.call(a+"_mul",r,_,g),i.call(a+"_mul",d,g,f),i.if(i.call(a+"_eq",c,u),i.if(i.call(a+"_eq",l,f),i.ret(i.i32_const(1)))),i.ret(i.i32_const(0)))}(),function(){const o=t.addFunction(e+"_eq");o.addParam("p1","i32"),o.addParam("p2","i32"),o.setReturnType("i32"),o.addLocal("z1","i32"),o.addLocal("z2","i32");const i=o.getCodeBuilder(),c=i.getLocal("p1"),l=i.i32_add(i.getLocal("p1"),i.i32_const(n));o.addCode(i.setLocal("z1",i.i32_add(i.getLocal("p1"),i.i32_const(2*n))));const r=i.getLocal("z1"),s=i.getLocal("p2"),d=i.i32_add(i.getLocal("p2"),i.i32_const(n));o.addCode(i.setLocal("z2",i.i32_add(i.getLocal("p2"),i.i32_const(2*n))));const _=i.getLocal("z2"),u=i.i32_const(t.alloc(n)),g=i.i32_const(t.alloc(n)),f=i.i32_const(t.alloc(n)),h=i.i32_const(t.alloc(n)),p=i.i32_const(t.alloc(n)),L=i.i32_const(t.alloc(n)),m=i.i32_const(t.alloc(n)),A=i.i32_const(t.alloc(n));o.addCode(i.if(i.call(e+"_isZero",i.getLocal("p1")),i.ret(i.call(e+"_isZero",i.getLocal("p2")))),i.if(i.call(e+"_isZero",i.getLocal("p2")),i.ret(i.i32_const(0))),i.if(i.call(a+"_isOne",r),i.ret(i.call(e+"_eqMixed",i.getLocal("p2"),i.getLocal("p1")))),i.if(i.call(a+"_isOne",_),i.ret(i.call(e+"_eqMixed",i.getLocal("p1"),i.getLocal("p2")))),i.call(a+"_square",r,u),i.call(a+"_square",_,g),i.call(a+"_mul",c,g,f),i.call(a+"_mul",s,u,h),i.call(a+"_mul",r,u,p),i.call(a+"_mul",_,g,L),i.call(a+"_mul",l,L,m),i.call(a+"_mul",d,p,A),i.if(i.call(a+"_eq",f,h),i.if(i.call(a+"_eq",m,A),i.ret(i.i32_const(1)))),i.ret(i.i32_const(0)))}(),function(){const o=t.addFunction(e+"_doubleAffine");o.addParam("p1","i32"),o.addParam("pr","i32");const i=o.getCodeBuilder(),c=i.getLocal("p1"),l=i.i32_add(i.getLocal("p1"),i.i32_const(n)),r=i.getLocal("pr"),s=i.i32_add(i.getLocal("pr"),i.i32_const(n)),d=i.i32_add(i.getLocal("pr"),i.i32_const(2*n)),_=i.i32_const(t.alloc(n)),u=i.i32_const(t.alloc(n)),g=i.i32_const(t.alloc(n)),f=i.i32_const(t.alloc(n)),h=i.i32_const(t.alloc(n)),p=i.i32_const(t.alloc(n));o.addCode(i.if(i.call(e+"_isZeroAffine",i.getLocal("p1")),[...i.call(e+"_toJacobian",i.getLocal("p1"),i.getLocal("pr")),...i.ret([])]),i.call(a+"_square",c,_),i.call(a+"_square",l,u),i.call(a+"_square",u,g),i.call(a+"_add",c,u,f),i.call(a+"_square",f,f),i.call(a+"_sub",f,_,f),i.call(a+"_sub",f,g,f),i.call(a+"_add",f,f,f),i.call(a+"_add",_,_,h),i.call(a+"_add",h,_,h),i.call(a+"_add",l,l,d),i.call(a+"_square",h,r),i.call(a+"_sub",r,f,r),i.call(a+"_sub",r,f,r),i.call(a+"_add",g,g,p),i.call(a+"_add",p,p,p),i.call(a+"_add",p,p,p),i.call(a+"_sub",f,r,s),i.call(a+"_mul",s,h,s),i.call(a+"_sub",s,p,s))}(),function(){const o=t.addFunction(e+"_double");o.addParam("p1","i32"),o.addParam("pr","i32");const i=o.getCodeBuilder(),c=i.getLocal("p1"),l=i.i32_add(i.getLocal("p1"),i.i32_const(n)),r=i.i32_add(i.getLocal("p1"),i.i32_const(2*n)),s=i.getLocal("pr"),d=i.i32_add(i.getLocal("pr"),i.i32_const(n)),_=i.i32_add(i.getLocal("pr"),i.i32_const(2*n)),u=i.i32_const(t.alloc(n)),g=i.i32_const(t.alloc(n)),f=i.i32_const(t.alloc(n)),h=i.i32_const(t.alloc(n)),p=i.i32_const(t.alloc(n)),L=i.i32_const(t.alloc(n)),m=i.i32_const(t.alloc(n)),A=i.i32_const(t.alloc(n));o.addCode(i.if(i.call(e+"_isZero",i.getLocal("p1")),[...i.call(e+"_copy",i.getLocal("p1"),i.getLocal("pr")),...i.ret([])]),i.if(i.call(a+"_isOne",r),[...i.ret(i.call(e+"_doubleAffine",i.getLocal("p1"),i.getLocal("pr"))),...i.ret([])]),i.call(a+"_square",c,u),i.call(a+"_square",l,g),i.call(a+"_square",g,f),i.call(a+"_add",c,g,h),i.call(a+"_square",h,h),i.call(a+"_sub",h,u,h),i.call(a+"_sub",h,f,h),i.call(a+"_add",h,h,h),i.call(a+"_add",u,u,p),i.call(a+"_add",p,u,p),i.call(a+"_square",p,L),i.call(a+"_mul",l,r,m),i.call(a+"_add",h,h,s),i.call(a+"_sub",L,s,s),i.call(a+"_add",f,f,A),i.call(a+"_add",A,A,A),i.call(a+"_add",A,A,A),i.call(a+"_sub",h,s,d),i.call(a+"_mul",d,p,d),i.call(a+"_sub",d,A,d),i.call(a+"_add",m,m,_))}(),function(){const o=t.addFunction(e+"_addAffine");o.addParam("p1","i32"),o.addParam("p2","i32"),o.addParam("pr","i32"),o.addLocal("z1","i32");const i=o.getCodeBuilder(),c=i.getLocal("p1"),l=i.i32_add(i.getLocal("p1"),i.i32_const(n));o.addCode(i.setLocal("z1",i.i32_add(i.getLocal("p1"),i.i32_const(2*n))));const r=i.getLocal("p2"),s=i.i32_add(i.getLocal("p2"),i.i32_const(n)),d=i.getLocal("pr"),_=i.i32_add(i.getLocal("pr"),i.i32_const(n)),u=i.i32_add(i.getLocal("pr"),i.i32_const(2*n)),g=i.i32_const(t.alloc(n)),f=i.i32_const(t.alloc(n)),h=i.i32_const(t.alloc(n)),p=i.i32_const(t.alloc(n)),L=i.i32_const(t.alloc(n)),m=i.i32_const(t.alloc(n)),A=i.i32_const(t.alloc(n)),I=i.i32_const(t.alloc(n)),b=i.i32_const(t.alloc(n)),y=i.i32_const(t.alloc(n));o.addCode(i.if(i.call(e+"_isZeroAffine",i.getLocal("p1")),[...i.call(e+"_copyAffine",i.getLocal("p2"),i.getLocal("pr")),...i.call(a+"_one",i.i32_add(i.getLocal("pr"),i.i32_const(2*n))),...i.ret([])]),i.if(i.call(e+"_isZeroAffine",i.getLocal("p2")),[...i.call(e+"_copyAffine",i.getLocal("p1"),i.getLocal("pr")),...i.call(a+"_one",i.i32_add(i.getLocal("pr"),i.i32_const(2*n))),...i.ret([])]),i.if(i.call(a+"_eq",c,r),i.if(i.call(a+"_eq",l,s),[...i.call(e+"_doubleAffine",i.getLocal("p2"),i.getLocal("pr")),...i.ret([])])),i.call(a+"_sub",r,c,g),i.call(a+"_sub",s,l,h),i.call(a+"_square",g,f),i.call(a+"_add",f,f,p),i.call(a+"_add",p,p,p),i.call(a+"_mul",g,p,L),i.call(a+"_add",h,h,m),i.call(a+"_mul",c,p,I),i.call(a+"_square",m,A),i.call(a+"_add",I,I,b),i.call(a+"_sub",A,L,d),i.call(a+"_sub",d,b,d),i.call(a+"_mul",l,L,y),i.call(a+"_add",y,y,y),i.call(a+"_sub",I,d,_),i.call(a+"_mul",_,m,_),i.call(a+"_sub",_,y,_),i.call(a+"_add",g,g,u))}(),function(){const o=t.addFunction(e+"_addMixed");o.addParam("p1","i32"),o.addParam("p2","i32"),o.addParam("pr","i32"),o.addLocal("z1","i32");const i=o.getCodeBuilder(),c=i.getLocal("p1"),l=i.i32_add(i.getLocal("p1"),i.i32_const(n));o.addCode(i.setLocal("z1",i.i32_add(i.getLocal("p1"),i.i32_const(2*n))));const r=i.getLocal("z1"),s=i.getLocal("p2"),d=i.i32_add(i.getLocal("p2"),i.i32_const(n)),_=i.getLocal("pr"),u=i.i32_add(i.getLocal("pr"),i.i32_const(n)),g=i.i32_add(i.getLocal("pr"),i.i32_const(2*n)),f=i.i32_const(t.alloc(n)),h=i.i32_const(t.alloc(n)),p=i.i32_const(t.alloc(n)),L=i.i32_const(t.alloc(n)),m=i.i32_const(t.alloc(n)),A=i.i32_const(t.alloc(n)),I=i.i32_const(t.alloc(n)),b=i.i32_const(t.alloc(n)),y=i.i32_const(t.alloc(n)),C=i.i32_const(t.alloc(n)),w=i.i32_const(t.alloc(n)),B=i.i32_const(t.alloc(n)),x=i.i32_const(t.alloc(n)),F=i.i32_const(t.alloc(n));o.addCode(i.if(i.call(e+"_isZero",i.getLocal("p1")),[...i.call(e+"_copyAffine",i.getLocal("p2"),i.getLocal("pr")),...i.call(a+"_one",i.i32_add(i.getLocal("pr"),i.i32_const(2*n))),...i.ret([])]),i.if(i.call(e+"_isZeroAffine",i.getLocal("p2")),[...i.call(e+"_copy",i.getLocal("p1"),i.getLocal("pr")),...i.ret([])]),i.if(i.call(a+"_isOne",r),[...i.call(e+"_addAffine",c,s,_),...i.ret([])]),i.call(a+"_square",r,f),i.call(a+"_mul",s,f,h),i.call(a+"_mul",r,f,p),i.call(a+"_mul",d,p,L),i.if(i.call(a+"_eq",c,h),i.if(i.call(a+"_eq",l,L),[...i.call(e+"_doubleAffine",i.getLocal("p2"),i.getLocal("pr")),...i.ret([])])),i.call(a+"_sub",h,c,m),i.call(a+"_sub",L,l,I),i.call(a+"_square",m,A),i.call(a+"_add",A,A,b),i.call(a+"_add",b,b,b),i.call(a+"_mul",m,b,y),i.call(a+"_add",I,I,C),i.call(a+"_mul",c,b,B),i.call(a+"_square",C,w),i.call(a+"_add",B,B,x),i.call(a+"_sub",w,y,_),i.call(a+"_sub",_,x,_),i.call(a+"_mul",l,y,F),i.call(a+"_add",F,F,F),i.call(a+"_sub",B,_,u),i.call(a+"_mul",u,C,u),i.call(a+"_sub",u,F,u),i.call(a+"_add",r,m,g),i.call(a+"_square",g,g),i.call(a+"_sub",g,f,g),i.call(a+"_sub",g,A,g))}(),function(){const o=t.addFunction(e+"_add");o.addParam("p1","i32"),o.addParam("p2","i32"),o.addParam("pr","i32"),o.addLocal("z1","i32"),o.addLocal("z2","i32");const i=o.getCodeBuilder(),c=i.getLocal("p1"),l=i.i32_add(i.getLocal("p1"),i.i32_const(n));o.addCode(i.setLocal("z1",i.i32_add(i.getLocal("p1"),i.i32_const(2*n))));const r=i.getLocal("z1"),s=i.getLocal("p2"),d=i.i32_add(i.getLocal("p2"),i.i32_const(n));o.addCode(i.setLocal("z2",i.i32_add(i.getLocal("p2"),i.i32_const(2*n))));const _=i.getLocal("z2"),u=i.getLocal("pr"),g=i.i32_add(i.getLocal("pr"),i.i32_const(n)),f=i.i32_add(i.getLocal("pr"),i.i32_const(2*n)),h=i.i32_const(t.alloc(n)),p=i.i32_const(t.alloc(n)),L=i.i32_const(t.alloc(n)),m=i.i32_const(t.alloc(n)),A=i.i32_const(t.alloc(n)),I=i.i32_const(t.alloc(n)),b=i.i32_const(t.alloc(n)),y=i.i32_const(t.alloc(n)),C=i.i32_const(t.alloc(n)),w=i.i32_const(t.alloc(n)),B=i.i32_const(t.alloc(n)),x=i.i32_const(t.alloc(n)),F=i.i32_const(t.alloc(n)),E=i.i32_const(t.alloc(n)),S=i.i32_const(t.alloc(n)),v=i.i32_const(t.alloc(n)),P=i.i32_const(t.alloc(n));o.addCode(i.if(i.call(e+"_isZero",i.getLocal("p1")),[...i.call(e+"_copy",i.getLocal("p2"),i.getLocal("pr")),...i.ret([])]),i.if(i.call(e+"_isZero",i.getLocal("p2")),[...i.call(e+"_copy",i.getLocal("p1"),i.getLocal("pr")),...i.ret([])]),i.if(i.call(a+"_isOne",r),[...i.call(e+"_addMixed",s,c,u),...i.ret([])]),i.if(i.call(a+"_isOne",_),[...i.call(e+"_addMixed",c,s,u),...i.ret([])]),i.call(a+"_square",r,h),i.call(a+"_square",_,p),i.call(a+"_mul",c,p,L),i.call(a+"_mul",s,h,m),i.call(a+"_mul",r,h,A),i.call(a+"_mul",_,p,I),i.call(a+"_mul",l,I,b),i.call(a+"_mul",d,A,y),i.if(i.call(a+"_eq",L,m),i.if(i.call(a+"_eq",b,y),[...i.call(e+"_double",i.getLocal("p1"),i.getLocal("pr")),...i.ret([])])),i.call(a+"_sub",m,L,C),i.call(a+"_sub",y,b,w),i.call(a+"_add",C,C,B),i.call(a+"_square",B,B),i.call(a+"_mul",C,B,x),i.call(a+"_add",w,w,F),i.call(a+"_mul",L,B,S),i.call(a+"_square",F,E),i.call(a+"_add",S,S,v),i.call(a+"_sub",E,x,u),i.call(a+"_sub",u,v,u),i.call(a+"_mul",b,x,P),i.call(a+"_add",P,P,P),i.call(a+"_sub",S,u,g),i.call(a+"_mul",g,F,g),i.call(a+"_sub",g,P,g),i.call(a+"_add",r,_,f),i.call(a+"_square",f,f),i.call(a+"_sub",f,h,f),i.call(a+"_sub",f,p,f),i.call(a+"_mul",f,C,f))}(),function(){const o=t.addFunction(e+"_negAffine");o.addParam("p1","i32"),o.addParam("pr","i32");const i=o.getCodeBuilder(),c=i.getLocal("p1"),l=i.i32_add(i.getLocal("p1"),i.i32_const(n)),r=i.getLocal("pr"),s=i.i32_add(i.getLocal("pr"),i.i32_const(n));o.addCode(i.call(a+"_copy",c,r),i.call(a+"_neg",l,s))}(),function(){const o=t.addFunction(e+"_neg");o.addParam("p1","i32"),o.addParam("pr","i32");const i=o.getCodeBuilder(),c=i.getLocal("p1"),l=i.i32_add(i.getLocal("p1"),i.i32_const(n)),r=i.i32_add(i.getLocal("p1"),i.i32_const(2*n)),s=i.getLocal("pr"),d=i.i32_add(i.getLocal("pr"),i.i32_const(n)),_=i.i32_add(i.getLocal("pr"),i.i32_const(2*n));o.addCode(i.call(a+"_copy",c,s),i.call(a+"_neg",l,d),i.call(a+"_copy",r,_))}(),function(){const a=t.addFunction(e+"_subAffine");a.addParam("p1","i32"),a.addParam("p2","i32"),a.addParam("pr","i32");const o=a.getCodeBuilder(),i=o.i32_const(t.alloc(3*n));a.addCode(o.call(e+"_negAffine",o.getLocal("p2"),i),o.call(e+"_addAffine",o.getLocal("p1"),i,o.getLocal("pr")))}(),function(){const a=t.addFunction(e+"_subMixed");a.addParam("p1","i32"),a.addParam("p2","i32"),a.addParam("pr","i32");const o=a.getCodeBuilder(),i=o.i32_const(t.alloc(3*n));a.addCode(o.call(e+"_negAffine",o.getLocal("p2"),i),o.call(e+"_addMixed",o.getLocal("p1"),i,o.getLocal("pr")))}(),function(){const a=t.addFunction(e+"_sub");a.addParam("p1","i32"),a.addParam("p2","i32"),a.addParam("pr","i32");const o=a.getCodeBuilder(),i=o.i32_const(t.alloc(3*n));a.addCode(o.call(e+"_neg",o.getLocal("p2"),i),o.call(e+"_add",o.getLocal("p1"),i,o.getLocal("pr")))}(),function(){const o=t.addFunction(e+"_fromMontgomeryAffine");o.addParam("p1","i32"),o.addParam("pr","i32");const i=o.getCodeBuilder();o.addCode(i.call(a+"_fromMontgomery",i.getLocal("p1"),i.getLocal("pr")));for(let t=1;t<2;t++)o.addCode(i.call(a+"_fromMontgomery",i.i32_add(i.getLocal("p1"),i.i32_const(t*n)),i.i32_add(i.getLocal("pr"),i.i32_const(t*n))))}(),function(){const o=t.addFunction(e+"_fromMontgomery");o.addParam("p1","i32"),o.addParam("pr","i32");const i=o.getCodeBuilder();o.addCode(i.call(a+"_fromMontgomery",i.getLocal("p1"),i.getLocal("pr")));for(let t=1;t<3;t++)o.addCode(i.call(a+"_fromMontgomery",i.i32_add(i.getLocal("p1"),i.i32_const(t*n)),i.i32_add(i.getLocal("pr"),i.i32_const(t*n))))}(),function(){const o=t.addFunction(e+"_toMontgomeryAffine");o.addParam("p1","i32"),o.addParam("pr","i32");const i=o.getCodeBuilder();o.addCode(i.call(a+"_toMontgomery",i.getLocal("p1"),i.getLocal("pr")));for(let t=1;t<2;t++)o.addCode(i.call(a+"_toMontgomery",i.i32_add(i.getLocal("p1"),i.i32_const(t*n)),i.i32_add(i.getLocal("pr"),i.i32_const(t*n))))}(),function(){const o=t.addFunction(e+"_toMontgomery");o.addParam("p1","i32"),o.addParam("pr","i32");const i=o.getCodeBuilder();o.addCode(i.call(a+"_toMontgomery",i.getLocal("p1"),i.getLocal("pr")));for(let t=1;t<3;t++)o.addCode(i.call(a+"_toMontgomery",i.i32_add(i.getLocal("p1"),i.i32_const(t*n)),i.i32_add(i.getLocal("pr"),i.i32_const(t*n))))}(),function(){const o=t.addFunction(e+"_toAffine");o.addParam("p1","i32"),o.addParam("pr","i32");const i=o.getCodeBuilder(),c=i.getLocal("p1"),l=i.i32_add(i.getLocal("p1"),i.i32_const(n)),r=i.i32_add(i.getLocal("p1"),i.i32_const(2*n)),s=i.getLocal("pr"),d=i.i32_add(i.getLocal("pr"),i.i32_const(n)),_=i.i32_const(t.alloc(n)),u=i.i32_const(t.alloc(n)),g=i.i32_const(t.alloc(n));o.addCode(i.if(i.call(e+"_isZero",i.getLocal("p1")),[...i.call(a+"_zero",s),...i.call(a+"_zero",d)],[...i.call(a+"_inverse",r,_),...i.call(a+"_square",_,u),...i.call(a+"_mul",_,u,g),...i.call(a+"_mul",c,u,s),...i.call(a+"_mul",l,g,d)]))}(),function(){const i=t.addFunction(e+"_inCurveAffine");i.addParam("pIn","i32"),i.setReturnType("i32");const c=i.getCodeBuilder(),l=c.getLocal("pIn"),r=c.i32_add(c.getLocal("pIn"),c.i32_const(n)),s=c.i32_const(t.alloc(n)),d=c.i32_const(t.alloc(n));i.addCode(c.call(a+"_square",r,s),c.call(a+"_square",l,d),c.call(a+"_mul",l,d,d),c.call(a+"_add",d,c.i32_const(o),d),c.ret(c.call(a+"_eq",s,d)))}(),function(){const a=t.addFunction(e+"_inCurve");a.addParam("pIn","i32"),a.setReturnType("i32");const o=a.getCodeBuilder(),i=o.i32_const(t.alloc(2*n));a.addCode(o.call(e+"_toAffine",o.getLocal("pIn"),i),o.ret(o.call(e+"_inCurveAffine",i)))}(),function(){const o=t.addFunction(e+"_batchToAffine");o.addParam("pIn","i32"),o.addParam("n","i32"),o.addParam("pOut","i32"),o.addLocal("pAux","i32"),o.addLocal("itIn","i32"),o.addLocal("itAux","i32"),o.addLocal("itOut","i32"),o.addLocal("i","i32");const i=o.getCodeBuilder(),c=i.i32_const(t.alloc(n));o.addCode(i.setLocal("pAux",i.i32_load(i.i32_const(0))),i.i32_store(i.i32_const(0),i.i32_add(i.getLocal("pAux"),i.i32_mul(i.getLocal("n"),i.i32_const(n)))),i.call(a+"_batchInverse",i.i32_add(i.getLocal("pIn"),i.i32_const(2*n)),i.i32_const(3*n),i.getLocal("n"),i.getLocal("pAux"),i.i32_const(n)),i.setLocal("itIn",i.getLocal("pIn")),i.setLocal("itAux",i.getLocal("pAux")),i.setLocal("itOut",i.getLocal("pOut")),i.setLocal("i",i.i32_const(0)),i.block(i.loop(i.br_if(1,i.i32_eq(i.getLocal("i"),i.getLocal("n"))),i.if(i.call(a+"_isZero",i.getLocal("itAux")),[...i.call(a+"_zero",i.getLocal("itOut")),...i.call(a+"_zero",i.i32_add(i.getLocal("itOut"),i.i32_const(n)))],[...i.call(a+"_mul",i.getLocal("itAux"),i.i32_add(i.getLocal("itIn"),i.i32_const(n)),c),...i.call(a+"_square",i.getLocal("itAux"),i.getLocal("itAux")),...i.call(a+"_mul",i.getLocal("itAux"),i.getLocal("itIn"),i.getLocal("itOut")),...i.call(a+"_mul",i.getLocal("itAux"),c,i.i32_add(i.getLocal("itOut"),i.i32_const(n)))]),i.setLocal("itIn",i.i32_add(i.getLocal("itIn"),i.i32_const(3*n))),i.setLocal("itOut",i.i32_add(i.getLocal("itOut"),i.i32_const(2*n))),i.setLocal("itAux",i.i32_add(i.getLocal("itAux"),i.i32_const(n))),i.setLocal("i",i.i32_add(i.getLocal("i"),i.i32_const(1))),i.br(0))),i.i32_store(i.i32_const(0),i.getLocal("pAux")))}(),function(){const o=t.addFunction(e+"_normalize");o.addParam("p1","i32"),o.addParam("pr","i32");const i=o.getCodeBuilder(),c=i.getLocal("p1"),l=i.i32_add(i.getLocal("p1"),i.i32_const(n)),r=i.i32_add(i.getLocal("p1"),i.i32_const(2*n)),s=i.getLocal("pr"),d=i.i32_add(i.getLocal("pr"),i.i32_const(n)),_=i.i32_add(i.getLocal("pr"),i.i32_const(2*n)),u=i.i32_const(t.alloc(n)),g=i.i32_const(t.alloc(n)),f=i.i32_const(t.alloc(n));o.addCode(i.if(i.call(e+"_isZero",i.getLocal("p1")),i.call(e+"_zero",i.getLocal("pr")),[...i.call(a+"_inverse",r,u),...i.call(a+"_square",u,g),...i.call(a+"_mul",u,g,f),...i.call(a+"_mul",c,g,s),...i.call(a+"_mul",l,f,d),...i.call(a+"_one",_)]))}(),function(){const a=t.addFunction(e+"__reverseBytes");a.addParam("pIn","i32"),a.addParam("n","i32"),a.addParam("pOut","i32"),a.addLocal("itOut","i32"),a.addLocal("itIn","i32");const o=a.getCodeBuilder();a.addCode(o.setLocal("itOut",o.i32_sub(o.i32_add(o.getLocal("pOut"),o.getLocal("n")),o.i32_const(1))),o.setLocal("itIn",o.getLocal("pIn")),o.block(o.loop(o.br_if(1,o.i32_lt_s(o.getLocal("itOut"),o.getLocal("pOut"))),o.i32_store8(o.getLocal("itOut"),o.i32_load8_u(o.getLocal("itIn"))),o.setLocal("itOut",o.i32_sub(o.getLocal("itOut"),o.i32_const(1))),o.setLocal("itIn",o.i32_add(o.getLocal("itIn"),o.i32_const(1))),o.br(0))))}(),function(){const a=t.addFunction(e+"_LEMtoU");a.addParam("pIn","i32"),a.addParam("pOut","i32");const o=a.getCodeBuilder(),i=t.alloc(2*n),c=o.i32_const(i),l=o.i32_const(i),r=o.i32_const(i+n);a.addCode(o.if(o.call(e+"_isZeroAffine",o.getLocal("pIn")),[...o.call(e+"_zeroAffine",o.getLocal("pOut")),...o.ret([])]),o.call(e+"_fromMontgomeryAffine",o.getLocal("pIn"),c),o.call(e+"__reverseBytes",l,o.i32_const(n),o.getLocal("pOut")),o.call(e+"__reverseBytes",r,o.i32_const(n),o.i32_add(o.getLocal("pOut"),o.i32_const(n))))}(),function(){const o=t.addFunction(e+"_LEMtoC");o.addParam("pIn","i32"),o.addParam("pOut","i32");const i=o.getCodeBuilder(),c=i.i32_const(t.alloc(n));o.addCode(i.if(i.call(e+"_isZeroAffine",i.getLocal("pIn")),[...i.call(a+"_zero",i.getLocal("pOut")),...i.i32_store8(i.getLocal("pOut"),i.i32_const(64)),...i.ret([])]),i.call(a+"_fromMontgomery",i.getLocal("pIn"),c),i.call(e+"__reverseBytes",c,i.i32_const(n),i.getLocal("pOut")),i.if(i.i32_eq(i.call(a+"_sign",i.i32_add(i.getLocal("pIn"),i.i32_const(n))),i.i32_const(-1)),i.i32_store8(i.getLocal("pOut"),i.i32_or(i.i32_load8_u(i.getLocal("pOut")),i.i32_const(128)))))}(),function(){const a=t.addFunction(e+"_UtoLEM");a.addParam("pIn","i32"),a.addParam("pOut","i32");const o=a.getCodeBuilder(),i=t.alloc(2*n),c=o.i32_const(i),l=o.i32_const(i),r=o.i32_const(i+n);a.addCode(o.if(o.i32_and(o.i32_load8_u(o.getLocal("pIn")),o.i32_const(64)),[...o.call(e+"_zeroAffine",o.getLocal("pOut")),...o.ret([])]),o.call(e+"__reverseBytes",o.getLocal("pIn"),o.i32_const(n),l),o.call(e+"__reverseBytes",o.i32_add(o.getLocal("pIn"),o.i32_const(n)),o.i32_const(n),r),o.call(e+"_toMontgomeryAffine",c,o.getLocal("pOut")))}(),function(){const i=t.addFunction(e+"_CtoLEM");i.addParam("pIn","i32"),i.addParam("pOut","i32"),i.addLocal("firstByte","i32"),i.addLocal("greatest","i32");const c=i.getCodeBuilder(),l=t.alloc(2*n),r=c.i32_const(l),s=c.i32_const(l+n);i.addCode(c.setLocal("firstByte",c.i32_load8_u(c.getLocal("pIn"))),c.if(c.i32_and(c.getLocal("firstByte"),c.i32_const(64)),[...c.call(e+"_zeroAffine",c.getLocal("pOut")),...c.ret([])]),c.setLocal("greatest",c.i32_and(c.getLocal("firstByte"),c.i32_const(128))),c.call(a+"_copy",c.getLocal("pIn"),s),c.i32_store8(s,c.i32_and(c.getLocal("firstByte"),c.i32_const(63))),c.call(e+"__reverseBytes",s,c.i32_const(n),r),c.call(a+"_toMontgomery",r,c.getLocal("pOut")),c.call(a+"_square",c.getLocal("pOut"),s),c.call(a+"_mul",c.getLocal("pOut"),s,s),c.call(a+"_add",s,c.i32_const(o),s),c.call(a+"_sqrt",s,s),c.call(a+"_neg",s,r),c.if(c.i32_eq(c.call(a+"_sign",s),c.i32_const(-1)),c.if(c.getLocal("greatest"),c.call(a+"_copy",s,c.i32_add(c.getLocal("pOut"),c.i32_const(n))),c.call(a+"_neg",s,c.i32_add(c.getLocal("pOut"),c.i32_const(n)))),c.if(c.getLocal("greatest"),c.call(a+"_neg",s,c.i32_add(c.getLocal("pOut"),c.i32_const(n))),c.call(a+"_copy",s,c.i32_add(c.getLocal("pOut"),c.i32_const(n))))))}(),Gt(t,e+"_batchLEMtoU",e+"_LEMtoU",2*n,2*n),Gt(t,e+"_batchLEMtoC",e+"_LEMtoC",2*n,n),Gt(t,e+"_batchUtoLEM",e+"_UtoLEM",2*n,2*n),Gt(t,e+"_batchCtoLEM",e+"_CtoLEM",n,2*n,!0),Gt(t,e+"_batchToJacobian",e+"_toJacobian",2*n,3*n,!0),kt(t,e,e+"_multiexp",e+"_add",3*n),kt(t,e,e+"_multiexpAffine",e+"_addMixed",2*n),Dt(t,e+"_timesScalar",3*n,e+"_add",e+"_double",e+"_sub",e+"_copy",e+"_zero"),Dt(t,e+"_timesScalarAffine",2*n,e+"_addMixed",e+"_double",e+"_subMixed",e+"_copyAffine",e+"_zero"),t.exportFunction(e+"_isZero"),t.exportFunction(e+"_isZeroAffine"),t.exportFunction(e+"_eq"),t.exportFunction(e+"_eqMixed"),t.exportFunction(e+"_eqAffine"),t.exportFunction(e+"_copy"),t.exportFunction(e+"_copyAffine"),t.exportFunction(e+"_zero"),t.exportFunction(e+"_zeroAffine"),t.exportFunction(e+"_double"),t.exportFunction(e+"_doubleAffine"),t.exportFunction(e+"_add"),t.exportFunction(e+"_addMixed"),t.exportFunction(e+"_addAffine"),t.exportFunction(e+"_neg"),t.exportFunction(e+"_negAffine"),t.exportFunction(e+"_sub"),t.exportFunction(e+"_subMixed"),t.exportFunction(e+"_subAffine"),t.exportFunction(e+"_fromMontgomery"),t.exportFunction(e+"_fromMontgomeryAffine"),t.exportFunction(e+"_toMontgomery"),t.exportFunction(e+"_toMontgomeryAffine"),t.exportFunction(e+"_timesScalar"),t.exportFunction(e+"_timesScalarAffine"),t.exportFunction(e+"_normalize"),t.exportFunction(e+"_LEMtoU"),t.exportFunction(e+"_LEMtoC"),t.exportFunction(e+"_UtoLEM"),t.exportFunction(e+"_CtoLEM"),t.exportFunction(e+"_batchLEMtoU"),t.exportFunction(e+"_batchLEMtoC"),t.exportFunction(e+"_batchUtoLEM"),t.exportFunction(e+"_batchCtoLEM"),t.exportFunction(e+"_toAffine"),t.exportFunction(e+"_toJacobian"),t.exportFunction(e+"_batchToAffine"),t.exportFunction(e+"_batchToJacobian"),t.exportFunction(e+"_inCurve"),t.exportFunction(e+"_inCurveAffine"),e};const{isOdd:Nt,modInv:Rt,modPow:Kt}=et,Vt=W;var jt=function(t,e,a,o,i){const n=8*t.modules[o].n64,c=8*t.modules[a].n64,l=t.modules[o].q;let r=l-1n,s=0;for(;!Nt(r);)s++,r>>=1n;let d=2n;for(;1n===Kt(d,l>>1n,l);)d+=1n;const _=new Array(s+1);_[s]=Kt(d,r,l);let u=s-1;for(;u>=0;)_[u]=Kt(_[u+1],2n,l),u--;const g=[],f=(1n<<BigInt(8*n))%l;for(let E=0;E<_.length;E++){const t=_[E]*f%l;g.push(...Vt.bigInt2BytesLE(t,n))}const h=t.alloc(g),p=new Array(s+1);p[0]=1n;for(let E=1;E<=s;E++)p[E]=2n*p[E-1];const L=[];for(let E=0;E<=s;E++){const t=Rt(p[E],l)*f%l;L.push(...Vt.bigInt2BytesLE(t,n))}const m=t.alloc(L),A=Kt(d,2n,l),I=[],b=[];for(let E=0;E<=s;E++){const t=Kt(A,2n**BigInt(E),l),e=Rt(l+1n-t,l);I.push(...Vt.bigInt2BytesLE(t*f%l,n)),b.push(...Vt.bigInt2BytesLE(e*f%l,n))}const y=t.alloc(I),C=t.alloc(b);function w(t){let e=0;for(let a=0;a<8;a++)t&1<<a&&(e|=128>>a);return e}const B=Array(256);for(let E=0;E<256;E++)B[E]=w(E);const x=t.alloc(B);function F(){const a=t.addFunction(e+"_fft");a.addParam("px","i32"),a.addParam("n","i32"),a.addLocal("bits","i32");const i=a.getCodeBuilder(),c=i.i32_const(t.alloc(n));a.addCode(i.setLocal("bits",i.call(e+"__log2",i.getLocal("n"))),i.call(o+"_one",c),i.call(e+"_rawfft",i.getLocal("px"),i.getLocal("bits"),i.i32_const(0),c))}!function(){const a=t.addFunction(e+"__rev");a.addParam("x","i32"),a.addParam("bits","i32"),a.setReturnType("i32");const o=a.getCodeBuilder();a.addCode(o.i32_rotl(o.i32_add(o.i32_add(o.i32_shl(o.i32_load8_u(o.i32_and(o.getLocal("x"),o.i32_const(255)),x,0),o.i32_const(24)),o.i32_shl(o.i32_load8_u(o.i32_and(o.i32_shr_u(o.getLocal("x"),o.i32_const(8)),o.i32_const(255)),x,0),o.i32_const(16))),o.i32_add(o.i32_shl(o.i32_load8_u(o.i32_and(o.i32_shr_u(o.getLocal("x"),o.i32_const(16)),o.i32_const(255)),x,0),o.i32_const(8)),o.i32_load8_u(o.i32_and(o.i32_shr_u(o.getLocal("x"),o.i32_const(24)),o.i32_const(255)),x,0))),o.getLocal("bits")))}(),function(){const o=t.addFunction(e+"__reversePermutation");o.addParam("px","i32"),o.addParam("bits","i32"),o.addLocal("n","i32"),o.addLocal("i","i32"),o.addLocal("ri","i32"),o.addLocal("idx1","i32"),o.addLocal("idx2","i32");const i=o.getCodeBuilder(),n=i.i32_const(t.alloc(c));o.addCode(i.setLocal("n",i.i32_shl(i.i32_const(1),i.getLocal("bits"))),i.setLocal("i",i.i32_const(0)),i.block(i.loop(i.br_if(1,i.i32_eq(i.getLocal("i"),i.getLocal("n"))),i.setLocal("idx1",i.i32_add(i.getLocal("px"),i.i32_mul(i.getLocal("i"),i.i32_const(c)))),i.setLocal("ri",i.call(e+"__rev",i.getLocal("i"),i.getLocal("bits"))),i.setLocal("idx2",i.i32_add(i.getLocal("px"),i.i32_mul(i.getLocal("ri"),i.i32_const(c)))),i.if(i.i32_lt_u(i.getLocal("i"),i.getLocal("ri")),[...i.call(a+"_copy",i.getLocal("idx1"),n),...i.call(a+"_copy",i.getLocal("idx2"),i.getLocal("idx1")),...i.call(a+"_copy",n,i.getLocal("idx2"))]),i.setLocal("i",i.i32_add(i.getLocal("i"),i.i32_const(1))),i.br(0))))}(),function(){const n=t.addFunction(e+"__fftFinal");n.addParam("px","i32"),n.addParam("bits","i32"),n.addParam("reverse","i32"),n.addParam("mulFactor","i32"),n.addLocal("n","i32"),n.addLocal("ndiv2","i32"),n.addLocal("pInv2","i32"),n.addLocal("i","i32"),n.addLocal("mask","i32"),n.addLocal("idx1","i32"),n.addLocal("idx2","i32");const l=n.getCodeBuilder(),r=l.i32_const(t.alloc(c));n.addCode(l.if(l.i32_and(l.i32_eqz(l.getLocal("reverse")),l.call(o+"_isOne",l.getLocal("mulFactor"))),l.ret([])),l.setLocal("n",l.i32_shl(l.i32_const(1),l.getLocal("bits"))),l.setLocal("mask",l.i32_sub(l.getLocal("n"),l.i32_const(1))),l.setLocal("i",l.i32_const(1)),l.setLocal("ndiv2",l.i32_shr_u(l.getLocal("n"),l.i32_const(1))),l.block(l.loop(l.br_if(1,l.i32_ge_u(l.getLocal("i"),l.getLocal("ndiv2"))),l.setLocal("idx1",l.i32_add(l.getLocal("px"),l.i32_mul(l.getLocal("i"),l.i32_const(c)))),l.setLocal("idx2",l.i32_add(l.getLocal("px"),l.i32_mul(l.i32_sub(l.getLocal("n"),l.getLocal("i")),l.i32_const(c)))),l.if(l.getLocal("reverse"),l.if(l.call(o+"_isOne",l.getLocal("mulFactor")),[...l.call(a+"_copy",l.getLocal("idx1"),r),...l.call(a+"_copy",l.getLocal("idx2"),l.getLocal("idx1")),...l.call(a+"_copy",r,l.getLocal("idx2"))],[...l.call(a+"_copy",l.getLocal("idx1"),r),...l.call(i,l.getLocal("idx2"),l.getLocal("mulFactor"),l.getLocal("idx1")),...l.call(i,r,l.getLocal("mulFactor"),l.getLocal("idx2"))]),l.if(l.call(o+"_isOne",l.getLocal("mulFactor")),[],[...l.call(i,l.getLocal("idx1"),l.getLocal("mulFactor"),l.getLocal("idx1")),...l.call(i,l.getLocal("idx2"),l.getLocal("mulFactor"),l.getLocal("idx2"))])),l.setLocal("i",l.i32_add(l.getLocal("i"),l.i32_const(1))),l.br(0))),l.if(l.call(o+"_isOne",l.getLocal("mulFactor")),[],[...l.call(i,l.getLocal("px"),l.getLocal("mulFactor"),l.getLocal("px")),...l.setLocal("idx2",l.i32_add(l.getLocal("px"),l.i32_mul(l.getLocal("ndiv2"),l.i32_const(c)))),...l.call(i,l.getLocal("idx2"),l.getLocal("mulFactor"),l.getLocal("idx2"))]))}(),function(){const l=t.addFunction(e+"_rawfft");l.addParam("px","i32"),l.addParam("bits","i32"),l.addParam("reverse","i32"),l.addParam("mulFactor","i32"),l.addLocal("s","i32"),l.addLocal("k","i32"),l.addLocal("j","i32"),l.addLocal("m","i32"),l.addLocal("mdiv2","i32"),l.addLocal("n","i32"),l.addLocal("pwm","i32"),l.addLocal("idx1","i32"),l.addLocal("idx2","i32");const r=l.getCodeBuilder(),s=r.i32_const(t.alloc(n)),d=r.i32_const(t.alloc(c)),_=r.i32_const(t.alloc(c));l.addCode(r.call(e+"__reversePermutation",r.getLocal("px"),r.getLocal("bits")),r.setLocal("n",r.i32_shl(r.i32_const(1),r.getLocal("bits"))),r.setLocal("s",r.i32_const(1)),r.block(r.loop(r.br_if(1,r.i32_gt_u(r.getLocal("s"),r.getLocal("bits"))),r.setLocal("m",r.i32_shl(r.i32_const(1),r.getLocal("s"))),r.setLocal("pwm",r.i32_add(r.i32_const(h),r.i32_mul(r.getLocal("s"),r.i32_const(n)))),r.setLocal("k",r.i32_const(0)),r.block(r.loop(r.br_if(1,r.i32_ge_u(r.getLocal("k"),r.getLocal("n"))),r.call(o+"_one",s),r.setLocal("mdiv2",r.i32_shr_u(r.getLocal("m"),r.i32_const(1))),r.setLocal("j",r.i32_const(0)),r.block(r.loop(r.br_if(1,r.i32_ge_u(r.getLocal("j"),r.getLocal("mdiv2"))),r.setLocal("idx1",r.i32_add(r.getLocal("px"),r.i32_mul(r.i32_add(r.getLocal("k"),r.getLocal("j")),r.i32_const(c)))),r.setLocal("idx2",r.i32_add(r.getLocal("idx1"),r.i32_mul(r.getLocal("mdiv2"),r.i32_const(c)))),r.call(i,r.getLocal("idx2"),s,d),r.call(a+"_copy",r.getLocal("idx1"),_),r.call(a+"_add",_,d,r.getLocal("idx1")),r.call(a+"_sub",_,d,r.getLocal("idx2")),r.call(o+"_mul",s,r.getLocal("pwm"),s),r.setLocal("j",r.i32_add(r.getLocal("j"),r.i32_const(1))),r.br(0))),r.setLocal("k",r.i32_add(r.getLocal("k"),r.getLocal("m"))),r.br(0))),r.setLocal("s",r.i32_add(r.getLocal("s"),r.i32_const(1))),r.br(0))),r.call(e+"__fftFinal",r.getLocal("px"),r.getLocal("bits"),r.getLocal("reverse"),r.getLocal("mulFactor")))}(),function(){const a=t.addFunction(e+"__log2");a.addParam("n","i32"),a.setReturnType("i32"),a.addLocal("bits","i32"),a.addLocal("aux","i32");const o=a.getCodeBuilder();a.addCode(o.setLocal("aux",o.i32_shr_u(o.getLocal("n"),o.i32_const(1)))),a.addCode(o.setLocal("bits",o.i32_const(0))),a.addCode(o.block(o.loop(o.br_if(1,o.i32_eqz(o.getLocal("aux"))),o.setLocal("aux",o.i32_shr_u(o.getLocal("aux"),o.i32_const(1))),o.setLocal("bits",o.i32_add(o.getLocal("bits"),o.i32_const(1))),o.br(0)))),a.addCode(o.if(o.i32_ne(o.getLocal("n"),o.i32_shl(o.i32_const(1),o.getLocal("bits"))),o.unreachable())),a.addCode(o.if(o.i32_gt_u(o.getLocal("bits"),o.i32_const(s)),o.unreachable())),a.addCode(o.getLocal("bits"))}(),F(),function(){const a=t.addFunction(e+"_ifft");a.addParam("px","i32"),a.addParam("n","i32"),a.addLocal("bits","i32"),a.addLocal("pInv2","i32");const o=a.getCodeBuilder();a.addCode(o.setLocal("bits",o.call(e+"__log2",o.getLocal("n"))),o.setLocal("pInv2",o.i32_add(o.i32_const(m),o.i32_mul(o.getLocal("bits"),o.i32_const(n)))),o.call(e+"_rawfft",o.getLocal("px"),o.getLocal("bits"),o.i32_const(1),o.getLocal("pInv2")))}(),function(){const l=t.addFunction(e+"_fftJoin");l.addParam("pBuff1","i32"),l.addParam("pBuff2","i32"),l.addParam("n","i32"),l.addParam("first","i32"),l.addParam("inc","i32"),l.addLocal("idx1","i32"),l.addLocal("idx2","i32"),l.addLocal("i","i32");const r=l.getCodeBuilder(),s=r.i32_const(t.alloc(n)),d=r.i32_const(t.alloc(c)),_=r.i32_const(t.alloc(c));l.addCode(r.call(o+"_copy",r.getLocal("first"),s),r.setLocal("i",r.i32_const(0)),r.block(r.loop(r.br_if(1,r.i32_eq(r.getLocal("i"),r.getLocal("n"))),r.setLocal("idx1",r.i32_add(r.getLocal("pBuff1"),r.i32_mul(r.getLocal("i"),r.i32_const(c)))),r.setLocal("idx2",r.i32_add(r.getLocal("pBuff2"),r.i32_mul(r.getLocal("i"),r.i32_const(c)))),r.call(i,r.getLocal("idx2"),s,d),r.call(a+"_copy",r.getLocal("idx1"),_),r.call(a+"_add",_,d,r.getLocal("idx1")),r.call(a+"_sub",_,d,r.getLocal("idx2")),r.call(o+"_mul",s,r.getLocal("inc"),s),r.setLocal("i",r.i32_add(r.getLocal("i"),r.i32_const(1))),r.br(0))))}(),function(){const l=t.addFunction(e+"_fftJoinExt");l.addParam("pBuff1","i32"),l.addParam("pBuff2","i32"),l.addParam("n","i32"),l.addParam("first","i32"),l.addParam("inc","i32"),l.addParam("totalBits","i32"),l.addLocal("idx1","i32"),l.addLocal("idx2","i32"),l.addLocal("i","i32"),l.addLocal("pShiftToM","i32");const r=l.getCodeBuilder(),s=r.i32_const(t.alloc(n)),d=r.i32_const(t.alloc(c));l.addCode(r.setLocal("pShiftToM",r.i32_add(r.i32_const(y),r.i32_mul(r.getLocal("totalBits"),r.i32_const(n)))),r.call(o+"_copy",r.getLocal("first"),s),r.setLocal("i",r.i32_const(0)),r.block(r.loop(r.br_if(1,r.i32_eq(r.getLocal("i"),r.getLocal("n"))),r.setLocal("idx1",r.i32_add(r.getLocal("pBuff1"),r.i32_mul(r.getLocal("i"),r.i32_const(c)))),r.setLocal("idx2",r.i32_add(r.getLocal("pBuff2"),r.i32_mul(r.getLocal("i"),r.i32_const(c)))),r.call(a+"_add",r.getLocal("idx1"),r.getLocal("idx2"),d),r.call(i,r.getLocal("idx2"),r.getLocal("pShiftToM"),r.getLocal("idx2")),r.call(a+"_add",r.getLocal("idx1"),r.getLocal("idx2"),r.getLocal("idx2")),r.call(i,r.getLocal("idx2"),s,r.getLocal("idx2")),r.call(a+"_copy",d,r.getLocal("idx1")),r.call(o+"_mul",s,r.getLocal("inc"),s),r.setLocal("i",r.i32_add(r.getLocal("i"),r.i32_const(1))),r.br(0))))}(),function(){const l=t.addFunction(e+"_fftJoinExtInv");l.addParam("pBuff1","i32"),l.addParam("pBuff2","i32"),l.addParam("n","i32"),l.addParam("first","i32"),l.addParam("inc","i32"),l.addParam("totalBits","i32"),l.addLocal("idx1","i32"),l.addLocal("idx2","i32"),l.addLocal("i","i32"),l.addLocal("pShiftToM","i32"),l.addLocal("pSConst","i32");const r=l.getCodeBuilder(),s=r.i32_const(t.alloc(n)),d=r.i32_const(t.alloc(c));l.addCode(r.setLocal("pShiftToM",r.i32_add(r.i32_const(y),r.i32_mul(r.getLocal("totalBits"),r.i32_const(n)))),r.setLocal("pSConst",r.i32_add(r.i32_const(C),r.i32_mul(r.getLocal("totalBits"),r.i32_const(n)))),r.call(o+"_copy",r.getLocal("first"),s),r.setLocal("i",r.i32_const(0)),r.block(r.loop(r.br_if(1,r.i32_eq(r.getLocal("i"),r.getLocal("n"))),r.setLocal("idx1",r.i32_add(r.getLocal("pBuff1"),r.i32_mul(r.getLocal("i"),r.i32_const(c)))),r.setLocal("idx2",r.i32_add(r.getLocal("pBuff2"),r.i32_mul(r.getLocal("i"),r.i32_const(c)))),r.call(i,r.getLocal("idx2"),s,d),r.call(a+"_sub",r.getLocal("idx1"),d,r.getLocal("idx2")),r.call(i,r.getLocal("idx2"),r.getLocal("pSConst"),r.getLocal("idx2")),r.call(i,r.getLocal("idx1"),r.getLocal("pShiftToM"),r.getLocal("idx1")),r.call(a+"_sub",d,r.getLocal("idx1"),r.getLocal("idx1")),r.call(i,r.getLocal("idx1"),r.getLocal("pSConst"),r.getLocal("idx1")),r.call(o+"_mul",s,r.getLocal("inc"),s),r.setLocal("i",r.i32_add(r.getLocal("i"),r.i32_const(1))),r.br(0))))}(),function(){const l=t.addFunction(e+"_fftMix");l.addParam("pBuff","i32"),l.addParam("n","i32"),l.addParam("exp","i32"),l.addLocal("nGroups","i32"),l.addLocal("nPerGroup","i32"),l.addLocal("nPerGroupDiv2","i32"),l.addLocal("pairOffset","i32"),l.addLocal("idx1","i32"),l.addLocal("idx2","i32"),l.addLocal("i","i32"),l.addLocal("j","i32"),l.addLocal("pwm","i32");const r=l.getCodeBuilder(),s=r.i32_const(t.alloc(n)),d=r.i32_const(t.alloc(c)),_=r.i32_const(t.alloc(c));l.addCode(r.setLocal("nPerGroup",r.i32_shl(r.i32_const(1),r.getLocal("exp"))),r.setLocal("nPerGroupDiv2",r.i32_shr_u(r.getLocal("nPerGroup"),r.i32_const(1))),r.setLocal("nGroups",r.i32_shr_u(r.getLocal("n"),r.getLocal("exp"))),r.setLocal("pairOffset",r.i32_mul(r.getLocal("nPerGroupDiv2"),r.i32_const(c))),r.setLocal("pwm",r.i32_add(r.i32_const(h),r.i32_mul(r.getLocal("exp"),r.i32_const(n)))),r.setLocal("i",r.i32_const(0)),r.block(r.loop(r.br_if(1,r.i32_eq(r.getLocal("i"),r.getLocal("nGroups"))),r.call(o+"_one",s),r.setLocal("j",r.i32_const(0)),r.block(r.loop(r.br_if(1,r.i32_eq(r.getLocal("j"),r.getLocal("nPerGroupDiv2"))),r.setLocal("idx1",r.i32_add(r.getLocal("pBuff"),r.i32_mul(r.i32_add(r.i32_mul(r.getLocal("i"),r.getLocal("nPerGroup")),r.getLocal("j")),r.i32_const(c)))),r.setLocal("idx2",r.i32_add(r.getLocal("idx1"),r.getLocal("pairOffset"))),r.call(i,r.getLocal("idx2"),s,d),r.call(a+"_copy",r.getLocal("idx1"),_),r.call(a+"_add",_,d,r.getLocal("idx1")),r.call(a+"_sub",_,d,r.getLocal("idx2")),r.call(o+"_mul",s,r.getLocal("pwm"),s),r.setLocal("j",r.i32_add(r.getLocal("j"),r.i32_const(1))),r.br(0))),r.setLocal("i",r.i32_add(r.getLocal("i"),r.i32_const(1))),r.br(0))))}(),function(){const o=t.addFunction(e+"_fftFinal");o.addParam("pBuff","i32"),o.addParam("n","i32"),o.addParam("factor","i32"),o.addLocal("idx1","i32"),o.addLocal("idx2","i32"),o.addLocal("i","i32"),o.addLocal("ndiv2","i32");const n=o.getCodeBuilder(),l=n.i32_const(t.alloc(c));o.addCode(n.setLocal("ndiv2",n.i32_shr_u(n.getLocal("n"),n.i32_const(1))),n.if(n.i32_and(n.getLocal("n"),n.i32_const(1)),n.call(i,n.i32_add(n.getLocal("pBuff"),n.i32_mul(n.getLocal("ndiv2"),n.i32_const(c))),n.getLocal("factor"),n.i32_add(n.getLocal("pBuff"),n.i32_mul(n.getLocal("ndiv2"),n.i32_const(c))))),n.setLocal("i",n.i32_const(0)),n.block(n.loop(n.br_if(1,n.i32_ge_u(n.getLocal("i"),n.getLocal("ndiv2"))),n.setLocal("idx1",n.i32_add(n.getLocal("pBuff"),n.i32_mul(n.getLocal("i"),n.i32_const(c)))),n.setLocal("idx2",n.i32_add(n.getLocal("pBuff"),n.i32_mul(n.i32_sub(n.i32_sub(n.getLocal("n"),n.i32_const(1)),n.getLocal("i")),n.i32_const(c)))),n.call(i,n.getLocal("idx2"),n.getLocal("factor"),l),n.call(i,n.getLocal("idx1"),n.getLocal("factor"),n.getLocal("idx2")),n.call(a+"_copy",l,n.getLocal("idx1")),n.setLocal("i",n.i32_add(n.getLocal("i"),n.i32_const(1))),n.br(0))))}(),function(){const l=t.addFunction(e+"_prepareLagrangeEvaluation");l.addParam("pBuff1","i32"),l.addParam("pBuff2","i32"),l.addParam("n","i32"),l.addParam("first","i32"),l.addParam("inc","i32"),l.addParam("totalBits","i32"),l.addLocal("idx1","i32"),l.addLocal("idx2","i32"),l.addLocal("i","i32"),l.addLocal("pShiftToM","i32"),l.addLocal("pSConst","i32");const r=l.getCodeBuilder(),s=r.i32_const(t.alloc(n)),d=r.i32_const(t.alloc(c));l.addCode(r.setLocal("pShiftToM",r.i32_add(r.i32_const(y),r.i32_mul(r.getLocal("totalBits"),r.i32_const(n)))),r.setLocal("pSConst",r.i32_add(r.i32_const(C),r.i32_mul(r.getLocal("totalBits"),r.i32_const(n)))),r.call(o+"_copy",r.getLocal("first"),s),r.setLocal("i",r.i32_const(0)),r.block(r.loop(r.br_if(1,r.i32_eq(r.getLocal("i"),r.getLocal("n"))),r.setLocal("idx1",r.i32_add(r.getLocal("pBuff1"),r.i32_mul(r.getLocal("i"),r.i32_const(c)))),r.setLocal("idx2",r.i32_add(r.getLocal("pBuff2"),r.i32_mul(r.getLocal("i"),r.i32_const(c)))),r.call(i,r.getLocal("idx1"),r.getLocal("pShiftToM"),d),r.call(a+"_sub",r.getLocal("idx2"),d,d),r.call(a+"_sub",r.getLocal("idx1"),r.getLocal("idx2"),r.getLocal("idx2")),r.call(i,d,r.getLocal("pSConst"),r.getLocal("idx1")),r.call(i,r.getLocal("idx2"),s,r.getLocal("idx2")),r.call(o+"_mul",s,r.getLocal("inc"),s),r.setLocal("i",r.i32_add(r.getLocal("i"),r.i32_const(1))),r.br(0))))}(),t.exportFunction(e+"_fft"),t.exportFunction(e+"_ifft"),t.exportFunction(e+"_rawfft"),t.exportFunction(e+"_fftJoin"),t.exportFunction(e+"_fftJoinExt"),t.exportFunction(e+"_fftJoinExtInv"),t.exportFunction(e+"_fftMix"),t.exportFunction(e+"_fftFinal"),t.exportFunction(e+"_prepareLagrangeEvaluation")},Ht=function(t,e,a){const o=8*t.modules[a].n64;return function(){const i=t.addFunction(e+"_zero");i.addParam("px","i32"),i.addParam("n","i32"),i.addLocal("lastp","i32"),i.addLocal("p","i32");const n=i.getCodeBuilder();i.addCode(n.setLocal("p",n.getLocal("px")),n.setLocal("lastp",n.i32_add(n.getLocal("px"),n.i32_mul(n.getLocal("n"),n.i32_const(o)))),n.block(n.loop(n.br_if(1,n.i32_eq(n.getLocal("p"),n.getLocal("lastp"))),n.call(a+"_zero",n.getLocal("p")),n.setLocal("p",n.i32_add(n.getLocal("p"),n.i32_const(o))),n.br(0))))}(),function(){const i=t.addFunction(e+"_constructLC");i.addParam("ppolynomials","i32"),i.addParam("psignals","i32"),i.addParam("nSignals","i32"),i.addParam("pres","i32"),i.addLocal("i","i32"),i.addLocal("j","i32"),i.addLocal("pp","i32"),i.addLocal("ps","i32"),i.addLocal("pd","i32"),i.addLocal("ncoefs","i32");const n=i.getCodeBuilder(),c=n.i32_const(t.alloc(o));i.addCode(n.setLocal("i",n.i32_const(0)),n.setLocal("pp",n.getLocal("ppolynomials")),n.setLocal("ps",n.getLocal("psignals")),n.block(n.loop(n.br_if(1,n.i32_eq(n.getLocal("i"),n.getLocal("nSignals"))),n.setLocal("ncoefs",n.i32_load(n.getLocal("pp"))),n.setLocal("pp",n.i32_add(n.getLocal("pp"),n.i32_const(4))),n.setLocal("j",n.i32_const(0)),n.block(n.loop(n.br_if(1,n.i32_eq(n.getLocal("j"),n.getLocal("ncoefs"))),n.setLocal("pd",n.i32_add(n.getLocal("pres"),n.i32_mul(n.i32_load(n.getLocal("pp")),n.i32_const(o)))),n.setLocal("pp",n.i32_add(n.getLocal("pp"),n.i32_const(4))),n.call(a+"_mul",n.getLocal("ps"),n.getLocal("pp"),c),n.call(a+"_add",c,n.getLocal("pd"),n.getLocal("pd")),n.setLocal("pp",n.i32_add(n.getLocal("pp"),n.i32_const(o))),n.setLocal("j",n.i32_add(n.getLocal("j"),n.i32_const(1))),n.br(0))),n.setLocal("ps",n.i32_add(n.getLocal("ps"),n.i32_const(o))),n.setLocal("i",n.i32_add(n.getLocal("i"),n.i32_const(1))),n.br(0))))}(),t.exportFunction(e+"_zero"),t.exportFunction(e+"_constructLC"),e},Yt=function(t,e,a){const o=8*t.modules[a].n64;return function(){const i=t.addFunction(e+"_buildABC");i.addParam("pCoefs","i32"),i.addParam("nCoefs","i32"),i.addParam("pWitness","i32"),i.addParam("pA","i32"),i.addParam("pB","i32"),i.addParam("pC","i32"),i.addParam("offsetOut","i32"),i.addParam("nOut","i32"),i.addParam("offsetWitness","i32"),i.addParam("nWitness","i32"),i.addLocal("it","i32"),i.addLocal("ita","i32"),i.addLocal("itb","i32"),i.addLocal("last","i32"),i.addLocal("m","i32"),i.addLocal("c","i32"),i.addLocal("s","i32"),i.addLocal("pOut","i32");const n=i.getCodeBuilder(),c=n.i32_const(t.alloc(o));i.addCode(n.setLocal("ita",n.getLocal("pA")),n.setLocal("itb",n.getLocal("pB")),n.setLocal("last",n.i32_add(n.getLocal("pA"),n.i32_mul(n.getLocal("nOut"),n.i32_const(o)))),n.block(n.loop(n.br_if(1,n.i32_eq(n.getLocal("ita"),n.getLocal("last"))),n.call(a+"_zero",n.getLocal("ita")),n.call(a+"_zero",n.getLocal("itb")),n.setLocal("ita",n.i32_add(n.getLocal("ita"),n.i32_const(o))),n.setLocal("itb",n.i32_add(n.getLocal("itb"),n.i32_const(o))),n.br(0))),n.setLocal("it",n.getLocal("pCoefs")),n.setLocal("last",n.i32_add(n.getLocal("pCoefs"),n.i32_mul(n.getLocal("nCoefs"),n.i32_const(o+12)))),n.block(n.loop(n.br_if(1,n.i32_eq(n.getLocal("it"),n.getLocal("last"))),n.setLocal("s",n.i32_load(n.getLocal("it"),8)),n.if(n.i32_or(n.i32_lt_u(n.getLocal("s"),n.getLocal("offsetWitness")),n.i32_ge_u(n.getLocal("s"),n.i32_add(n.getLocal("offsetWitness"),n.getLocal("nWitness")))),[...n.setLocal("it",n.i32_add(n.getLocal("it"),n.i32_const(o+12))),...n.br(1)]),n.setLocal("m",n.i32_load(n.getLocal("it"))),n.if(n.i32_eq(n.getLocal("m"),n.i32_const(0)),n.setLocal("pOut",n.getLocal("pA")),n.if(n.i32_eq(n.getLocal("m"),n.i32_const(1)),n.setLocal("pOut",n.getLocal("pB")),[...n.setLocal("it",n.i32_add(n.getLocal("it"),n.i32_const(o+12))),...n.br(1)])),n.setLocal("c",n.i32_load(n.getLocal("it"),4)),n.if(n.i32_or(n.i32_lt_u(n.getLocal("c"),n.getLocal("offsetOut")),n.i32_ge_u(n.getLocal("c"),n.i32_add(n.getLocal("offsetOut"),n.getLocal("nOut")))),[...n.setLocal("it",n.i32_add(n.getLocal("it"),n.i32_const(o+12))),...n.br(1)]),n.setLocal("pOut",n.i32_add(n.getLocal("pOut"),n.i32_mul(n.i32_sub(n.getLocal("c"),n.getLocal("offsetOut")),n.i32_const(o)))),n.call(a+"_mul",n.i32_add(n.getLocal("pWitness"),n.i32_mul(n.i32_sub(n.getLocal("s"),n.getLocal("offsetWitness")),n.i32_const(o))),n.i32_add(n.getLocal("it"),n.i32_const(12)),c),n.call(a+"_add",n.getLocal("pOut"),c,n.getLocal("pOut")),n.setLocal("it",n.i32_add(n.getLocal("it"),n.i32_const(o+12))),n.br(0))),n.setLocal("ita",n.getLocal("pA")),n.setLocal("itb",n.getLocal("pB")),n.setLocal("it",n.getLocal("pC")),n.setLocal("last",n.i32_add(n.getLocal("pA"),n.i32_mul(n.getLocal("nOut"),n.i32_const(o)))),n.block(n.loop(n.br_if(1,n.i32_eq(n.getLocal("ita"),n.getLocal("last"))),n.call(a+"_mul",n.getLocal("ita"),n.getLocal("itb"),n.getLocal("it")),n.setLocal("ita",n.i32_add(n.getLocal("ita"),n.i32_const(o))),n.setLocal("itb",n.i32_add(n.getLocal("itb"),n.i32_const(o))),n.setLocal("it",n.i32_add(n.getLocal("it"),n.i32_const(o))),n.br(0))))}(),function(){const i=t.addFunction(e+"_joinABC");i.addParam("pA","i32"),i.addParam("pB","i32"),i.addParam("pC","i32"),i.addParam("n","i32"),i.addParam("pP","i32"),i.addLocal("ita","i32"),i.addLocal("itb","i32"),i.addLocal("itc","i32"),i.addLocal("itp","i32"),i.addLocal("last","i32");const n=i.getCodeBuilder(),c=n.i32_const(t.alloc(o));i.addCode(n.setLocal("ita",n.getLocal("pA")),n.setLocal("itb",n.getLocal("pB")),n.setLocal("itc",n.getLocal("pC")),n.setLocal("itp",n.getLocal("pP")),n.setLocal("last",n.i32_add(n.getLocal("pA"),n.i32_mul(n.getLocal("n"),n.i32_const(o)))),n.block(n.loop(n.br_if(1,n.i32_eq(n.getLocal("ita"),n.getLocal("last"))),n.call(a+"_mul",n.getLocal("ita"),n.getLocal("itb"),c),n.call(a+"_sub",c,n.getLocal("itc"),n.getLocal("itp")),n.setLocal("ita",n.i32_add(n.getLocal("ita"),n.i32_const(o))),n.setLocal("itb",n.i32_add(n.getLocal("itb"),n.i32_const(o))),n.setLocal("itc",n.i32_add(n.getLocal("itc"),n.i32_const(o))),n.setLocal("itp",n.i32_add(n.getLocal("itp"),n.i32_const(o))),n.br(0))))}(),function(){const i=t.addFunction(e+"_batchAdd");i.addParam("pa","i32"),i.addParam("pb","i32"),i.addParam("n","i32"),i.addParam("pr","i32"),i.addLocal("ita","i32"),i.addLocal("itb","i32"),i.addLocal("itr","i32"),i.addLocal("last","i32");const n=i.getCodeBuilder();i.addCode(n.setLocal("ita",n.getLocal("pa")),n.setLocal("itb",n.getLocal("pb")),n.setLocal("itr",n.getLocal("pr")),n.setLocal("last",n.i32_add(n.getLocal("pa"),n.i32_mul(n.getLocal("n"),n.i32_const(o)))),n.block(n.loop(n.br_if(1,n.i32_eq(n.getLocal("ita"),n.getLocal("last"))),n.call(a+"_add",n.getLocal("ita"),n.getLocal("itb"),n.getLocal("itr")),n.setLocal("ita",n.i32_add(n.getLocal("ita"),n.i32_const(o))),n.setLocal("itb",n.i32_add(n.getLocal("itb"),n.i32_const(o))),n.setLocal("itr",n.i32_add(n.getLocal("itr"),n.i32_const(o))),n.br(0))))}(),t.exportFunction(e+"_buildABC"),t.exportFunction(e+"_joinABC"),t.exportFunction(e+"_batchAdd"),e},Jt=function(t,e,a,o,i,n,c,l){const r=t.addFunction(e);r.addParam("pIn","i32"),r.addParam("n","i32"),r.addParam("pFirst","i32"),r.addParam("pInc","i32"),r.addParam("pOut","i32"),r.addLocal("pOldFree","i32"),r.addLocal("i","i32"),r.addLocal("pFrom","i32"),r.addLocal("pTo","i32");const s=r.getCodeBuilder(),d=s.i32_const(t.alloc(c));r.addCode(s.setLocal("pFrom",s.getLocal("pIn")),s.setLocal("pTo",s.getLocal("pOut"))),r.addCode(s.call(o+"_copy",s.getLocal("pFirst"),d)),r.addCode(s.setLocal("i",s.i32_const(0)),s.block(s.loop(s.br_if(1,s.i32_eq(s.getLocal("i"),s.getLocal("n"))),s.call(l,s.getLocal("pFrom"),d,s.getLocal("pTo")),s.setLocal("pFrom",s.i32_add(s.getLocal("pFrom"),s.i32_const(i))),s.setLocal("pTo",s.i32_add(s.getLocal("pTo"),s.i32_const(n))),s.call(o+"_mul",d,s.getLocal("pInc"),d),s.setLocal("i",s.i32_add(s.getLocal("i"),s.i32_const(1))),s.br(0)))),t.exportFunction(e)};const Wt=W,Zt=Ft,Xt=vt,$t=qt,te=zt,ee=Tt,ae=jt,oe=Ht,ie=Yt,ne=Jt,{bitLength:ce,modInv:le,isOdd:re,isNegative:se}=et;const de=W,_e=Ft,ue=vt,ge=qt,fe=zt,he=Tt,pe=jt,Le=Ht,me=Yt,Ae=Jt,{bitLength:Ie,isOdd:be,isNegative:ye}=et;var Ce=function(t,e){const a=e||"bn128";if(t.modules[a])return a;const o=21888242871839275222246405745257275088696311157297823662689037894645226208583n,i=21888242871839275222246405745257275088548364400416034343698204186575808495617n,n=Math.floor((ce(o-1n)-1)/64)+1,c=8*n,l=c,r=c,s=2*r,d=12*r,_=t.alloc(Wt.bigInt2BytesLE(i,l)),u=Zt(t,o,"f1m");Xt(t,i,"fr","frm");const g=t.alloc(Wt.bigInt2BytesLE(A(3n),r)),f=ee(t,"g1m","f1m",g);ae(t,"frm","frm","frm","frm_mul"),oe(t,"pol","frm"),ie(t,"qap","frm");const h=$t(t,"f1m_neg","f2m","f1m"),p=t.alloc([...Wt.bigInt2BytesLE(A(19485874751759354771024239261021720505790618469301721065564631296452457478373n),r),...Wt.bigInt2BytesLE(A(266929791119991161246907387137283842545076965332900288569378510910307636690n),r)]),L=ee(t,"g2m","f2m",p);function m(e,a){const o=t.addFunction(e);o.addParam("pG","i32"),o.addParam("pFr","i32"),o.addParam("pr","i32");const i=o.getCodeBuilder(),n=i.i32_const(t.alloc(c));o.addCode(i.call("frm_fromMontgomery",i.getLocal("pFr"),n),i.call(a,i.getLocal("pG"),n,i.i32_const(c),i.getLocal("pr"))),t.exportFunction(e)}function A(t){return BigInt(t)*(1n<<BigInt(8*r))%o}m("g1m_timesFr","g1m_timesScalar"),ae(t,"g1m","g1m","frm","g1m_timesFr"),m("g2m_timesFr","g2m_timesScalar"),ae(t,"g2m","g2m","frm","g2m_timesFr"),m("g1m_timesFrAffine","g1m_timesScalarAffine"),m("g2m_timesFrAffine","g2m_timesScalarAffine"),ne(t,"frm_batchApplyKey","fmr","frm",c,c,c,"frm_mul"),ne(t,"g1m_batchApplyKey","g1m","frm",3*c,3*c,c,"g1m_timesFr"),ne(t,"g1m_batchApplyKeyMixed","g1m","frm",2*c,3*c,c,"g1m_timesFrAffine"),ne(t,"g2m_batchApplyKey","g2m","frm",2*c*3,3*c*2,c,"g2m_timesFr"),ne(t,"g2m_batchApplyKeyMixed","g2m","frm",2*c*2,3*c*2,c,"g2m_timesFrAffine");const I=[1n,2n,1n],b=t.alloc([...Wt.bigInt2BytesLE(A(I[0]),r),...Wt.bigInt2BytesLE(A(I[1]),r),...Wt.bigInt2BytesLE(A(I[2]),r)]),y=[0n,1n,0n],C=t.alloc([...Wt.bigInt2BytesLE(A(y[0]),r),...Wt.bigInt2BytesLE(A(y[1]),r),...Wt.bigInt2BytesLE(A(y[2]),r)]),w=[[10857046999023057135944570762232829481370756359578518086990519993285655852781n,11559732032986387107991004021392285783925812861821192530917403151452391805634n],[8495653923123431417604973247489272438418190587263600148770280649306958101930n,4082367875863433681332203403145435568316851327593401208105741076214120093531n],[1n,0n]],B=t.alloc([...Wt.bigInt2BytesLE(A(w[0][0]),r),...Wt.bigInt2BytesLE(A(w[0][1]),r),...Wt.bigInt2BytesLE(A(w[1][0]),r),...Wt.bigInt2BytesLE(A(w[1][1]),r),...Wt.bigInt2BytesLE(A(w[2][0]),r),...Wt.bigInt2BytesLE(A(w[2][1]),r)]),x=[[0n,0n],[1n,0n],[0n,0n]],F=t.alloc([...Wt.bigInt2BytesLE(A(x[0][0]),r),...Wt.bigInt2BytesLE(A(x[0][1]),r),...Wt.bigInt2BytesLE(A(x[1][0]),r),...Wt.bigInt2BytesLE(A(x[1][1]),r),...Wt.bigInt2BytesLE(A(x[2][0]),r),...Wt.bigInt2BytesLE(A(x[2][1]),r)]),E=t.alloc([...Wt.bigInt2BytesLE(A(1),r),...Wt.bigInt2BytesLE(A(0),r),...Wt.bigInt2BytesLE(A(0),r),...Wt.bigInt2BytesLE(A(0),r),...Wt.bigInt2BytesLE(A(0),r),...Wt.bigInt2BytesLE(A(0),r),...Wt.bigInt2BytesLE(A(0),r),...Wt.bigInt2BytesLE(A(0),r),...Wt.bigInt2BytesLE(A(0),r),...Wt.bigInt2BytesLE(A(0),r),...Wt.bigInt2BytesLE(A(0),r),...Wt.bigInt2BytesLE(A(0),r)]),S=t.alloc([...Wt.bigInt2BytesLE(A(9),r),...Wt.bigInt2BytesLE(A(1),r)]),v=t.alloc([...Wt.bigInt2BytesLE(A(le(2n,o)),r),...Wt.bigInt2BytesLE(0n,r)]),P=S,O=t.alloc([...Wt.bigInt2BytesLE(A(19485874751759354771024239261021720505790618469301721065564631296452457478373n),r),...Wt.bigInt2BytesLE(A(266929791119991161246907387137283842545076965332900288569378510910307636690n),r)]);!function(){const e=t.addFunction(a+"_mulNR6");e.addParam("x","i32"),e.addParam("pr","i32");const o=e.getCodeBuilder();e.addCode(o.call(h+"_mul",o.i32_const(S),o.getLocal("x"),o.getLocal("pr")))}();const Q=te(t,a+"_mulNR6","f6m","f2m");!function(){const e=t.addFunction(a+"_mulNR12");e.addParam("x","i32"),e.addParam("pr","i32");const o=e.getCodeBuilder();e.addCode(o.call(h+"_mul",o.i32_const(S),o.i32_add(o.getLocal("x"),o.i32_const(4*c)),o.getLocal("pr")),o.call(h+"_copy",o.getLocal("x"),o.i32_add(o.getLocal("pr"),o.i32_const(2*c))),o.call(h+"_copy",o.i32_add(o.getLocal("x"),o.i32_const(2*c)),o.i32_add(o.getLocal("pr"),o.i32_const(4*c))))}();const q=$t(t,a+"_mulNR12","ftm",Q),U=function(t){let e=t;const a=[];for(;e>0n;)re(e)?a.push(1):a.push(0),e>>=1n;return a}(29793968203157093288n),M=t.alloc(U),z=3*s,D=U.length-1,G=U.reduce(((t,e)=>t+(0!=e?1:0)),0),k=6*c,T=3*c*2+(G+D+1)*z;t.modules[a]={n64:n,pG1gen:b,pG1zero:C,pG1b:g,pG2gen:B,pG2zero:F,pG2b:p,pq:t.modules.f1m.pq,pr:_,pOneT:E,prePSize:k,preQSize:T,r:i.toString(),q:o.toString()};const N=4965661367192848881n;function R(e){const i=[[[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n]],[[1n,0n],[8376118865763821496583973867626364092589906065868298776909617916018768340080n,16469823323077808223889137241176536799009286646108169935659301613961712198316n],[21888242871839275220042445260109153167277707414472061641714758635765020556617n,0n],[11697423496358154304825782922584725312912383441159505038794027105778954184319n,303847389135065887422783454877609941456349188919719272345083954437860409601n],[21888242871839275220042445260109153167277707414472061641714758635765020556616n,0n],[3321304630594332808241809054958361220322477375291206261884409189760185844239n,5722266937896532885780051958958348231143373700109372999374820235121374419868n],[21888242871839275222246405745257275088696311157297823662689037894645226208582n,0n],[13512124006075453725662431877630910996106405091429524885779419978626457868503n,5418419548761466998357268504080738289687024511189653727029736280683514010267n],[2203960485148121921418603742825762020974279258880205651966n,0n],[10190819375481120917420622822672549775783927716138318623895010788866272024264n,21584395482704209334823622290379665147239961968378104390343953940207365798982n],[2203960485148121921418603742825762020974279258880205651967n,0n],[18566938241244942414004596690298913868373833782006617400804628704885040364344n,16165975933942742336466353786298926857552937457188450663314217659523851788715n]]],n=[[[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n]],[[1n,0n],[21575463638280843010398324269430826099269044274347216827212613867836435027261n,10307601595873709700152284273816112264069230130616436755625194854815875713954n],[21888242871839275220042445260109153167277707414472061641714758635765020556616n,0n],[3772000881919853776433695186713858239009073593817195771773381919316419345261n,2236595495967245188281701248203181795121068902605861227855261137820944008926n],[2203960485148121921418603742825762020974279258880205651966n,0n],[18429021223477853657660792034369865839114504446431234726392080002137598044644n,9344045779998320333812420223237981029506012124075525679208581902008406485703n]],[[1n,0n],[2581911344467009335267311115468803099551665605076196740867805258568234346338n,19937756971775647987995932169929341994314640652964949448313374472400716661030n],[2203960485148121921418603742825762020974279258880205651966n,0n],[5324479202449903542726783395506214481928257762400643279780343368557297135718n,16208900380737693084919495127334387981393726419856888799917914180988844123039n],[21888242871839275220042445260109153167277707414472061641714758635765020556616n,0n],[13981852324922362344252311234282257507216387789820983642040889267519694726527n,7629828391165209371577384193250820201684255241773809077146787135900891633097n]]],c=t.addFunction(a+"__frobeniusMap"+e);c.addParam("x","i32"),c.addParam("r","i32");const l=c.getCodeBuilder();for(let a=0;a<6;a++){const o=0==a?l.getLocal("x"):l.i32_add(l.getLocal("x"),l.i32_const(a*s)),_=o,g=l.i32_add(l.getLocal("x"),l.i32_const(a*s+r)),f=0==a?l.getLocal("r"):l.i32_add(l.getLocal("r"),l.i32_const(a*s)),p=f,L=l.i32_add(l.getLocal("r"),l.i32_const(a*s+r)),m=d(i[Math.floor(a/3)][e%12],n[a%3][e%6]),I=t.alloc([...Wt.bigInt2BytesLE(A(m[0]),32),...Wt.bigInt2BytesLE(A(m[1]),32)]);e%2==1?c.addCode(l.call(u+"_copy",_,p),l.call(u+"_neg",g,L),l.call(h+"_mul",f,l.i32_const(I),f)):c.addCode(l.call(h+"_mul",o,l.i32_const(I),f))}function d(t,e){const a=BigInt(t[0]),i=BigInt(t[1]),n=BigInt(e[0]),c=BigInt(e[1]),l=[(a*n-i*c)%o,(a*c+i*n)%o];return se(l[0])&&(l[0]=l[0]+o),l}}function K(e,o){const i=function(t){let e=t;const a=[];for(;e>0n;){if(re(e)){const t=2-Number(e%4n);a.push(t),e-=BigInt(t)}else a.push(0);e>>=1n}return a}(e).map((t=>-1==t?255:t)),n=t.alloc(i),c=t.addFunction(a+"__cyclotomicExp_"+o);c.addParam("x","i32"),c.addParam("r","i32"),c.addLocal("bit","i32"),c.addLocal("i","i32");const l=c.getCodeBuilder(),r=l.getLocal("x"),s=l.getLocal("r"),_=l.i32_const(t.alloc(d));c.addCode(l.call(q+"_conjugate",r,_),l.call(q+"_one",s),l.if(l.teeLocal("bit",l.i32_load8_s(l.i32_const(i.length-1),n)),l.if(l.i32_eq(l.getLocal("bit"),l.i32_const(1)),l.call(q+"_mul",s,r,s),l.call(q+"_mul",s,_,s))),l.setLocal("i",l.i32_const(i.length-2)),l.block(l.loop(l.call(a+"__cyclotomicSquare",s,s),l.if(l.teeLocal("bit",l.i32_load8_s(l.getLocal("i"),n)),l.if(l.i32_eq(l.getLocal("bit"),l.i32_const(1)),l.call(q+"_mul",s,r,s),l.call(q+"_mul",s,_,s))),l.br_if(1,l.i32_eqz(l.getLocal("i"))),l.setLocal("i",l.i32_sub(l.getLocal("i"),l.i32_const(1))),l.br(0))))}function V(){!function(){const e=t.addFunction(a+"__cyclotomicSquare");e.addParam("x","i32"),e.addParam("r","i32");const o=e.getCodeBuilder(),i=o.getLocal("x"),n=o.i32_add(o.getLocal("x"),o.i32_const(s)),c=o.i32_add(o.getLocal("x"),o.i32_const(2*s)),l=o.i32_add(o.getLocal("x"),o.i32_const(3*s)),r=o.i32_add(o.getLocal("x"),o.i32_const(4*s)),d=o.i32_add(o.getLocal("x"),o.i32_const(5*s)),_=o.getLocal("r"),u=o.i32_add(o.getLocal("r"),o.i32_const(s)),g=o.i32_add(o.getLocal("r"),o.i32_const(2*s)),f=o.i32_add(o.getLocal("r"),o.i32_const(3*s)),p=o.i32_add(o.getLocal("r"),o.i32_const(4*s)),L=o.i32_add(o.getLocal("r"),o.i32_const(5*s)),m=o.i32_const(t.alloc(s)),A=o.i32_const(t.alloc(s)),I=o.i32_const(t.alloc(s)),b=o.i32_const(t.alloc(s)),y=o.i32_const(t.alloc(s)),C=o.i32_const(t.alloc(s)),w=o.i32_const(t.alloc(s)),B=o.i32_const(t.alloc(s));e.addCode(o.call(h+"_mul",i,r,w),o.call(h+"_mul",r,o.i32_const(S),m),o.call(h+"_add",i,m,m),o.call(h+"_add",i,r,B),o.call(h+"_mul",B,m,m),o.call(h+"_mul",o.i32_const(S),w,B),o.call(h+"_add",w,B,B),o.call(h+"_sub",m,B,m),o.call(h+"_add",w,w,A),o.call(h+"_mul",l,c,w),o.call(h+"_mul",c,o.i32_const(S),I),o.call(h+"_add",l,I,I),o.call(h+"_add",l,c,B),o.call(h+"_mul",B,I,I),o.call(h+"_mul",o.i32_const(S),w,B),o.call(h+"_add",w,B,B),o.call(h+"_sub",I,B,I),o.call(h+"_add",w,w,b),o.call(h+"_mul",n,d,w),o.call(h+"_mul",d,o.i32_const(S),y),o.call(h+"_add",n,y,y),o.call(h+"_add",n,d,B),o.call(h+"_mul",B,y,y),o.call(h+"_mul",o.i32_const(S),w,B),o.call(h+"_add",w,B,B),o.call(h+"_sub",y,B,y),o.call(h+"_add",w,w,C),o.call(h+"_sub",m,i,_),o.call(h+"_add",_,_,_),o.call(h+"_add",m,_,_),o.call(h+"_add",A,r,p),o.call(h+"_add",p,p,p),o.call(h+"_add",A,p,p),o.call(h+"_mul",C,o.i32_const(P),B),o.call(h+"_add",B,l,f),o.call(h+"_add",f,f,f),o.call(h+"_add",B,f,f),o.call(h+"_sub",y,c,g),o.call(h+"_add",g,g,g),o.call(h+"_add",y,g,g),o.call(h+"_sub",I,n,u),o.call(h+"_add",u,u,u),o.call(h+"_add",I,u,u),o.call(h+"_add",b,d,L),o.call(h+"_add",L,L,L),o.call(h+"_add",b,L,L))}(),K(N,"w0");const e=t.addFunction(a+"__finalExponentiationLastChunk");e.addParam("x","i32"),e.addParam("r","i32");const o=e.getCodeBuilder(),i=o.getLocal("x"),n=o.getLocal("r"),c=o.i32_const(t.alloc(d)),l=o.i32_const(t.alloc(d)),r=o.i32_const(t.alloc(d)),_=o.i32_const(t.alloc(d)),u=o.i32_const(t.alloc(d)),g=o.i32_const(t.alloc(d)),f=o.i32_const(t.alloc(d)),p=o.i32_const(t.alloc(d)),L=o.i32_const(t.alloc(d)),m=o.i32_const(t.alloc(d)),A=o.i32_const(t.alloc(d)),I=o.i32_const(t.alloc(d)),b=o.i32_const(t.alloc(d)),y=o.i32_const(t.alloc(d)),C=o.i32_const(t.alloc(d)),w=o.i32_const(t.alloc(d)),B=o.i32_const(t.alloc(d)),x=o.i32_const(t.alloc(d)),F=o.i32_const(t.alloc(d)),E=o.i32_const(t.alloc(d)),v=o.i32_const(t.alloc(d));e.addCode(o.call(a+"__cyclotomicExp_w0",i,c),o.call(q+"_conjugate",c,c),o.call(a+"__cyclotomicSquare",c,l),o.call(a+"__cyclotomicSquare",l,r),o.call(q+"_mul",r,l,_),o.call(a+"__cyclotomicExp_w0",_,u),o.call(q+"_conjugate",u,u),o.call(a+"__cyclotomicSquare",u,g),o.call(a+"__cyclotomicExp_w0",g,f),o.call(q+"_conjugate",f,f),o.call(q+"_conjugate",_,p),o.call(q+"_conjugate",f,L),o.call(q+"_mul",L,u,m),o.call(q+"_mul",m,p,A),o.call(q+"_mul",A,l,I),o.call(q+"_mul",A,u,b),o.call(q+"_mul",b,i,y),o.call(a+"__frobeniusMap1",I,C),o.call(q+"_mul",C,y,w),o.call(a+"__frobeniusMap2",A,B),o.call(q+"_mul",B,w,x),o.call(q+"_conjugate",i,F),o.call(q+"_mul",F,I,E),o.call(a+"__frobeniusMap3",E,v),o.call(q+"_mul",v,x,n))}const j=t.alloc(k),H=t.alloc(T);function Y(e){const o=t.addFunction(a+"_pairingEq"+e);for(let t=0;t<e;t++)o.addParam("p_"+t,"i32"),o.addParam("q_"+t,"i32");o.addParam("c","i32"),o.setReturnType("i32");const i=o.getCodeBuilder(),n=i.i32_const(t.alloc(d)),c=i.i32_const(t.alloc(d));o.addCode(i.call(q+"_one",n));for(let t=0;t<e;t++)o.addCode(i.call(a+"_prepareG1",i.getLocal("p_"+t),i.i32_const(j))),o.addCode(i.call(a+"_prepareG2",i.getLocal("q_"+t),i.i32_const(H))),o.addCode(i.call(a+"_millerLoop",i.i32_const(j),i.i32_const(H),c)),o.addCode(i.call(q+"_mul",n,c,n));o.addCode(i.call(a+"_finalExponentiation",n,n)),o.addCode(i.call(q+"_eq",n,i.getLocal("c")))}!function(){const e=t.addFunction(a+"_prepAddStep");e.addParam("pQ","i32"),e.addParam("pR","i32"),e.addParam("pCoef","i32");const o=e.getCodeBuilder(),i=o.getLocal("pQ"),n=o.i32_add(o.getLocal("pQ"),o.i32_const(s)),c=o.getLocal("pR"),l=o.i32_add(o.getLocal("pR"),o.i32_const(s)),r=o.i32_add(o.getLocal("pR"),o.i32_const(2*s)),d=o.getLocal("pCoef"),_=o.i32_add(o.getLocal("pCoef"),o.i32_const(s)),u=o.i32_add(o.getLocal("pCoef"),o.i32_const(2*s)),g=_,f=o.i32_const(t.alloc(s)),p=o.i32_const(t.alloc(s)),L=o.i32_const(t.alloc(s)),m=o.i32_const(t.alloc(s)),A=o.i32_const(t.alloc(s)),I=o.i32_const(t.alloc(s)),b=o.i32_const(t.alloc(s));e.addCode(o.call(h+"_mul",i,r,g),o.call(h+"_sub",c,g,g),o.call(h+"_mul",n,r,f),o.call(h+"_sub",l,f,f),o.call(h+"_square",g,p),o.call(h+"_square",f,L),o.call(h+"_mul",g,p,m),o.call(h+"_mul",c,p,A),o.call(h+"_add",A,A,b),o.call(h+"_mul",r,L,I),o.call(h+"_add",m,I,I),o.call(h+"_sub",I,b,I),o.call(h+"_mul",g,I,c),o.call(h+"_mul",m,l,l),o.call(h+"_sub",A,I,b),o.call(h+"_mul",f,b,b),o.call(h+"_sub",b,l,l),o.call(h+"_mul",r,m,r),o.call(h+"_mul",g,n,b),o.call(h+"_mul",f,i,d),o.call(h+"_sub",d,b,d),o.call(h+"_mul",d,o.i32_const(P),d),o.call(h+"_neg",f,u))}(),function(){const e=t.addFunction(a+"_prepDblStep");e.addParam("pR","i32"),e.addParam("pCoef","i32");const o=e.getCodeBuilder(),i=o.getLocal("pR"),n=o.i32_add(o.getLocal("pR"),o.i32_const(s)),c=o.i32_add(o.getLocal("pR"),o.i32_const(2*s)),l=o.getLocal("pCoef"),r=o.i32_add(o.getLocal("pCoef"),o.i32_const(s)),d=o.i32_add(o.getLocal("pCoef"),o.i32_const(2*s)),_=o.i32_const(t.alloc(s)),u=o.i32_const(t.alloc(s)),g=o.i32_const(t.alloc(s)),f=o.i32_const(t.alloc(s)),p=o.i32_const(t.alloc(s)),L=o.i32_const(t.alloc(s)),m=o.i32_const(t.alloc(s)),A=o.i32_const(t.alloc(s)),I=o.i32_const(t.alloc(s)),b=o.i32_const(t.alloc(s)),y=o.i32_const(t.alloc(s)),C=o.i32_const(t.alloc(s));e.addCode(o.call(h+"_mul",n,o.i32_const(v),_),o.call(h+"_mul",i,_,_),o.call(h+"_square",n,u),o.call(h+"_square",c,g),o.call(h+"_add",g,g,f),o.call(h+"_add",f,g,f),o.call(h+"_mul",o.i32_const(O),f,p),o.call(h+"_add",p,p,L),o.call(h+"_add",p,L,L),o.call(h+"_add",u,L,m),o.call(h+"_mul",m,o.i32_const(v),m),o.call(h+"_add",u,g,C),o.call(h+"_add",n,c,A),o.call(h+"_square",A,A),o.call(h+"_sub",A,C,A),o.call(h+"_sub",p,u,I),o.call(h+"_square",i,b),o.call(h+"_square",p,y),o.call(h+"_sub",u,L,C),o.call(h+"_mul",_,C,i),o.call(h+"_add",y,y,C),o.call(h+"_add",y,C,C),o.call(h+"_square",m,n),o.call(h+"_sub",n,C,n),o.call(h+"_mul",u,A,c),o.call(h+"_mul",o.i32_const(P),I,l),o.call(h+"_neg",A,r),o.call(h+"_add",b,b,d),o.call(h+"_add",b,d,d))}(),function(){const e=t.addFunction(a+"_prepareG1");e.addParam("pP","i32"),e.addParam("ppreP","i32");const o=e.getCodeBuilder();e.addCode(o.call(f+"_normalize",o.getLocal("pP"),o.getLocal("ppreP")))}(),function(){!function(){const e=t.addFunction(a+"_mulByQ");e.addParam("p1","i32"),e.addParam("pr","i32");const o=e.getCodeBuilder(),i=o.getLocal("p1"),n=o.i32_add(o.getLocal("p1"),o.i32_const(s)),c=o.i32_add(o.getLocal("p1"),o.i32_const(2*s)),l=o.getLocal("pr"),d=o.i32_add(o.getLocal("pr"),o.i32_const(s)),_=o.i32_add(o.getLocal("pr"),o.i32_const(2*s)),u=o.i32_const(t.alloc([...Wt.bigInt2BytesLE(A("21575463638280843010398324269430826099269044274347216827212613867836435027261"),r),...Wt.bigInt2BytesLE(A("10307601595873709700152284273816112264069230130616436755625194854815875713954"),r)])),g=o.i32_const(t.alloc([...Wt.bigInt2BytesLE(A("2821565182194536844548159561693502659359617185244120367078079554186484126554"),r),...Wt.bigInt2BytesLE(A("3505843767911556378687030309984248845540243509899259641013678093033130930403"),r)]));e.addCode(o.call(h+"_conjugate",i,l),o.call(h+"_mul",u,l,l),o.call(h+"_conjugate",n,d),o.call(h+"_mul",g,d,d),o.call(h+"_conjugate",c,_))}();const e=t.addFunction(a+"_prepareG2");e.addParam("pQ","i32"),e.addParam("ppreQ","i32"),e.addLocal("pCoef","i32"),e.addLocal("i","i32");const o=e.getCodeBuilder(),i=o.getLocal("pQ"),n=t.alloc(3*s),c=o.i32_const(n),l=o.i32_const(n),d=o.i32_const(n+s),_=o.i32_const(n+2*s),u=o.i32_add(o.getLocal("ppreQ"),o.i32_const(0)),g=o.i32_add(o.getLocal("ppreQ"),o.i32_const(s)),f=t.alloc(3*s),p=o.i32_const(f),m=t.alloc(3*s),I=o.i32_const(m),b=o.i32_const(m+s);e.addCode(o.call(L+"_normalize",i,u),o.call(h+"_copy",u,l),o.call(h+"_copy",g,d),o.call(h+"_one",_)),e.addCode(o.setLocal("pCoef",o.i32_add(o.getLocal("ppreQ"),o.i32_const(3*s))),o.setLocal("i",o.i32_const(U.length-2)),o.block(o.loop(o.call(a+"_prepDblStep",c,o.getLocal("pCoef")),o.setLocal("pCoef",o.i32_add(o.getLocal("pCoef"),o.i32_const(z))),o.if(o.i32_load8_s(o.getLocal("i"),M),[...o.call(a+"_prepAddStep",u,c,o.getLocal("pCoef")),...o.setLocal("pCoef",o.i32_add(o.getLocal("pCoef"),o.i32_const(z)))]),o.br_if(1,o.i32_eqz(o.getLocal("i"))),o.setLocal("i",o.i32_sub(o.getLocal("i"),o.i32_const(1))),o.br(0)))),e.addCode(o.call(a+"_mulByQ",u,p),o.call(a+"_mulByQ",p,I)),e.addCode(o.call(h+"_neg",b,b),o.call(a+"_prepAddStep",p,c,o.getLocal("pCoef")),o.setLocal("pCoef",o.i32_add(o.getLocal("pCoef"),o.i32_const(z))),o.call(a+"_prepAddStep",I,c,o.getLocal("pCoef")),o.setLocal("pCoef",o.i32_add(o.getLocal("pCoef"),o.i32_const(z))))}(),function(){const e=t.addFunction(a+"__mulBy024");e.addParam("pEll0","i32"),e.addParam("pEllVW","i32"),e.addParam("pEllVV","i32"),e.addParam("pR","i32");const o=e.getCodeBuilder(),i=o.getLocal("pEll0"),n=o.getLocal("pEllVV"),l=o.getLocal("pEllVW"),r=o.getLocal("pR"),d=o.i32_add(o.getLocal("pR"),o.i32_const(2*c)),_=o.i32_add(o.getLocal("pR"),o.i32_const(4*c)),u=o.i32_add(o.getLocal("pR"),o.i32_const(6*c)),g=o.i32_add(o.getLocal("pR"),o.i32_const(8*c)),f=o.i32_add(o.getLocal("pR"),o.i32_const(10*c)),p=o.i32_const(t.alloc(s)),L=o.i32_const(t.alloc(s)),m=o.i32_const(t.alloc(s)),A=o.i32_const(t.alloc(s)),I=o.i32_const(t.alloc(s)),b=o.i32_const(t.alloc(s)),y=o.i32_const(t.alloc(s)),C=o.i32_const(t.alloc(s)),w=o.i32_const(t.alloc(s)),B=o.i32_const(t.alloc(s)),x=o.i32_const(t.alloc(s));e.addCode(o.call(h+"_mul",r,i,y),o.call(h+"_mul",_,n,C),o.call(h+"_mul",g,l,w),o.call(h+"_add",r,g,m),o.call(h+"_add",r,_,L),o.call(h+"_add",d,u,A),o.call(h+"_add",A,f,A),o.call(h+"_mul",d,n,B),o.call(h+"_add",B,w,I),o.call(h+"_mul",o.i32_const(S),I,b),o.call(h+"_add",b,y,r),o.call(h+"_mul",f,l,I),o.call(h+"_add",B,I,B),o.call(h+"_add",I,C,I),o.call(h+"_mul",o.i32_const(S),I,b),o.call(h+"_mul",d,i,I),o.call(h+"_add",B,I,B),o.call(h+"_add",b,I,d),o.call(h+"_add",i,n,p),o.call(h+"_mul",L,p,I),o.call(h+"_add",y,C,x),o.call(h+"_sub",I,x,I),o.call(h+"_mul",u,l,b),o.call(h+"_add",B,b,B),o.call(h+"_add",_,g,p),o.call(h+"_add",I,b,_),o.call(h+"_add",n,l,L),o.call(h+"_mul",L,p,I),o.call(h+"_add",C,w,x),o.call(h+"_sub",I,x,I),o.call(h+"_mul",o.i32_const(S),I,b),o.call(h+"_mul",u,i,I),o.call(h+"_add",B,I,B),o.call(h+"_add",b,I,u),o.call(h+"_mul",f,n,I),o.call(h+"_add",B,I,B),o.call(h+"_mul",o.i32_const(S),I,b),o.call(h+"_add",i,l,p),o.call(h+"_mul",m,p,I),o.call(h+"_add",y,w,x),o.call(h+"_sub",I,x,I),o.call(h+"_add",b,I,g),o.call(h+"_add",i,n,p),o.call(h+"_add",p,l,p),o.call(h+"_mul",A,p,I),o.call(h+"_sub",I,B,f))}(),function(){const e=t.addFunction(a+"__mulBy024Old");e.addParam("pEll0","i32"),e.addParam("pEllVW","i32"),e.addParam("pEllVV","i32"),e.addParam("pR","i32");const o=e.getCodeBuilder(),i=o.getLocal("pEll0"),n=o.getLocal("pEllVV"),c=o.getLocal("pEllVW"),l=o.getLocal("pR"),r=t.alloc(d),_=o.i32_const(r),u=o.i32_const(r),g=o.i32_const(r+s),f=o.i32_const(r+2*s),p=o.i32_const(r+3*s),L=o.i32_const(r+4*s),m=o.i32_const(r+5*s);e.addCode(o.call(h+"_copy",i,u),o.call(h+"_zero",g),o.call(h+"_copy",n,f),o.call(h+"_zero",p),o.call(h+"_copy",c,L),o.call(h+"_zero",m),o.call(q+"_mul",_,l,l))}(),function(){const e=t.addFunction(a+"_millerLoop");e.addParam("ppreP","i32"),e.addParam("ppreQ","i32"),e.addParam("r","i32"),e.addLocal("pCoef","i32"),e.addLocal("i","i32");const o=e.getCodeBuilder(),i=o.getLocal("ppreP"),n=o.i32_add(o.getLocal("ppreP"),o.i32_const(r)),c=o.getLocal("pCoef"),l=o.i32_add(o.getLocal("pCoef"),o.i32_const(s)),d=o.i32_add(o.getLocal("pCoef"),o.i32_const(2*s)),_=t.alloc(s),u=o.i32_const(_),g=t.alloc(s),f=o.i32_const(g),p=o.getLocal("r");e.addCode(o.call(q+"_one",p),o.setLocal("pCoef",o.i32_add(o.getLocal("ppreQ"),o.i32_const(3*s))),o.setLocal("i",o.i32_const(U.length-2)),o.block(o.loop(o.call(q+"_square",p,p),o.call(h+"_mul1",l,n,u),o.call(h+"_mul1",d,i,f),o.call(a+"__mulBy024",c,u,f,p),o.setLocal("pCoef",o.i32_add(o.getLocal("pCoef"),o.i32_const(z))),o.if(o.i32_load8_s(o.getLocal("i"),M),[...o.call(h+"_mul1",l,n,u),...o.call(h+"_mul1",d,i,f),...o.call(a+"__mulBy024",c,u,f,p),...o.setLocal("pCoef",o.i32_add(o.getLocal("pCoef"),o.i32_const(z)))]),o.br_if(1,o.i32_eqz(o.getLocal("i"))),o.setLocal("i",o.i32_sub(o.getLocal("i"),o.i32_const(1))),o.br(0)))),e.addCode(o.call(h+"_mul1",l,n,u),o.call(h+"_mul1",d,i,f),o.call(a+"__mulBy024",c,u,f,p),o.setLocal("pCoef",o.i32_add(o.getLocal("pCoef"),o.i32_const(z))),o.call(h+"_mul1",l,n,u),o.call(h+"_mul1",d,i,f),o.call(a+"__mulBy024",c,u,f,p),o.setLocal("pCoef",o.i32_add(o.getLocal("pCoef"),o.i32_const(z))))}();for(let J=0;J<10;J++)R(J),t.exportFunction(a+"__frobeniusMap"+J);!function(){const e=t.addFunction(a+"_finalExponentiationOld");e.addParam("x","i32"),e.addParam("r","i32");const o=t.alloc(Wt.bigInt2BytesLE(552484233613224096312617126783173147097382103762957654188882734314196910839907541213974502761540629817009608548654680343627701153829446747810907373256841551006201639677726139946029199968412598804882391702273019083653272047566316584365559776493027495458238373902875937659943504873220554161550525926302303331747463515644711876653177129578303191095900909191624817826566688241804408081892785725967931714097716709526092261278071952560171111444072049229123565057483750161460024353346284167282452756217662335528813519139808291170539072125381230815729071544861602750936964829313608137325426383735122175229541155376346436093930287402089517426973178917569713384748081827255472576937471496195752727188261435633271238710131736096299798168852925540549342330775279877006784354801422249722573783561685179618816480037695005515426162362431072245638324744480n,352)),i=e.getCodeBuilder();e.addCode(i.call(q+"_exp",i.getLocal("x"),i.i32_const(o),i.i32_const(352),i.getLocal("r")))}(),function(){!function(){const e=t.addFunction(a+"__finalExponentiationFirstChunk");e.addParam("x","i32"),e.addParam("r","i32");const o=e.getCodeBuilder(),i=o.getLocal("x"),n=i,l=o.i32_add(i,o.i32_const(6*c)),r=o.getLocal("r"),s=t.alloc(d),_=o.i32_const(s),u=_,g=o.i32_const(s+6*c),f=o.i32_const(t.alloc(d)),h=o.i32_const(t.alloc(d)),p=o.i32_const(t.alloc(d));e.addCode(o.call(Q+"_copy",n,u),o.call(Q+"_neg",l,g),o.call(q+"_inverse",i,f),o.call(q+"_mul",_,f,h),o.call(a+"__frobeniusMap2",h,p),o.call(q+"_mul",h,p,r))}(),V();const e=t.addFunction(a+"_finalExponentiation");e.addParam("x","i32"),e.addParam("r","i32");const o=e.getCodeBuilder(),i=o.getLocal("x"),n=o.getLocal("r"),l=o.i32_const(t.alloc(d));e.addCode(o.call(a+"__finalExponentiationFirstChunk",i,l),o.call(a+"__finalExponentiationLastChunk",l,n))}();for(let J=1;J<=5;J++)Y(J),t.exportFunction(a+"_pairingEq"+J);!function(){const e=t.addFunction(a+"_pairing");e.addParam("p","i32"),e.addParam("q","i32"),e.addParam("r","i32");const o=e.getCodeBuilder(),i=o.i32_const(t.alloc(d));e.addCode(o.call(a+"_prepareG1",o.getLocal("p"),o.i32_const(j))),e.addCode(o.call(a+"_prepareG2",o.getLocal("q"),o.i32_const(H))),e.addCode(o.call(a+"_millerLoop",o.i32_const(j),o.i32_const(H),i)),e.addCode(o.call(a+"_finalExponentiation",i,o.getLocal("r")))}(),t.exportFunction(a+"_pairing"),t.exportFunction(a+"_prepareG1"),t.exportFunction(a+"_prepareG2"),t.exportFunction(a+"_millerLoop"),t.exportFunction(a+"_finalExponentiation"),t.exportFunction(a+"_finalExponentiationOld"),t.exportFunction(a+"__mulBy024"),t.exportFunction(a+"__mulBy024Old"),t.exportFunction(a+"__cyclotomicSquare"),t.exportFunction(a+"__cyclotomicExp_w0")},we=function(t,e){const a=e||"bls12381";if(t.modules[a])return a;const o=0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaabn,i=0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001n,n=Math.floor((Ie(o-1n)-1)/64)+1,c=8*n,l=c,r=2*l,s=12*l,d=Math.floor((Ie(i-1n)-1)/64)+1,_=8*d,u=_,g=t.alloc(de.bigInt2BytesLE(i,u)),f=_e(t,o,"f1m","intq");ue(t,i,"fr","frm","intr");const h=t.alloc(de.bigInt2BytesLE(b(4n),l)),p=he(t,"g1m","f1m",h);pe(t,"frm","frm","frm","frm_mul"),Le(t,"pol","frm"),me(t,"qap","frm");const L=ge(t,"f1m_neg","f2m","f1m"),m=t.alloc([...de.bigInt2BytesLE(b(4n),l),...de.bigInt2BytesLE(b(4n),l)]),A=he(t,"g2m","f2m",m);function I(e,a){const o=t.addFunction(e);o.addParam("pG","i32"),o.addParam("pFr","i32"),o.addParam("pr","i32");const i=o.getCodeBuilder(),n=i.i32_const(t.alloc(_));o.addCode(i.call("frm_fromMontgomery",i.getLocal("pFr"),n),i.call(a,i.getLocal("pG"),n,i.i32_const(_),i.getLocal("pr"))),t.exportFunction(e)}function b(t){return BigInt(t)*(1n<<BigInt(8*l))%o}I("g1m_timesFr","g1m_timesScalar"),pe(t,"g1m","g1m","frm","g1m_timesFr"),I("g2m_timesFr","g2m_timesScalar"),pe(t,"g2m","g2m","frm","g2m_timesFr"),I("g1m_timesFrAffine","g1m_timesScalarAffine"),I("g2m_timesFrAffine","g2m_timesScalarAffine"),Ae(t,"frm_batchApplyKey","fmr","frm",_,_,_,"frm_mul"),Ae(t,"g1m_batchApplyKey","g1m","frm",3*c,3*c,_,"g1m_timesFr"),Ae(t,"g1m_batchApplyKeyMixed","g1m","frm",2*c,3*c,_,"g1m_timesFrAffine"),Ae(t,"g2m_batchApplyKey","g2m","frm",2*c*3,3*c*2,_,"g2m_timesFr"),Ae(t,"g2m_batchApplyKeyMixed","g2m","frm",2*c*2,3*c*2,_,"g2m_timesFrAffine");const y=[3685416753713387016781088315183077757961620795782546409894578378688607592378376318836054947676345821548104185464507n,1339506544944476473020471379941921221584933875938349620426543736416511423956333506472724655353366534992391756441569n,1n],C=t.alloc([...de.bigInt2BytesLE(b(y[0]),l),...de.bigInt2BytesLE(b(y[1]),l),...de.bigInt2BytesLE(b(y[2]),l)]),w=[0n,1n,0n],B=t.alloc([...de.bigInt2BytesLE(b(w[0]),l),...de.bigInt2BytesLE(b(w[1]),l),...de.bigInt2BytesLE(b(w[2]),l)]),x=[[352701069587466618187139116011060144890029952792775240219908644239793785735715026873347600343865175952761926303160n,3059144344244213709971259814753781636986470325476647558659373206291635324768958432433509563104347017837885763365758n],[1985150602287291935568054521177171638300868978215655730859378665066344726373823718423869104263333984641494340347905n,927553665492332455747201965776037880757740193453592970025027978793976877002675564980949289727957565575433344219582n],[1n,0n]],F=t.alloc([...de.bigInt2BytesLE(b(x[0][0]),l),...de.bigInt2BytesLE(b(x[0][1]),l),...de.bigInt2BytesLE(b(x[1][0]),l),...de.bigInt2BytesLE(b(x[1][1]),l),...de.bigInt2BytesLE(b(x[2][0]),l),...de.bigInt2BytesLE(b(x[2][1]),l)]),E=[[0n,0n],[1n,0n],[0n,0n]],S=t.alloc([...de.bigInt2BytesLE(b(E[0][0]),l),...de.bigInt2BytesLE(b(E[0][1]),l),...de.bigInt2BytesLE(b(E[1][0]),l),...de.bigInt2BytesLE(b(E[1][1]),l),...de.bigInt2BytesLE(b(E[2][0]),l),...de.bigInt2BytesLE(b(E[2][1]),l)]),v=t.alloc([...de.bigInt2BytesLE(b(1n),l),...de.bigInt2BytesLE(b(0n),l),...de.bigInt2BytesLE(b(0n),l),...de.bigInt2BytesLE(b(0n),l),...de.bigInt2BytesLE(b(0n),l),...de.bigInt2BytesLE(b(0n),l),...de.bigInt2BytesLE(b(0n),l),...de.bigInt2BytesLE(b(0n),l),...de.bigInt2BytesLE(b(0n),l),...de.bigInt2BytesLE(b(0n),l),...de.bigInt2BytesLE(b(0n),l),...de.bigInt2BytesLE(b(0n),l)]),P=t.alloc([...de.bigInt2BytesLE(b(1n),l),...de.bigInt2BytesLE(b(1n),l)]);!function(){const e=t.addFunction(L+"_mulNR");e.addParam("x","i32"),e.addParam("pr","i32");const a=e.getCodeBuilder(),o=a.i32_const(t.alloc(l)),i=a.getLocal("x"),n=a.i32_add(a.getLocal("x"),a.i32_const(l)),c=a.getLocal("pr"),r=a.i32_add(a.getLocal("pr"),a.i32_const(l));e.addCode(a.call(f+"_copy",i,o),a.call(f+"_sub",i,n,c),a.call(f+"_add",o,n,r))}();const O=fe(t,L+"_mulNR","f6m","f2m");!function(){const e=t.addFunction(O+"_mulNR");e.addParam("x","i32"),e.addParam("pr","i32");const a=e.getCodeBuilder(),o=a.i32_const(t.alloc(2*l));e.addCode(a.call(L+"_copy",a.getLocal("x"),o),a.call(L+"_mulNR",a.i32_add(a.getLocal("x"),a.i32_const(4*c)),a.getLocal("pr")),a.call(L+"_copy",a.i32_add(a.getLocal("x"),a.i32_const(2*c)),a.i32_add(a.getLocal("pr"),a.i32_const(4*c))),a.call(L+"_copy",o,a.i32_add(a.getLocal("pr"),a.i32_const(2*c))))}();const Q=ge(t,O+"_mulNR","ftm",O),q=function(t){let e=t;const a=[];for(;e>0n;)be(e)?a.push(1):a.push(0),e>>=1n;return a}(0xd201000000010000n),U=t.alloc(q),M=3*r,z=q.length-1,D=q.reduce(((t,e)=>t+(0!=e?1:0)),0),G=6*c,k=3*c*2+(D+z+1)*M,T=15132376222941642752n;function N(e){const a=[[[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n]],[[1n,0n],[3850754370037169011952147076051364057158807420970682438676050522613628423219637725072182697113062777891589506424760n,151655185184498381465642749684540099398075398968325446656007613510403227271200139370504932015952886146304766135027n],[793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620351n,0n],[2973677408986561043442465346520108879172042883009249989176415018091420807192182638567116318576472649347015917690530n,1028732146235106349975324479215795277384839936929757896155643118032610843298655225875571310552543014690878354869257n],[793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620350n,0n],[3125332594171059424908108096204648978570118281977575435832422631601824034463382777937621250592425535493320683825557n,877076961050607968509681729531255177986764537961432449499635504522207616027455086505066378536590128544573588734230n],[4002409555221667393417789825735904156556882819939007885332058136124031650490837864442687629129015664037894272559786n,0n],[151655185184498381465642749684540099398075398968325446656007613510403227271200139370504932015952886146304766135027n,3850754370037169011952147076051364057158807420970682438676050522613628423219637725072182697113062777891589506424760n],[4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436n,0n],[1028732146235106349975324479215795277384839936929757896155643118032610843298655225875571310552543014690878354869257n,2973677408986561043442465346520108879172042883009249989176415018091420807192182638567116318576472649347015917690530n],[4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939437n,0n],[877076961050607968509681729531255177986764537961432449499635504522207616027455086505066378536590128544573588734230n,3125332594171059424908108096204648978570118281977575435832422631601824034463382777937621250592425535493320683825557n]]],i=[[[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n]],[[1n,0n],[0n,4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436n],[793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620350n,0n],[0n,1n],[4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436n,0n],[0n,793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620350n]],[[1n,0n],[4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939437n,0n],[4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436n,0n],[4002409555221667393417789825735904156556882819939007885332058136124031650490837864442687629129015664037894272559786n,0n],[793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620350n,0n],[793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620351n,0n]]],n=t.addFunction(Q+"_frobeniusMap"+e);n.addParam("x","i32"),n.addParam("r","i32");const s=n.getCodeBuilder();for(let o=0;o<6;o++){const _=0==o?s.getLocal("x"):s.i32_add(s.getLocal("x"),s.i32_const(o*r)),u=_,g=s.i32_add(s.getLocal("x"),s.i32_const(o*r+l)),h=0==o?s.getLocal("r"):s.i32_add(s.getLocal("r"),s.i32_const(o*r)),p=h,m=s.i32_add(s.getLocal("r"),s.i32_const(o*r+l)),A=d(a[Math.floor(o/3)][e%12],i[o%3][e%6]),I=t.alloc([...de.bigInt2BytesLE(b(A[0]),c),...de.bigInt2BytesLE(b(A[1]),c)]);e%2==1?n.addCode(s.call(f+"_copy",u,p),s.call(f+"_neg",g,m),s.call(L+"_mul",h,s.i32_const(I),h)):n.addCode(s.call(L+"_mul",_,s.i32_const(I),h))}function d(t,e){const a=t[0],i=t[1],n=e[0],c=e[1],l=[(a*n-i*c)%o,(a*c+i*n)%o];return ye(l[0])&&(l[0]=l[0]+o),l}}function R(e,o,i){const n=function(t){let e=t;const a=[];for(;e>0n;){if(be(e)){const t=2-Number(e%4n);a.push(t),e-=BigInt(t)}else a.push(0);e>>=1n}return a}(e).map((t=>-1==t?255:t)),c=t.alloc(n),l=t.addFunction(a+"__cyclotomicExp_"+i);l.addParam("x","i32"),l.addParam("r","i32"),l.addLocal("bit","i32"),l.addLocal("i","i32");const r=l.getCodeBuilder(),d=r.getLocal("x"),_=r.getLocal("r"),u=r.i32_const(t.alloc(s));l.addCode(r.call(Q+"_conjugate",d,u),r.call(Q+"_one",_),r.if(r.teeLocal("bit",r.i32_load8_s(r.i32_const(n.length-1),c)),r.if(r.i32_eq(r.getLocal("bit"),r.i32_const(1)),r.call(Q+"_mul",_,d,_),r.call(Q+"_mul",_,u,_))),r.setLocal("i",r.i32_const(n.length-2)),r.block(r.loop(r.call(a+"__cyclotomicSquare",_,_),r.if(r.teeLocal("bit",r.i32_load8_s(r.getLocal("i"),c)),r.if(r.i32_eq(r.getLocal("bit"),r.i32_const(1)),r.call(Q+"_mul",_,d,_),r.call(Q+"_mul",_,u,_))),r.br_if(1,r.i32_eqz(r.getLocal("i"))),r.setLocal("i",r.i32_sub(r.getLocal("i"),r.i32_const(1))),r.br(0)))),o&&l.addCode(r.call(Q+"_conjugate",_,_))}t.modules[a]={n64q:n,n64r:d,n8q:c,n8r:_,pG1gen:C,pG1zero:B,pG1b:h,pG2gen:F,pG2zero:S,pG2b:m,pq:t.modules.f1m.pq,pr:g,pOneT:v,r:i,q:o,prePSize:G,preQSize:k},function(){const e=t.addFunction(O+"_mul1");e.addParam("pA","i32"),e.addParam("pC1","i32"),e.addParam("pR","i32");const a=e.getCodeBuilder(),o=a.getLocal("pA"),i=a.i32_add(a.getLocal("pA"),a.i32_const(2*l)),n=a.i32_add(a.getLocal("pA"),a.i32_const(4*l)),c=a.getLocal("pC1"),r=a.getLocal("pR"),s=a.i32_add(a.getLocal("pR"),a.i32_const(2*l)),d=a.i32_add(a.getLocal("pR"),a.i32_const(4*l)),_=a.i32_const(t.alloc(2*l)),u=a.i32_const(t.alloc(2*l));e.addCode(a.call(L+"_add",o,i,_),a.call(L+"_add",i,n,u),a.call(L+"_mul",i,c,d),a.call(L+"_mul",u,c,r),a.call(L+"_sub",r,d,r),a.call(L+"_mulNR",r,r),a.call(L+"_mul",_,c,s),a.call(L+"_sub",s,d,s))}(),function(){const e=t.addFunction(O+"_mul01");e.addParam("pA","i32"),e.addParam("pC0","i32"),e.addParam("pC1","i32"),e.addParam("pR","i32");const a=e.getCodeBuilder(),o=a.getLocal("pA"),i=a.i32_add(a.getLocal("pA"),a.i32_const(2*l)),n=a.i32_add(a.getLocal("pA"),a.i32_const(4*l)),c=a.getLocal("pC0"),r=a.getLocal("pC1"),s=a.getLocal("pR"),d=a.i32_add(a.getLocal("pR"),a.i32_const(2*l)),_=a.i32_add(a.getLocal("pR"),a.i32_const(4*l)),u=a.i32_const(t.alloc(2*l)),g=a.i32_const(t.alloc(2*l)),f=a.i32_const(t.alloc(2*l)),h=a.i32_const(t.alloc(2*l));e.addCode(a.call(L+"_mul",o,c,u),a.call(L+"_mul",i,r,g),a.call(L+"_add",o,i,f),a.call(L+"_add",o,n,h),a.call(L+"_add",i,n,s),a.call(L+"_mul",s,r,s),a.call(L+"_sub",s,g,s),a.call(L+"_mulNR",s,s),a.call(L+"_add",s,u,s),a.call(L+"_add",c,r,d),a.call(L+"_mul",d,f,d),a.call(L+"_sub",d,u,d),a.call(L+"_sub",d,g,d),a.call(L+"_mul",h,c,_),a.call(L+"_sub",_,u,_),a.call(L+"_add",_,g,_))}(),function(){const e=t.addFunction(Q+"_mul014");e.addParam("pA","i32"),e.addParam("pC0","i32"),e.addParam("pC1","i32"),e.addParam("pC4","i32"),e.addParam("pR","i32");const a=e.getCodeBuilder(),o=a.getLocal("pA"),i=a.i32_add(a.getLocal("pA"),a.i32_const(6*l)),n=a.getLocal("pC0"),c=a.getLocal("pC1"),r=a.getLocal("pC4"),s=a.i32_const(t.alloc(6*l)),d=a.i32_const(t.alloc(6*l)),_=a.i32_const(t.alloc(2*l)),u=a.getLocal("pR"),g=a.i32_add(a.getLocal("pR"),a.i32_const(6*l));e.addCode(a.call(O+"_mul01",o,n,c,s),a.call(O+"_mul1",i,r,d),a.call(L+"_add",c,r,_),a.call(O+"_add",i,o,g),a.call(O+"_mul01",g,n,_,g),a.call(O+"_sub",g,s,g),a.call(O+"_sub",g,d,g),a.call(O+"_copy",d,u),a.call(O+"_mulNR",u,u),a.call(O+"_add",u,s,u))}(),function(){const e=t.addFunction(a+"_ell");e.addParam("pP","i32"),e.addParam("pCoefs","i32"),e.addParam("pF","i32");const o=e.getCodeBuilder(),i=o.getLocal("pP"),n=o.i32_add(o.getLocal("pP"),o.i32_const(c)),r=o.getLocal("pF"),s=o.getLocal("pCoefs"),d=o.i32_add(o.getLocal("pCoefs"),o.i32_const(l)),_=o.i32_add(o.getLocal("pCoefs"),o.i32_const(2*l)),u=o.i32_add(o.getLocal("pCoefs"),o.i32_const(3*l)),g=o.i32_add(o.getLocal("pCoefs"),o.i32_const(4*l)),h=t.alloc(2*l),p=o.i32_const(h),L=o.i32_const(h),m=o.i32_const(h+l),A=t.alloc(2*l),I=o.i32_const(A),b=o.i32_const(A),y=o.i32_const(A+l);e.addCode(o.call(f+"_mul",s,n,L),o.call(f+"_mul",d,n,m),o.call(f+"_mul",_,i,b),o.call(f+"_mul",u,i,y),o.call(Q+"_mul014",r,g,I,p,r))}();const K=t.alloc(G),V=t.alloc(k);function j(e){const o=t.addFunction(a+"_pairingEq"+e);for(let t=0;t<e;t++)o.addParam("p_"+t,"i32"),o.addParam("q_"+t,"i32");o.addParam("c","i32"),o.setReturnType("i32");const i=o.getCodeBuilder(),n=i.i32_const(t.alloc(s)),c=i.i32_const(t.alloc(s));o.addCode(i.call(Q+"_one",n));for(let t=0;t<e;t++)o.addCode(i.call(a+"_prepareG1",i.getLocal("p_"+t),i.i32_const(K))),o.addCode(i.call(a+"_prepareG2",i.getLocal("q_"+t),i.i32_const(V))),o.addCode(i.if(i.i32_eqz(i.call(p+"_inGroupAffine",i.i32_const(K))),i.ret(i.i32_const(0))),i.if(i.i32_eqz(i.call(A+"_inGroupAffine",i.i32_const(V))),i.ret(i.i32_const(0)))),o.addCode(i.call(a+"_millerLoop",i.i32_const(K),i.i32_const(V),c)),o.addCode(i.call(Q+"_mul",n,c,n));o.addCode(i.call(a+"_finalExponentiation",n,n)),o.addCode(i.call(Q+"_eq",n,i.getLocal("c")))}for(let H=0;H<10;H++)N(H),t.exportFunction(Q+"_frobeniusMap"+H);!function(){const e=t.addFunction(p+"_inGroupAffine");e.addParam("p","i32"),e.setReturnType("i32");const a=e.getCodeBuilder(),o=(T*T-1n)/3n,i=a.i32_const(t.alloc(de.bigInt2BytesLE(b(4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436n),c))),n=a.i32_const(t.alloc(de.bigInt2BytesLE(b(793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620350n),c))),r=a.i32_const(t.alloc(de.bigInt2BytesLE(o,16))),s=a.getLocal("p"),d=a.i32_add(a.getLocal("p"),a.i32_const(l)),_=t.alloc(3*l),u=a.i32_const(_),g=a.i32_const(_),h=a.i32_const(_+l),L=t.alloc(2*l),m=a.i32_const(L),A=a.i32_const(L),I=a.i32_const(L+l);e.addCode(a.if(a.call(p+"_isZeroAffine",a.getLocal("p")),a.ret(a.i32_const(1))),a.if(a.i32_eqz(a.call(p+"_inCurveAffine",a.getLocal("p"))),a.ret(a.i32_const(0))),a.call(f+"_mul",s,i,g),a.call(f+"_copy",d,h),a.call(f+"_mul",s,n,A),a.call(f+"_copy",d,I),a.call(p+"_doubleAffine",u,u),a.call(p+"_subMixed",u,a.getLocal("p"),u),a.call(p+"_subMixed",u,m,u),a.call(p+"_timesScalar",u,r,a.i32_const(16),u),a.ret(a.call(p+"_eqMixed",u,m)));const y=t.addFunction(p+"_inGroup");y.addParam("pIn","i32"),y.setReturnType("i32");const C=y.getCodeBuilder(),w=C.i32_const(t.alloc(2*l));y.addCode(C.call(p+"_toAffine",C.getLocal("pIn"),w),C.ret(C.call(p+"_inGroupAffine",w)))}(),function(){const e=t.addFunction(A+"_inGroupAffine");e.addParam("p","i32"),e.setReturnType("i32");const a=e.getCodeBuilder(),o=[2001204777610833696708894912867952078278441409969503942666029068062015825245418932221343814564507832018947136279894n,2001204777610833696708894912867952078278441409969503942666029068062015825245418932221343814564507832018947136279893n],i=[2973677408986561043442465346520108879172042883009249989176415018091420807192182638567116318576472649347015917690530n,2973677408986561043442465346520108879172042883009249989176415018091420807192182638567116318576472649347015917690530n],n=a.i32_const(t.alloc([...de.bigInt2BytesLE(b(o[0]),c),...de.bigInt2BytesLE(b(o[1]),c)])),s=a.i32_const(t.alloc(de.bigInt2BytesLE(b(4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436n),c))),d=a.i32_const(t.alloc([...de.bigInt2BytesLE(b(i[0]),c),...de.bigInt2BytesLE(b(i[1]),c)])),_=a.i32_const(t.alloc(de.bigInt2BytesLE(T,8))),u=a.getLocal("p"),g=a.i32_add(a.getLocal("p"),a.i32_const(r)),h=a.i32_const(t.alloc(l)),p=a.i32_const(t.alloc(r)),m=a.i32_const(t.alloc(r)),I=t.alloc(2*r),y=a.i32_const(I),C=a.i32_const(I),w=a.i32_const(I),B=a.i32_const(I+l),x=a.i32_const(I+r),F=a.i32_const(I+r),E=a.i32_const(I+r+l),S=t.alloc(3*r),v=a.i32_const(S),P=a.i32_const(S),O=a.i32_const(S),Q=a.i32_const(S+l),q=a.i32_const(S+r),U=a.i32_const(S+r),M=a.i32_const(S+r+l),z=a.i32_const(S+2*r);e.addCode(a.if(a.call(A+"_isZeroAffine",a.getLocal("p")),a.ret(a.i32_const(1))),a.if(a.i32_eqz(a.call(A+"_inCurveAffine",a.getLocal("p"))),a.ret(a.i32_const(0))),a.call(L+"_mul",u,n,p),a.call(L+"_mul",g,n,m),a.call(L+"_mul1",p,s,C),a.call(L+"_neg",m,x),a.call(L+"_neg",p,P),a.call(L+"_mul",m,d,q),a.call(f+"_sub",w,B,h),a.call(f+"_add",w,B,B),a.call(f+"_copy",h,w),a.call(f+"_sub",F,E,h),a.call(f+"_add",F,E,E),a.call(f+"_copy",h,F),a.call(f+"_add",O,Q,h),a.call(f+"_sub",O,Q,Q),a.call(f+"_copy",h,O),a.call(f+"_sub",M,U,h),a.call(f+"_add",U,M,M),a.call(f+"_copy",h,U),a.call(L+"_one",z),a.call(A+"_timesScalar",v,_,a.i32_const(8),v),a.call(A+"_addMixed",v,y,v),a.ret(a.call(A+"_eqMixed",v,a.getLocal("p"))));const D=t.addFunction(A+"_inGroup");D.addParam("pIn","i32"),D.setReturnType("i32");const G=D.getCodeBuilder(),k=G.i32_const(t.alloc(2*r));D.addCode(G.call(A+"_toAffine",G.getLocal("pIn"),k),G.ret(G.call(A+"_inGroupAffine",k)))}(),function(){const e=t.addFunction(a+"_prepAddStep");e.addParam("R","i32"),e.addParam("Q","i32"),e.addParam("r","i32");const o=e.getCodeBuilder(),i=o.getLocal("R"),n=o.i32_add(o.getLocal("R"),o.i32_const(2*c)),l=o.i32_add(o.getLocal("R"),o.i32_const(4*c)),s=o.getLocal("Q"),d=o.i32_add(o.getLocal("Q"),o.i32_const(2*c)),_=o.getLocal("r"),u=o.i32_add(o.getLocal("r"),o.i32_const(2*c)),g=o.i32_add(o.getLocal("r"),o.i32_const(4*c)),f=o.i32_const(t.alloc(r)),h=o.i32_const(t.alloc(r)),p=o.i32_const(t.alloc(r)),m=o.i32_const(t.alloc(r)),A=o.i32_const(t.alloc(r)),I=o.i32_const(t.alloc(r)),b=o.i32_const(t.alloc(r)),y=o.i32_const(t.alloc(r)),C=o.i32_const(t.alloc(r)),w=o.i32_const(t.alloc(r)),B=o.i32_const(t.alloc(r));e.addCode(o.call(L+"_square",l,f),o.call(L+"_square",d,h),o.call(L+"_mul",f,s,m),o.call(L+"_add",d,l,u),o.call(L+"_square",u,u),o.call(L+"_sub",u,h,u),o.call(L+"_sub",u,f,u),o.call(L+"_mul",u,f,u),o.call(L+"_sub",m,i,A),o.call(L+"_square",A,I),o.call(L+"_add",I,I,b),o.call(L+"_add",b,b,b),o.call(L+"_mul",b,A,y),o.call(L+"_sub",u,n,C),o.call(L+"_sub",C,n,C),o.call(L+"_mul",C,s,g),o.call(L+"_mul",b,i,w),o.call(L+"_square",C,i),o.call(L+"_sub",i,y,i),o.call(L+"_sub",i,w,i),o.call(L+"_sub",i,w,i),o.call(L+"_add",l,A,l),o.call(L+"_square",l,l),o.call(L+"_sub",l,f,l),o.call(L+"_sub",l,I,l),o.call(L+"_add",d,l,_),o.call(L+"_sub",w,i,B),o.call(L+"_mul",B,C,B),o.call(L+"_mul",n,y,m),o.call(L+"_add",m,m,m),o.call(L+"_sub",B,m,n),o.call(L+"_square",_,_),o.call(L+"_sub",_,h,_),o.call(L+"_square",l,p),o.call(L+"_sub",_,p,_),o.call(L+"_add",g,g,g),o.call(L+"_sub",g,_,g),o.call(L+"_add",l,l,_),o.call(L+"_neg",C,C),o.call(L+"_add",C,C,u))}(),function(){const e=t.addFunction(a+"_prepDblStep");e.addParam("R","i32"),e.addParam("r","i32");const o=e.getCodeBuilder(),i=o.getLocal("R"),n=o.i32_add(o.getLocal("R"),o.i32_const(2*c)),l=o.i32_add(o.getLocal("R"),o.i32_const(4*c)),s=o.getLocal("r"),d=o.i32_add(o.getLocal("r"),o.i32_const(2*c)),_=o.i32_add(o.getLocal("r"),o.i32_const(4*c)),u=o.i32_const(t.alloc(r)),g=o.i32_const(t.alloc(r)),f=o.i32_const(t.alloc(r)),h=o.i32_const(t.alloc(r)),p=o.i32_const(t.alloc(r));e.addCode(o.call(L+"_square",i,s),o.call(L+"_square",n,g),o.call(L+"_square",g,f),o.call(L+"_add",g,i,d),o.call(L+"_square",d,d),o.call(L+"_sub",d,s,d),o.call(L+"_sub",d,f,d),o.call(L+"_add",d,d,d),o.call(L+"_add",s,s,h),o.call(L+"_add",h,s,h),o.call(L+"_add",i,h,_),o.call(L+"_square",h,p),o.call(L+"_square",l,u),o.call(L+"_sub",p,d,i),o.call(L+"_sub",i,d,i),o.call(L+"_add",l,n,l),o.call(L+"_square",l,l),o.call(L+"_sub",l,g,l),o.call(L+"_sub",l,u,l),o.call(L+"_sub",d,i,n),o.call(L+"_mul",n,h,n),o.call(L+"_add",f,f,f),o.call(L+"_add",f,f,f),o.call(L+"_add",f,f,f),o.call(L+"_sub",n,f,n),o.call(L+"_mul",h,u,d),o.call(L+"_add",d,d,d),o.call(L+"_neg",d,d),o.call(L+"_square",_,_),o.call(L+"_sub",_,s,_),o.call(L+"_sub",_,p,_),o.call(L+"_add",g,g,g),o.call(L+"_add",g,g,g),o.call(L+"_sub",_,g,_),o.call(L+"_mul",l,u,s),o.call(L+"_add",s,s,s))}(),function(){const e=t.addFunction(a+"_prepareG1");e.addParam("pP","i32"),e.addParam("ppreP","i32");const o=e.getCodeBuilder();e.addCode(o.call(p+"_normalize",o.getLocal("pP"),o.getLocal("ppreP")))}(),function(){const e=t.addFunction(a+"_prepareG2");e.addParam("pQ","i32"),e.addParam("ppreQ","i32"),e.addLocal("pCoef","i32"),e.addLocal("i","i32");const o=e.getCodeBuilder(),i=o.getLocal("pQ"),n=t.alloc(3*r),c=o.i32_const(n),l=o.getLocal("ppreQ");e.addCode(o.call(A+"_normalize",i,l),o.if(o.call(A+"_isZero",l),o.ret([])),o.call(A+"_copy",l,c),o.setLocal("pCoef",o.i32_add(o.getLocal("ppreQ"),o.i32_const(3*r)))),e.addCode(o.setLocal("i",o.i32_const(q.length-2)),o.block(o.loop(o.call(a+"_prepDblStep",c,o.getLocal("pCoef")),o.setLocal("pCoef",o.i32_add(o.getLocal("pCoef"),o.i32_const(M))),o.if(o.i32_load8_s(o.getLocal("i"),U),[...o.call(a+"_prepAddStep",c,l,o.getLocal("pCoef")),...o.setLocal("pCoef",o.i32_add(o.getLocal("pCoef"),o.i32_const(M)))]),o.br_if(1,o.i32_eqz(o.getLocal("i"))),o.setLocal("i",o.i32_sub(o.getLocal("i"),o.i32_const(1))),o.br(0))))}(),function(){const e=t.addFunction(a+"_millerLoop");e.addParam("ppreP","i32"),e.addParam("ppreQ","i32"),e.addParam("r","i32"),e.addLocal("pCoef","i32"),e.addLocal("i","i32");const o=e.getCodeBuilder(),i=o.getLocal("ppreP"),n=o.getLocal("pCoef"),c=o.getLocal("r");e.addCode(o.call(Q+"_one",c),o.if(o.call(p+"_isZero",i),o.ret([])),o.if(o.call(p+"_isZero",o.getLocal("ppreQ")),o.ret([])),o.setLocal("pCoef",o.i32_add(o.getLocal("ppreQ"),o.i32_const(3*r))),o.setLocal("i",o.i32_const(q.length-2)),o.block(o.loop(o.call(a+"_ell",i,n,c),o.setLocal("pCoef",o.i32_add(o.getLocal("pCoef"),o.i32_const(M))),o.if(o.i32_load8_s(o.getLocal("i"),U),[...o.call(a+"_ell",i,n,c),...o.setLocal("pCoef",o.i32_add(o.getLocal("pCoef"),o.i32_const(M)))]),o.call(Q+"_square",c,c),o.br_if(1,o.i32_eq(o.getLocal("i"),o.i32_const(1))),o.setLocal("i",o.i32_sub(o.getLocal("i"),o.i32_const(1))),o.br(0))),o.call(a+"_ell",i,n,c)),e.addCode(o.call(Q+"_conjugate",c,c))}(),function(){const e=t.addFunction(a+"_finalExponentiationOld");e.addParam("x","i32"),e.addParam("r","i32");const o=t.alloc(de.bigInt2BytesLE(322277361516934140462891564586510139908379969514828494218366688025288661041104682794998680497580008899973249814104447692778988208376779573819485263026159588510513834876303014016798809919343532899164848730280942609956670917565618115867287399623286813270357901731510188149934363360381614501334086825442271920079363289954510565375378443704372994881406797882676971082200626541916413184642520269678897559532260949334760604962086348898118982248842634379637598665468817769075878555493752214492790122785850202957575200176084204422751485957336465472324810982833638490904279282696134323072515220044451592646885410572234451732790590013479358343841220074174848221722017083597872017638514103174122784843925578370430843522959600095676285723737049438346544753168912974976791528535276317256904336520179281145394686565050419250614107803233314658825463117900250701199181529205942363159325765991819433914303908860460720581408201373164047773794825411011922305820065611121544561808414055302212057471395719432072209245600258134364584636810093520285711072578721435517884103526483832733289802426157301542744476740008494780363354305116978805620671467071400711358839553375340724899735460480144599782014906586543813292157922220645089192130209334926661588737007768565838519456601560804957985667880395221049249803753582637708560n,544)),i=e.getCodeBuilder();e.addCode(i.call(Q+"_exp",i.getLocal("x"),i.i32_const(o),i.i32_const(544),i.getLocal("r")))}(),function(){!function(){const e=t.addFunction(a+"__cyclotomicSquare");e.addParam("x","i32"),e.addParam("r","i32");const o=e.getCodeBuilder(),i=o.getLocal("x"),n=o.i32_add(o.getLocal("x"),o.i32_const(r)),c=o.i32_add(o.getLocal("x"),o.i32_const(2*r)),l=o.i32_add(o.getLocal("x"),o.i32_const(3*r)),s=o.i32_add(o.getLocal("x"),o.i32_const(4*r)),d=o.i32_add(o.getLocal("x"),o.i32_const(5*r)),_=o.getLocal("r"),u=o.i32_add(o.getLocal("r"),o.i32_const(r)),g=o.i32_add(o.getLocal("r"),o.i32_const(2*r)),f=o.i32_add(o.getLocal("r"),o.i32_const(3*r)),h=o.i32_add(o.getLocal("r"),o.i32_const(4*r)),p=o.i32_add(o.getLocal("r"),o.i32_const(5*r)),m=o.i32_const(t.alloc(r)),A=o.i32_const(t.alloc(r)),I=o.i32_const(t.alloc(r)),b=o.i32_const(t.alloc(r)),y=o.i32_const(t.alloc(r)),C=o.i32_const(t.alloc(r)),w=o.i32_const(t.alloc(r)),B=o.i32_const(t.alloc(r));e.addCode(o.call(L+"_mul",i,s,w),o.call(L+"_mulNR",s,m),o.call(L+"_add",i,m,m),o.call(L+"_add",i,s,B),o.call(L+"_mul",B,m,m),o.call(L+"_mulNR",w,B),o.call(L+"_add",w,B,B),o.call(L+"_sub",m,B,m),o.call(L+"_add",w,w,A),o.call(L+"_mul",l,c,w),o.call(L+"_mulNR",c,I),o.call(L+"_add",l,I,I),o.call(L+"_add",l,c,B),o.call(L+"_mul",B,I,I),o.call(L+"_mulNR",w,B),o.call(L+"_add",w,B,B),o.call(L+"_sub",I,B,I),o.call(L+"_add",w,w,b),o.call(L+"_mul",n,d,w),o.call(L+"_mulNR",d,y),o.call(L+"_add",n,y,y),o.call(L+"_add",n,d,B),o.call(L+"_mul",B,y,y),o.call(L+"_mulNR",w,B),o.call(L+"_add",w,B,B),o.call(L+"_sub",y,B,y),o.call(L+"_add",w,w,C),o.call(L+"_sub",m,i,_),o.call(L+"_add",_,_,_),o.call(L+"_add",m,_,_),o.call(L+"_add",A,s,h),o.call(L+"_add",h,h,h),o.call(L+"_add",A,h,h),o.call(L+"_mul",C,o.i32_const(P),B),o.call(L+"_add",B,l,f),o.call(L+"_add",f,f,f),o.call(L+"_add",B,f,f),o.call(L+"_sub",y,c,g),o.call(L+"_add",g,g,g),o.call(L+"_add",y,g,g),o.call(L+"_sub",I,n,u),o.call(L+"_add",u,u,u),o.call(L+"_add",I,u,u),o.call(L+"_add",b,d,p),o.call(L+"_add",p,p,p),o.call(L+"_add",b,p,p))}(),R(T,true,"w0");const e=t.addFunction(a+"_finalExponentiation");e.addParam("x","i32"),e.addParam("r","i32");const o=e.getCodeBuilder(),i=o.getLocal("x"),n=o.getLocal("r"),c=o.i32_const(t.alloc(s)),l=o.i32_const(t.alloc(s)),d=o.i32_const(t.alloc(s)),_=o.i32_const(t.alloc(s)),u=o.i32_const(t.alloc(s)),g=o.i32_const(t.alloc(s)),f=o.i32_const(t.alloc(s));e.addCode(o.call(Q+"_frobeniusMap6",i,c),o.call(Q+"_inverse",i,l),o.call(Q+"_mul",c,l,d),o.call(Q+"_copy",d,l),o.call(Q+"_frobeniusMap2",d,d),o.call(Q+"_mul",d,l,d),o.call(a+"__cyclotomicSquare",d,l),o.call(Q+"_conjugate",l,l),o.call(a+"__cyclotomicExp_w0",d,_),o.call(a+"__cyclotomicSquare",_,u),o.call(Q+"_mul",l,_,g),o.call(a+"__cyclotomicExp_w0",g,l),o.call(a+"__cyclotomicExp_w0",l,c),o.call(a+"__cyclotomicExp_w0",c,f),o.call(Q+"_mul",f,u,f),o.call(a+"__cyclotomicExp_w0",f,u),o.call(Q+"_conjugate",g,g),o.call(Q+"_mul",u,g,u),o.call(Q+"_mul",u,d,u),o.call(Q+"_conjugate",d,g),o.call(Q+"_mul",l,d,l),o.call(Q+"_frobeniusMap3",l,l),o.call(Q+"_mul",f,g,f),o.call(Q+"_frobeniusMap1",f,f),o.call(Q+"_mul",_,c,_),o.call(Q+"_frobeniusMap2",_,_),o.call(Q+"_mul",_,l,_),o.call(Q+"_mul",_,f,_),o.call(Q+"_mul",_,u,n))}();for(let H=1;H<=5;H++)j(H),t.exportFunction(a+"_pairingEq"+H);!function(){const e=t.addFunction(a+"_pairing");e.addParam("p","i32"),e.addParam("q","i32"),e.addParam("r","i32");const o=e.getCodeBuilder(),i=o.i32_const(t.alloc(s));e.addCode(o.call(a+"_prepareG1",o.getLocal("p"),o.i32_const(K))),e.addCode(o.call(a+"_prepareG2",o.getLocal("q"),o.i32_const(V))),e.addCode(o.call(a+"_millerLoop",o.i32_const(K),o.i32_const(V),i)),e.addCode(o.call(a+"_finalExponentiation",i,o.getLocal("r")))}(),t.exportFunction(a+"_pairing"),t.exportFunction(a+"_prepareG1"),t.exportFunction(a+"_prepareG2"),t.exportFunction(a+"_millerLoop"),t.exportFunction(a+"_finalExponentiation"),t.exportFunction(a+"_finalExponentiationOld"),t.exportFunction(a+"__cyclotomicSquare"),t.exportFunction(a+"__cyclotomicExp_w0"),t.exportFunction(O+"_mul1"),t.exportFunction(O+"_mul01"),t.exportFunction(Q+"_mul014"),t.exportFunction(p+"_inGroupAffine"),t.exportFunction(p+"_inGroup"),t.exportFunction(A+"_inGroupAffine"),t.exportFunction(A+"_inGroup")};function Be(t,e){let a=t;"undefined"===typeof e&&0==(e=Math.floor((c(t)-1)/8)+1)&&(e=1);const o=new Uint8Array(e),i=new DataView(o.buffer);let n=0;for(;n<e;)n+4<=e?(i.setUint32(n,Number(a&BigInt(4294967295)),!0),n+=4,a>>=BigInt(32)):n+2<=e?(i.setUint16(n,Number(a&BigInt(65535)),!0),n+=2,a>>=BigInt(16)):(i.setUint8(n,Number(a&BigInt(255)),!0),n+=1,a>>=BigInt(8));if(a)throw new Error("Number does not fit in this length");return o}const xe=[];for(let yi=0;yi<256;yi++)xe[yi]=Fe(yi,8);function Fe(t,e){let a=0,o=t;for(let i=0;i<e;i++)a<<=1,a|=1&o,o>>=1;return a}function Ee(t,e){return(xe[t>>>24]|xe[t>>>16&255]<<8|xe[t>>>8&255]<<16|xe[255&t]<<24)>>>32-e}function Se(t){return(0!==(4294901760&t)?(t&=4294901760,16):0)|(0!==(4278255360&t)?(t&=4278255360,8):0)|(0!==(4042322160&t)?(t&=4042322160,4):0)|(0!==(3435973836&t)?(t&=3435973836,2):0)|0!==(2863311530&t)}function ve(t,e){const a=t.byteLength/e,o=Se(a);if(a!=1<<o)throw new Error("Invalid number of pointers");for(let i=0;i<a;i++){const a=Ee(i,o);if(i>a){const o=t.slice(i*e,(i+1)*e);t.set(t.slice(a*e,(a+1)*e),i*e),t.set(o,a*e)}}}function Pe(t,e){const a=new Uint8Array(e*t.length);for(let o=0;o<t.length;o++)a.set(t[o],o*e);return a}function Oe(t,e){const a=t.byteLength/e,o=new Array(a);for(let i=0;i<a;i++)o[i]=t.slice(i*e,i*e+e);return o}var Qe=Object.freeze({__proto__:null,array2buffer:Pe,beBuff2int:function(t){let e=BigInt(0),a=t.length,o=0;const i=new DataView(t.buffer,t.byteOffset,t.byteLength);for(;a>0;)a>=4?(a-=4,e+=BigInt(i.getUint32(a))<<BigInt(8*o),o+=4):a>=2?(a-=2,e+=BigInt(i.getUint16(a))<<BigInt(8*o),o+=2):(a-=1,e+=BigInt(i.getUint8(a))<<BigInt(8*o),o+=1);return e},beInt2Buff:function(t,e){let a=t;const o=new Uint8Array(e),i=new DataView(o.buffer);let n=e;for(;n>0;)n-4>=0?(n-=4,i.setUint32(n,Number(a&BigInt(4294967295))),a>>=BigInt(32)):n-2>=0?(n-=2,i.setUint16(n,Number(a&BigInt(65535))),a>>=BigInt(16)):(n-=1,i.setUint8(n,Number(a&BigInt(255))),a>>=BigInt(8));if(a)throw new Error("Number does not fit in this length");return o},bitReverse:Ee,buffReverseBits:ve,buffer2array:Oe,leBuff2int:function(t){let e=BigInt(0),a=0;const o=new DataView(t.buffer,t.byteOffset,t.byteLength);for(;a<t.length;)a+4<=t.length?(e+=BigInt(o.getUint32(a,!0))<<BigInt(8*a),a+=4):a+2<=t.length?(e+=BigInt(o.getUint16(a,!0))<<BigInt(8*a),a+=2):(e+=BigInt(o.getUint8(a,!0))<<BigInt(8*a),a+=1);return e},leInt2Buff:Be,log2:Se,stringifyBigInts:function t(e){if("bigint"==typeof e||void 0!==e.eq)return e.toString(10);if(e instanceof Uint8Array)return v(e,0);if(Array.isArray(e))return e.map(t);if("object"==typeof e){const a={};return Object.keys(e).forEach((o=>{a[o]=t(e[o])})),a}return e},stringifyFElements:function t(e,a){if("bigint"==typeof a||void 0!==a.eq)return a.toString(10);if(a instanceof Uint8Array)return e.toString(e.e(a));if(Array.isArray(a))return a.map(t.bind(this,e));if("object"==typeof a){const o={};return Object.keys(a).forEach((i=>{o[i]=t(e,a[i])})),o}return a},unstringifyBigInts:function t(e){if("string"==typeof e&&/^[0-9]+$/.test(e))return BigInt(e);if("string"==typeof e&&/^0x[0-9a-fA-F]+$/.test(e))return BigInt(e);if(Array.isArray(e))return e.map(t);if("object"==typeof e){if(null===e)return null;const a={};return Object.keys(e).forEach((o=>{a[o]=t(e[o])})),a}return e},unstringifyFElements:function t(e,a){if("string"==typeof a&&/^[0-9]+$/.test(a))return e.e(a);if("string"==typeof a&&/^0x[0-9a-fA-F]+$/.test(a))return e.e(a);if(Array.isArray(a))return a.map(t.bind(this,e));if("object"==typeof a){if(null===a)return null;const o={};return Object.keys(a).forEach((i=>{o[i]=t(e,a[i])})),o}return a}});const qe=1<<30;class Ue{constructor(t){this.buffers=[],this.byteLength=t;for(let e=0;e<t;e+=qe){const a=Math.min(t-e,qe);this.buffers.push(new Uint8Array(a))}}slice(t,e){void 0===e&&(e=this.byteLength),void 0===t&&(t=0);const a=e-t,o=Math.floor(t/qe);if(o==Math.floor((t+a-1)/qe)||0==a)return this.buffers[o].slice(t%qe,t%qe+a);let i,n=o,c=t%qe,l=a;for(;l>0;){const t=c+l>qe?qe-c:l,e=new Uint8Array(this.buffers[n].buffer,this.buffers[n].byteOffset+c,t);if(t==a)return e.slice();i||(i=a<=qe?new Uint8Array(a):new Ue(a)),i.set(e,a-l),l-=t,n++,c=0}return i}set(t,e){void 0===e&&(e=0);const a=t.byteLength;if(0==a)return;const o=Math.floor(e/qe);if(o==Math.floor((e+a-1)/qe))return t instanceof Ue&&1==t.buffers.length?this.buffers[o].set(t.buffers[0],e%qe):this.buffers[o].set(t,e%qe);let i=o,n=e%qe,c=a;for(;c>0;){const e=n+c>qe?qe-n:c,o=t.slice(a-c,a-c+e);new Uint8Array(this.buffers[i].buffer,this.buffers[i].byteOffset+n,e).set(o),c-=e,i++,n=0}}}function Me(t,e,a,o){return async function(i){const n=Math.floor(i.byteLength/a);if(n*a!==i.byteLength)throw new Error("Invalid buffer size");const c=Math.floor(n/t.concurrency),l=[];for(let _=0;_<t.concurrency;_++){let r;if(r=_<t.concurrency-1?c:n-_*c,0==r)continue;const s=[{cmd:"ALLOCSET",var:0,buff:i.slice(_*c*a,_*c*a+r*a)},{cmd:"ALLOC",var:1,len:o*r},{cmd:"CALL",fnName:e,params:[{var:0},{val:r},{var:1}]},{cmd:"GET",out:0,var:1,len:o*r}];l.push(t.queueAction(s))}const r=await Promise.all(l);let s;s=i instanceof Ue?new Ue(n*o):new Uint8Array(n*o);let d=0;for(let t=0;t<r.length;t++)s.set(r[t][0],d),d+=r[t][0].byteLength;return s}}class ze{constructor(t,e,a,o){if(this.tm=t,this.prefix=e,this.p=o,this.n8=a,this.type="F1",this.m=1,this.half=d(o,U),this.bitLength=c(o),this.mask=m(s(U,this.bitLength),U),this.pOp1=t.alloc(a),this.pOp2=t.alloc(a),this.pOp3=t.alloc(a),this.tm.instance.exports[e+"_zero"](this.pOp1),this.zero=this.tm.getBuff(this.pOp1,this.n8),this.tm.instance.exports[e+"_one"](this.pOp1),this.one=this.tm.getBuff(this.pOp1,this.n8),this.negone=this.neg(this.one),this.two=this.add(this.one,this.one),this.n64=Math.floor(a/8),this.n32=Math.floor(a/4),8*this.n64!=this.n8)throw new Error("n8 must be a multiple of 8");this.half=d(this.p,U),this.nqr=this.two;let i=this.exp(this.nqr,this.half);for(;!this.eq(i,this.negone);)this.nqr=this.add(this.nqr,this.one),i=this.exp(this.nqr,this.half);this.shift=this.mul(this.nqr,this.nqr),this.shiftInv=this.inv(this.shift),this.s=0;let n=m(this.p,U);for(;!g(n);)this.s=this.s+1,n=d(n,U);this.w=[],this.w[this.s]=this.exp(this.nqr,n);for(let c=this.s-1;c>=0;c--)this.w[c]=this.square(this.w[c+1]);if(!this.eq(this.w[0],this.one))throw new Error("Error calculating roots of unity");this.batchToMontgomery=Me(t,e+"_batchToMontgomery",this.n8,this.n8),this.batchFromMontgomery=Me(t,e+"_batchFromMontgomery",this.n8,this.n8)}op2(t,e,a){return this.tm.setBuff(this.pOp1,e),this.tm.setBuff(this.pOp2,a),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op2Bool(t,e,a){return this.tm.setBuff(this.pOp1,e),this.tm.setBuff(this.pOp2,a),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2)}op1(t,e){return this.tm.setBuff(this.pOp1,e),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op1Bool(t,e){return this.tm.setBuff(this.pOp1,e),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3)}add(t,e){return this.op2("_add",t,e)}eq(t,e){return this.op2Bool("_eq",t,e)}isZero(t){return this.op1Bool("_isZero",t)}sub(t,e){return this.op2("_sub",t,e)}neg(t){return this.op1("_neg",t)}inv(t){return this.op1("_inverse",t)}toMontgomery(t){return this.op1("_toMontgomery",t)}fromMontgomery(t){return this.op1("_fromMontgomery",t)}mul(t,e){return this.op2("_mul",t,e)}div(t,e){return this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,e),this.tm.instance.exports[this.prefix+"_inverse"](this.pOp2,this.pOp2),this.tm.instance.exports[this.prefix+"_mul"](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}square(t){return this.op1("_square",t)}isSquare(t){return this.op1Bool("_isSquare",t)}sqrt(t){return this.op1("_sqrt",t)}exp(t,e){return e instanceof Uint8Array||(e=Q(n(e))),this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,e),this.tm.instance.exports[this.prefix+"_exp"](this.pOp1,this.pOp2,e.byteLength,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}isNegative(t){return this.op1Bool("_isNegative",t)}e(t,e){if(t instanceof Uint8Array)return t;let a=n(t,e);l(a)?(a=A(a),B(a,this.p)&&(a=C(a,this.p)),a=m(this.p,a)):B(a,this.p)&&(a=C(a,this.p));const o=Be(a,this.n8);return this.toMontgomery(o)}toString(t,e){return O(v(this.fromMontgomery(t),0),e)}fromRng(t){let e;const a=new Uint8Array(this.n8);do{e=q;for(let a=0;a<this.n64;a++)e=L(e,s(t.nextU64(),64*a));e=F(e,this.mask)}while(x(e,this.p));return E(a,0,e,this.n8),a}random(){return this.fromRng(V())}toObject(t){return v(this.fromMontgomery(t),0)}fromObject(t){const e=new Uint8Array(this.n8);return E(e,0,t,this.n8),this.toMontgomery(e)}toRprLE(t,e,a){t.set(this.fromMontgomery(a),e)}toRprBE(t,e,a){const o=this.fromMontgomery(a);for(let i=0;i<this.n8/2;i++){const t=o[i];o[i]=o[this.n8-1-i],o[this.n8-1-i]=t}t.set(o,e)}fromRprLE(t,e){e=e||0;const a=t.slice(e,e+this.n8);return this.toMontgomery(a)}async batchInverse(t){let e=!1;const a=this.n8,o=this.n8;Array.isArray(t)?(t=Pe(t,a),e=!0):t=t.slice(0,t.byteLength);const i=Math.floor(t.byteLength/a);if(i*a!==t.byteLength)throw new Error("Invalid buffer size");const n=Math.floor(i/this.tm.concurrency),c=[];for(let d=0;d<this.tm.concurrency;d++){let e;if(e=d<this.tm.concurrency-1?n:i-d*n,0==e)continue;const l=[{cmd:"ALLOCSET",var:0,buff:t.slice(d*n*a,d*n*a+e*a)},{cmd:"ALLOC",var:1,len:o*e},{cmd:"CALL",fnName:this.prefix+"_batchInverse",params:[{var:0},{val:a},{val:e},{var:1},{val:o}]},{cmd:"GET",out:0,var:1,len:o*e}];c.push(this.tm.queueAction(l))}const l=await Promise.all(c);let r;r=t instanceof Ue?new Ue(i*o):new Uint8Array(i*o);let s=0;for(let d=0;d<l.length;d++)r.set(l[d][0],s),s+=l[d][0].byteLength;return e?Oe(r,o):r}}class De{constructor(t,e,a){this.tm=t,this.prefix=e,this.F=a,this.type="F2",this.m=2*a.m,this.n8=2*this.F.n8,this.n32=2*this.F.n32,this.n64=2*this.F.n64,this.pOp1=t.alloc(2*a.n8),this.pOp2=t.alloc(2*a.n8),this.pOp3=t.alloc(2*a.n8),this.tm.instance.exports[e+"_zero"](this.pOp1),this.zero=t.getBuff(this.pOp1,this.n8),this.tm.instance.exports[e+"_one"](this.pOp1),this.one=t.getBuff(this.pOp1,this.n8),this.negone=this.neg(this.one),this.two=this.add(this.one,this.one)}op2(t,e,a){return this.tm.setBuff(this.pOp1,e),this.tm.setBuff(this.pOp2,a),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op2Bool(t,e,a){return this.tm.setBuff(this.pOp1,e),this.tm.setBuff(this.pOp2,a),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2)}op1(t,e){return this.tm.setBuff(this.pOp1,e),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op1Bool(t,e){return this.tm.setBuff(this.pOp1,e),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3)}add(t,e){return this.op2("_add",t,e)}eq(t,e){return this.op2Bool("_eq",t,e)}isZero(t){return this.op1Bool("_isZero",t)}sub(t,e){return this.op2("_sub",t,e)}neg(t){return this.op1("_neg",t)}inv(t){return this.op1("_inverse",t)}isNegative(t){return this.op1Bool("_isNegative",t)}toMontgomery(t){return this.op1("_toMontgomery",t)}fromMontgomery(t){return this.op1("_fromMontgomery",t)}mul(t,e){return this.op2("_mul",t,e)}mul1(t,e){return this.op2("_mul1",t,e)}div(t,e){return this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,e),this.tm.instance.exports[this.prefix+"_inverse"](this.pOp2,this.pOp2),this.tm.instance.exports[this.prefix+"_mul"](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}square(t){return this.op1("_square",t)}isSquare(t){return this.op1Bool("_isSquare",t)}sqrt(t){return this.op1("_sqrt",t)}exp(t,e){return e instanceof Uint8Array||(e=Q(n(e))),this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,e),this.tm.instance.exports[this.prefix+"_exp"](this.pOp1,this.pOp2,e.byteLength,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}e(t,e){if(t instanceof Uint8Array)return t;if(Array.isArray(t)&&2==t.length){const a=this.F.e(t[0],e),o=this.F.e(t[1],e),i=new Uint8Array(2*this.F.n8);return i.set(a),i.set(o,2*this.F.n8),i}throw new Error("invalid F2")}toString(t,e){const a=this.F.toString(t.slice(0,this.F.n8),e),o=this.F.toString(t.slice(this.F.n8),e);return"[".concat(a,", ").concat(o,"]")}fromRng(t){const e=this.F.fromRng(t),a=this.F.fromRng(t),o=new Uint8Array(2*this.F.n8);return o.set(e),o.set(a,this.F.n8),o}random(){return this.fromRng(V())}toObject(t){return[this.F.toObject(t.slice(0,this.F.n8)),this.F.toObject(t.slice(this.F.n8,2*this.F.n8))]}fromObject(t){const e=new Uint8Array(2*this.F.n8),a=this.F.fromObject(t[0]),o=this.F.fromObject(t[1]);return e.set(a),e.set(o,this.F.n8),e}c1(t){return t.slice(0,this.F.n8)}c2(t){return t.slice(this.F.n8)}}class Ge{constructor(t,e,a){this.tm=t,this.prefix=e,this.F=a,this.type="F3",this.m=3*a.m,this.n8=3*this.F.n8,this.n32=3*this.F.n32,this.n64=3*this.F.n64,this.pOp1=t.alloc(3*a.n8),this.pOp2=t.alloc(3*a.n8),this.pOp3=t.alloc(3*a.n8),this.tm.instance.exports[e+"_zero"](this.pOp1),this.zero=t.getBuff(this.pOp1,this.n8),this.tm.instance.exports[e+"_one"](this.pOp1),this.one=t.getBuff(this.pOp1,this.n8),this.negone=this.neg(this.one),this.two=this.add(this.one,this.one)}op2(t,e,a){return this.tm.setBuff(this.pOp1,e),this.tm.setBuff(this.pOp2,a),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op2Bool(t,e,a){return this.tm.setBuff(this.pOp1,e),this.tm.setBuff(this.pOp2,a),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2)}op1(t,e){return this.tm.setBuff(this.pOp1,e),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op1Bool(t,e){return this.tm.setBuff(this.pOp1,e),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3)}eq(t,e){return this.op2Bool("_eq",t,e)}isZero(t){return this.op1Bool("_isZero",t)}add(t,e){return this.op2("_add",t,e)}sub(t,e){return this.op2("_sub",t,e)}neg(t){return this.op1("_neg",t)}inv(t){return this.op1("_inverse",t)}isNegative(t){return this.op1Bool("_isNegative",t)}toMontgomery(t){return this.op1("_toMontgomery",t)}fromMontgomery(t){return this.op1("_fromMontgomery",t)}mul(t,e){return this.op2("_mul",t,e)}div(t,e){return this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,e),this.tm.instance.exports[this.prefix+"_inverse"](this.pOp2,this.pOp2),this.tm.instance.exports[this.prefix+"_mul"](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}square(t){return this.op1("_square",t)}isSquare(t){return this.op1Bool("_isSquare",t)}sqrt(t){return this.op1("_sqrt",t)}exp(t,e){return e instanceof Uint8Array||(e=Q(n(e))),this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,e),this.tm.instance.exports[this.prefix+"_exp"](this.pOp1,this.pOp2,e.byteLength,this.pOp3),this.getBuff(this.pOp3,this.n8)}e(t,e){if(t instanceof Uint8Array)return t;if(Array.isArray(t)&&3==t.length){const a=this.F.e(t[0],e),o=this.F.e(t[1],e),i=this.F.e(t[2],e),n=new Uint8Array(3*this.F.n8);return n.set(a),n.set(o,this.F.n8),n.set(i,2*this.F.n8),n}throw new Error("invalid F3")}toString(t,e){const a=this.F.toString(t.slice(0,this.F.n8),e),o=this.F.toString(t.slice(this.F.n8,2*this.F.n8),e),i=this.F.toString(t.slice(2*this.F.n8),e);return"[".concat(a,", ").concat(o,", ").concat(i,"]")}fromRng(t){const e=this.F.fromRng(t),a=this.F.fromRng(t),o=this.F.fromRng(t),i=new Uint8Array(3*this.F.n8);return i.set(e),i.set(a,this.F.n8),i.set(o,2*this.F.n8),i}random(){return this.fromRng(V())}toObject(t){return[this.F.toObject(t.slice(0,this.F.n8)),this.F.toObject(t.slice(this.F.n8,2*this.F.n8)),this.F.toObject(t.slice(2*this.F.n8,3*this.F.n8))]}fromObject(t){const e=new Uint8Array(3*this.F.n8),a=this.F.fromObject(t[0]),o=this.F.fromObject(t[1]),i=this.F.fromObject(t[2]);return e.set(a),e.set(o,this.F.n8),e.set(i,2*this.F.n8),e}c1(t){return t.slice(0,this.F.n8)}c2(t){return t.slice(this.F.n8,2*this.F.n8)}c3(t){return t.slice(2*this.F.n8)}}class ke{constructor(t,e,a,o,i,n){this.tm=t,this.prefix=e,this.F=a,this.pOp1=t.alloc(3*a.n8),this.pOp2=t.alloc(3*a.n8),this.pOp3=t.alloc(3*a.n8),this.tm.instance.exports[e+"_zero"](this.pOp1),this.zero=this.tm.getBuff(this.pOp1,3*a.n8),this.tm.instance.exports[e+"_zeroAffine"](this.pOp1),this.zeroAffine=this.tm.getBuff(this.pOp1,2*a.n8),this.one=this.tm.getBuff(o,3*a.n8),this.g=this.one,this.oneAffine=this.tm.getBuff(o,2*a.n8),this.gAffine=this.oneAffine,this.b=this.tm.getBuff(i,a.n8),n&&(this.cofactor=Q(n)),this.negone=this.neg(this.one),this.two=this.add(this.one,this.one),this.batchLEMtoC=Me(t,e+"_batchLEMtoC",2*a.n8,a.n8),this.batchLEMtoU=Me(t,e+"_batchLEMtoU",2*a.n8,2*a.n8),this.batchCtoLEM=Me(t,e+"_batchCtoLEM",a.n8,2*a.n8),this.batchUtoLEM=Me(t,e+"_batchUtoLEM",2*a.n8,2*a.n8),this.batchToJacobian=Me(t,e+"_batchToJacobian",2*a.n8,3*a.n8),this.batchToAffine=Me(t,e+"_batchToAffine",3*a.n8,2*a.n8)}op2(t,e,a){return this.tm.setBuff(this.pOp1,e),this.tm.setBuff(this.pOp2,a),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,3*this.F.n8)}op2bool(t,e,a){return this.tm.setBuff(this.pOp1,e),this.tm.setBuff(this.pOp2,a),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2,this.pOp3)}op1(t,e){return this.tm.setBuff(this.pOp1,e),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,3*this.F.n8)}op1Affine(t,e){return this.tm.setBuff(this.pOp1,e),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,2*this.F.n8)}op1Bool(t,e){return this.tm.setBuff(this.pOp1,e),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3)}add(t,e){if(t.byteLength==3*this.F.n8){if(e.byteLength==3*this.F.n8)return this.op2("_add",t,e);if(e.byteLength==2*this.F.n8)return this.op2("_addMixed",t,e);throw new Error("invalid point size")}if(t.byteLength==2*this.F.n8){if(e.byteLength==3*this.F.n8)return this.op2("_addMixed",e,t);if(e.byteLength==2*this.F.n8)return this.op2("_addAffine",t,e);throw new Error("invalid point size")}throw new Error("invalid point size")}sub(t,e){if(t.byteLength==3*this.F.n8){if(e.byteLength==3*this.F.n8)return this.op2("_sub",t,e);if(e.byteLength==2*this.F.n8)return this.op2("_subMixed",t,e);throw new Error("invalid point size")}if(t.byteLength==2*this.F.n8){if(e.byteLength==3*this.F.n8)return this.op2("_subMixed",e,t);if(e.byteLength==2*this.F.n8)return this.op2("_subAffine",t,e);throw new Error("invalid point size")}throw new Error("invalid point size")}neg(t){if(t.byteLength==3*this.F.n8)return this.op1("_neg",t);if(t.byteLength==2*this.F.n8)return this.op1Affine("_negAffine",t);throw new Error("invalid point size")}double(t){if(t.byteLength==3*this.F.n8)return this.op1("_double",t);if(t.byteLength==2*this.F.n8)return this.op1("_doubleAffine",t);throw new Error("invalid point size")}isZero(t){if(t.byteLength==3*this.F.n8)return this.op1Bool("_isZero",t);if(t.byteLength==2*this.F.n8)return this.op1Bool("_isZeroAffine",t);throw new Error("invalid point size")}timesScalar(t,e){let a;if(e instanceof Uint8Array||(e=Q(n(e))),t.byteLength==3*this.F.n8)a=this.prefix+"_timesScalar";else{if(t.byteLength!=2*this.F.n8)throw new Error("invalid point size");a=this.prefix+"_timesScalarAffine"}return this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,e),this.tm.instance.exports[a](this.pOp1,this.pOp2,e.byteLength,this.pOp3),this.tm.getBuff(this.pOp3,3*this.F.n8)}timesFr(t,e){let a;if(t.byteLength==3*this.F.n8)a=this.prefix+"_timesFr";else{if(t.byteLength!=2*this.F.n8)throw new Error("invalid point size");a=this.prefix+"_timesFrAffine"}return this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,e),this.tm.instance.exports[a](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,3*this.F.n8)}eq(t,e){if(t.byteLength==3*this.F.n8){if(e.byteLength==3*this.F.n8)return this.op2bool("_eq",t,e);if(e.byteLength==2*this.F.n8)return this.op2bool("_eqMixed",t,e);throw new Error("invalid point size")}if(t.byteLength==2*this.F.n8){if(e.byteLength==3*this.F.n8)return this.op2bool("_eqMixed",e,t);if(e.byteLength==2*this.F.n8)return this.op2bool("_eqAffine",t,e);throw new Error("invalid point size")}throw new Error("invalid point size")}toAffine(t){if(t.byteLength==3*this.F.n8)return this.op1Affine("_toAffine",t);if(t.byteLength==2*this.F.n8)return t;throw new Error("invalid point size")}toJacobian(t){if(t.byteLength==3*this.F.n8)return t;if(t.byteLength==2*this.F.n8)return this.op1("_toJacobian",t);throw new Error("invalid point size")}toRprUncompressed(t,e,a){if(this.tm.setBuff(this.pOp1,a),a.byteLength==3*this.F.n8)this.tm.instance.exports[this.prefix+"_toAffine"](this.pOp1,this.pOp1);else if(a.byteLength!=2*this.F.n8)throw new Error("invalid point size");this.tm.instance.exports[this.prefix+"_LEMtoU"](this.pOp1,this.pOp1);const o=this.tm.getBuff(this.pOp1,2*this.F.n8);t.set(o,e)}fromRprUncompressed(t,e){const a=t.slice(e,e+2*this.F.n8);return this.tm.setBuff(this.pOp1,a),this.tm.instance.exports[this.prefix+"_UtoLEM"](this.pOp1,this.pOp1),this.tm.getBuff(this.pOp1,2*this.F.n8)}toRprCompressed(t,e,a){if(this.tm.setBuff(this.pOp1,a),a.byteLength==3*this.F.n8)this.tm.instance.exports[this.prefix+"_toAffine"](this.pOp1,this.pOp1);else if(a.byteLength!=2*this.F.n8)throw new Error("invalid point size");this.tm.instance.exports[this.prefix+"_LEMtoC"](this.pOp1,this.pOp1);const o=this.tm.getBuff(this.pOp1,this.F.n8);t.set(o,e)}fromRprCompressed(t,e){const a=t.slice(e,e+this.F.n8);return this.tm.setBuff(this.pOp1,a),this.tm.instance.exports[this.prefix+"_CtoLEM"](this.pOp1,this.pOp2),this.tm.getBuff(this.pOp2,2*this.F.n8)}toUncompressed(t){const e=new Uint8Array(2*this.F.n8);return this.toRprUncompressed(e,0,t),e}toRprLEM(t,e,a){if(a.byteLength!=2*this.F.n8){if(a.byteLength!=3*this.F.n8)throw new Error("invalid point size");{this.tm.setBuff(this.pOp1,a),this.tm.instance.exports[this.prefix+"_toAffine"](this.pOp1,this.pOp1);const o=this.tm.getBuff(this.pOp1,2*this.F.n8);t.set(o,e)}}else t.set(a,e)}fromRprLEM(t,e){return e=e||0,t.slice(e,e+2*this.F.n8)}toString(t,e){if(t.byteLength==3*this.F.n8){const a=this.F.toString(t.slice(0,this.F.n8),e),o=this.F.toString(t.slice(this.F.n8,2*this.F.n8),e),i=this.F.toString(t.slice(2*this.F.n8),e);return"[ ".concat(a,", ").concat(o,", ").concat(i," ]")}if(t.byteLength==2*this.F.n8){const a=this.F.toString(t.slice(0,this.F.n8),e),o=this.F.toString(t.slice(this.F.n8),e);return"[ ".concat(a,", ").concat(o," ]")}throw new Error("invalid point size")}isValid(t){if(this.isZero(t))return!0;const e=this.F,a=this.toAffine(t),o=a.slice(0,this.F.n8),i=a.slice(this.F.n8,2*this.F.n8),n=e.add(e.mul(e.square(o),o),this.b),c=e.square(i);return e.eq(n,c)}fromRng(t){const e=this.F;let a,o,i=[];do{i[0]=e.fromRng(t),a=t.nextBool(),o=e.add(e.mul(e.square(i[0]),i[0]),this.b)}while(!e.isSquare(o));i[1]=e.sqrt(o);a^e.isNegative(i[1])&&(i[1]=e.neg(i[1]));let n=new Uint8Array(2*this.F.n8);return n.set(i[0]),n.set(i[1],this.F.n8),this.cofactor&&(n=this.timesScalar(n,this.cofactor)),n}toObject(t){if(this.isZero(t))return[this.F.toObject(this.F.zero),this.F.toObject(this.F.one),this.F.toObject(this.F.zero)];const e=this.F.toObject(t.slice(0,this.F.n8)),a=this.F.toObject(t.slice(this.F.n8,2*this.F.n8));let o;return o=t.byteLength==3*this.F.n8?this.F.toObject(t.slice(2*this.F.n8,3*this.F.n8)):this.F.toObject(this.F.one),[e,a,o]}fromObject(t){const e=this.F.fromObject(t[0]),a=this.F.fromObject(t[1]);let o;if(o=3==t.length?this.F.fromObject(t[2]):this.F.one,this.F.isZero(o,this.F.one))return this.zeroAffine;if(this.F.eq(o,this.F.one)){const t=new Uint8Array(2*this.F.n8);return t.set(e),t.set(a,this.F.n8),t}{const t=new Uint8Array(3*this.F.n8);return t.set(e),t.set(a,this.F.n8),t.set(o,2*this.F.n8),t}}e(t){return t instanceof Uint8Array?t:this.fromObject(t)}x(t){return this.toAffine(t).slice(0,this.F.n8)}y(t){return this.toAffine(t).slice(this.F.n8)}}const Te=25;class Ne{constructor(){this.promise=new Promise(((t,e)=>{this.reject=e,this.resolve=t}))}}let Re;const Ke="(".concat('function thread(self) {\n    const MAXMEM = 32767;\n    let instance;\n    let memory;\n\n    if (self) {\n        self.onmessage = function(e) {\n            let data;\n            if (e.data) {\n                data = e.data;\n            } else {\n                data = e;\n            }\n\n            if (data[0].cmd == "INIT") {\n                init(data[0]).then(function() {\n                    self.postMessage(data.result);\n                });\n            } else if (data[0].cmd == "TERMINATE") {\n                self.close();\n            } else {\n                const res = runTask(data);\n                self.postMessage(res);\n            }\n        };\n    }\n\n    async function init(data) {\n        const code = new Uint8Array(data.code);\n        const wasmModule = await WebAssembly.compile(code);\n        memory = new WebAssembly.Memory({initial:data.init, maximum: MAXMEM});\n\n        instance = await WebAssembly.instantiate(wasmModule, {\n            env: {\n                "memory": memory\n            }\n        });\n    }\n\n\n\n    function alloc(length) {\n        const u32 = new Uint32Array(memory.buffer, 0, 1);\n        while (u32[0] & 3) u32[0]++;  // Return always aligned pointers\n        const res = u32[0];\n        u32[0] += length;\n        if (u32[0] + length > memory.buffer.byteLength) {\n            const currentPages = memory.buffer.byteLength / 0x10000;\n            let requiredPages = Math.floor((u32[0] + length) / 0x10000)+1;\n            if (requiredPages>MAXMEM) requiredPages=MAXMEM;\n            memory.grow(requiredPages-currentPages);\n        }\n        return res;\n    }\n\n    function allocBuffer(buffer) {\n        const p = alloc(buffer.byteLength);\n        setBuffer(p, buffer);\n        return p;\n    }\n\n    function getBuffer(pointer, length) {\n        const u8 = new Uint8Array(memory.buffer);\n        return new Uint8Array(u8.buffer, u8.byteOffset + pointer, length);\n    }\n\n    function setBuffer(pointer, buffer) {\n        const u8 = new Uint8Array(memory.buffer);\n        u8.set(new Uint8Array(buffer), pointer);\n    }\n\n    function runTask(task) {\n        if (task[0].cmd == "INIT") {\n            return init(task[0]);\n        }\n        const ctx = {\n            vars: [],\n            out: []\n        };\n        const u32a = new Uint32Array(memory.buffer, 0, 1);\n        const oldAlloc = u32a[0];\n        for (let i=0; i<task.length; i++) {\n            switch (task[i].cmd) {\n            case "ALLOCSET":\n                ctx.vars[task[i].var] = allocBuffer(task[i].buff);\n                break;\n            case "ALLOC":\n                ctx.vars[task[i].var] = alloc(task[i].len);\n                break;\n            case "SET":\n                setBuffer(ctx.vars[task[i].var], task[i].buff);\n                break;\n            case "CALL": {\n                const params = [];\n                for (let j=0; j<task[i].params.length; j++) {\n                    const p = task[i].params[j];\n                    if (typeof p.var !== "undefined") {\n                        params.push(ctx.vars[p.var] + (p.offset || 0));\n                    } else if (typeof p.val != "undefined") {\n                        params.push(p.val);\n                    }\n                }\n                instance.exports[task[i].fnName](...params);\n                break;\n            }\n            case "GET":\n                ctx.out[task[i].out] = getBuffer(ctx.vars[task[i].var], task[i].len).slice();\n                break;\n            default:\n                throw new Error("Invalid cmd");\n            }\n        }\n        const u32b = new Uint32Array(memory.buffer, 0, 1);\n        u32b[0] = oldAlloc;\n        return ctx.out;\n    }\n\n\n    return runTask;\n}',")(self)");if(null!==globalThis&&void 0!==globalThis&&globalThis.Blob){const t=(new TextEncoder).encode(Ke),e=new Blob([t],{type:"application/javascript"});Re=URL.createObjectURL(e)}else Re="data:application/javascript;base64,"+globalThis.btoa(Ke);async function Ve(t,e){const a=new je;a.memory=new WebAssembly.Memory({initial:Te}),a.u8=new Uint8Array(a.memory.buffer),a.u32=new Uint32Array(a.memory.buffer);const o=await WebAssembly.compile(t.code);if(a.instance=await WebAssembly.instantiate(o,{env:{memory:a.memory}}),null!==globalThis&&void 0!==globalThis&&globalThis.Worker||(e=!0),a.singleThread=e,a.initalPFree=a.u32[0],a.pq=t.pq,a.pr=t.pr,a.pG1gen=t.pG1gen,a.pG1zero=t.pG1zero,a.pG2gen=t.pG2gen,a.pG2zero=t.pG2zero,a.pOneT=t.pOneT,e)a.code=t.code,a.taskManager=function(t){const e=32767;let a,o;async function i(t){const i=new Uint8Array(t.code),n=await WebAssembly.compile(i);o=new WebAssembly.Memory({initial:t.init,maximum:e}),a=await WebAssembly.instantiate(n,{env:{memory:o}})}function n(t){const a=new Uint32Array(o.buffer,0,1);for(;3&a[0];)a[0]++;const i=a[0];if(a[0]+=t,a[0]+t>o.buffer.byteLength){const i=o.buffer.byteLength/65536;let n=Math.floor((a[0]+t)/65536)+1;n>e&&(n=e),o.grow(n-i)}return i}function c(t){const e=n(t.byteLength);return r(e,t),e}function l(t,e){const a=new Uint8Array(o.buffer);return new Uint8Array(a.buffer,a.byteOffset+t,e)}function r(t,e){new Uint8Array(o.buffer).set(new Uint8Array(e),t)}function s(t){if("INIT"==t[0].cmd)return i(t[0]);const e={vars:[],out:[]},s=new Uint32Array(o.buffer,0,1)[0];for(let o=0;o<t.length;o++)switch(t[o].cmd){case"ALLOCSET":e.vars[t[o].var]=c(t[o].buff);break;case"ALLOC":e.vars[t[o].var]=n(t[o].len);break;case"SET":r(e.vars[t[o].var],t[o].buff);break;case"CALL":{const i=[];for(let a=0;a<t[o].params.length;a++){const n=t[o].params[a];"undefined"!==typeof n.var?i.push(e.vars[n.var]+(n.offset||0)):"undefined"!=typeof n.val&&i.push(n.val)}a.exports[t[o].fnName](...i);break}case"GET":e.out[t[o].out]=l(e.vars[t[o].var],t[o].len).slice();break;default:throw new Error("Invalid cmd")}return new Uint32Array(o.buffer,0,1)[0]=s,e.out}return t&&(t.onmessage=function(e){let a;if(a=e.data?e.data:e,"INIT"==a[0].cmd)i(a[0]).then((function(){t.postMessage(a.result)}));else if("TERMINATE"==a[0].cmd)t.close();else{const e=s(a);t.postMessage(e)}}),s}(),await a.taskManager([{cmd:"INIT",init:Te,code:a.code.slice()}]),a.concurrency=1;else{a.workers=[],a.pendingDeferreds=[],a.working=[];let e=2;"object"===typeof navigator&&navigator.hardwareConcurrency&&(e=navigator.hardwareConcurrency),0==e&&(e=2),e>64&&(e=64),a.concurrency=e;for(let t=0;t<e;t++)a.workers[t]=new Worker(Re),a.workers[t].addEventListener("message",i(t)),a.working[t]=!1;const o=[];for(let i=0;i<a.workers.length;i++){const e=t.code.slice();o.push(a.postAction(i,[{cmd:"INIT",init:Te,code:e}],[e.buffer]))}await Promise.all(o)}return a;function i(t){return function(e){let o;o=e&&e.data?e.data:e,a.working[t]=!1,a.pendingDeferreds[t].resolve(o),a.processWorks()}}}class je{constructor(){this.actionQueue=[],this.oldPFree=0}startSyncOp(){if(0!=this.oldPFree)throw new Error("Sync operation in progress");this.oldPFree=this.u32[0]}endSyncOp(){if(0==this.oldPFree)throw new Error("No sync operation in progress");this.u32[0]=this.oldPFree,this.oldPFree=0}postAction(t,e,a,o){if(this.working[t])throw new Error("Posting a job t a working worker");return this.working[t]=!0,this.pendingDeferreds[t]=o||new Ne,this.workers[t].postMessage(e,a),this.pendingDeferreds[t].promise}processWorks(){for(let t=0;t<this.workers.length&&this.actionQueue.length>0;t++)if(0==this.working[t]){const e=this.actionQueue.shift();this.postAction(t,e.data,e.transfers,e.deferred)}}queueAction(t,e){const a=new Ne;if(this.singleThread){const e=this.taskManager(t);a.resolve(e)}else this.actionQueue.push({data:t,transfers:e,deferred:a}),this.processWorks();return a.promise}resetMemory(){this.u32[0]=this.initalPFree}allocBuff(t){const e=this.alloc(t.byteLength);return this.setBuff(e,t),e}getBuff(t,e){return this.u8.slice(t,t+e)}setBuff(t,e){this.u8.set(new Uint8Array(e),t)}alloc(t){for(;3&this.u32[0];)this.u32[0]++;const e=this.u32[0];return this.u32[0]+=t,e}async terminate(){for(let e=0;e<this.workers.length;e++)this.workers[e].postMessage([{cmd:"TERMINATE"}]);var t;await(t=200,new Promise((e=>setTimeout(e,t))))}}function He(t,e){const a=t[e],o=t.Fr,i=t.tm;t[e].batchApplyKey=async function(t,n,c,l,r){let s,d,_,u,g;if(l=l||"affine",r=r||"affine","G1"==e)"jacobian"==l?(_=3*a.F.n8,s="g1m_batchApplyKey"):(_=2*a.F.n8,s="g1m_batchApplyKeyMixed"),u=3*a.F.n8,"jacobian"==r?g=3*a.F.n8:(d="g1m_batchToAffine",g=2*a.F.n8);else if("G2"==e)"jacobian"==l?(_=3*a.F.n8,s="g2m_batchApplyKey"):(_=2*a.F.n8,s="g2m_batchApplyKeyMixed"),u=3*a.F.n8,"jacobian"==r?g=3*a.F.n8:(d="g2m_batchToAffine",g=2*a.F.n8);else{if("Fr"!=e)throw new Error("Invalid group: "+e);s="frm_batchApplyKey",_=a.n8,u=a.n8,g=a.n8}const f=Math.floor(t.byteLength/_),h=Math.floor(f/i.concurrency),p=[];c=o.e(c);let L=o.e(n);for(let e=0;e<i.concurrency;e++){let a;if(a=e<i.concurrency-1?h:f-e*h,0==a)continue;const n=[];n.push({cmd:"ALLOCSET",var:0,buff:t.slice(e*h*_,e*h*_+a*_)}),n.push({cmd:"ALLOCSET",var:1,buff:L}),n.push({cmd:"ALLOCSET",var:2,buff:c}),n.push({cmd:"ALLOC",var:3,len:a*Math.max(u,g)}),n.push({cmd:"CALL",fnName:s,params:[{var:0},{val:a},{var:1},{var:2},{var:3}]}),d&&n.push({cmd:"CALL",fnName:d,params:[{var:3},{val:a},{var:3}]}),n.push({cmd:"GET",out:0,var:3,len:a*g}),p.push(i.queueAction(n)),L=o.mul(L,o.exp(c,a))}const m=await Promise.all(p);let A;A=t instanceof Ue?new Ue(f*g):new Uint8Array(f*g);let I=0;for(let e=0;e<m.length;e++)A.set(m[e][0],I),I+=m[e][0].byteLength;return A}}const Ye=[1,1,1,1,2,3,4,5,6,7,7,8,9,10,11,12,13,13,14,15,16,16,17,17,17,17,17,17,17,17,17,17];function Je(t,e){const a=t[e],o=a.tm;async function i(t,o,i,n,c){if(!(t instanceof Uint8Array))throw n&&n.error("".concat(c," _multiExpChunk buffBases is not Uint8Array")),new Error("".concat(c," _multiExpChunk buffBases is not Uint8Array"));if(!(o instanceof Uint8Array))throw n&&n.error("".concat(c," _multiExpChunk buffScalars is not Uint8Array")),new Error("".concat(c," _multiExpChunk buffScalars is not Uint8Array"));let l,r;if(i=i||"affine","G1"==e)"affine"==i?(r="g1m_multiexpAffine_chunk",l=2*a.F.n8):(r="g1m_multiexp_chunk",l=3*a.F.n8);else{if("G2"!=e)throw new Error("Invalid group");"affine"==i?(r="g2m_multiexpAffine_chunk",l=2*a.F.n8):(r="g2m_multiexp_chunk",l=3*a.F.n8)}const s=Math.floor(t.byteLength/l);if(0==s)return a.zero;const d=Math.floor(o.byteLength/s);if(d*s!=o.byteLength)throw new Error("Scalar size does not match");const _=Ye[Se(s)],u=Math.floor((8*d-1)/_)+1,g=[];for(let e=0;e<u;e++){const i=[{cmd:"ALLOCSET",var:0,buff:t},{cmd:"ALLOCSET",var:1,buff:o},{cmd:"ALLOC",var:2,len:3*a.F.n8},{cmd:"CALL",fnName:r,params:[{var:0},{var:1},{val:d},{val:s},{val:e*_},{val:Math.min(8*d-e*_,_)},{var:2}]},{cmd:"GET",out:0,var:2,len:3*a.F.n8}];g.push(a.tm.queueAction(i))}const f=await Promise.all(g);let h=a.zero;for(let e=f.length-1;e>=0;e--){if(!a.isZero(h))for(let t=0;t<_;t++)h=a.double(h);h=a.add(h,f[e][0])}return h}async function n(t,n,c,l,r){const s=1<<22;let d;if("G1"==e)d="affine"==c?2*a.F.n8:3*a.F.n8;else{if("G2"!=e)throw new Error("Invalid group");d="affine"==c?2*a.F.n8:3*a.F.n8}const _=Math.floor(t.byteLength/d),u=Math.floor(n.byteLength/_);if(u*_!=n.byteLength)throw new Error("Scalar size does not match");const g=Ye[Se(_)],f=Math.floor((8*u-1)/g)+1;let h;h=Math.floor(_/(o.concurrency/f)),h>s&&(h=s),h<1024&&(h=1024);const p=[];for(let e=0;e<_;e+=h){l&&l.debug("Multiexp start: ".concat(r,": ").concat(e,"/").concat(_));const a=Math.min(_-e,h),o=t.slice(e*d,(e+a)*d),s=n.slice(e*u,(e+a)*u);p.push(i(o,s,c,l,r).then((t=>(l&&l.debug("Multiexp end: ".concat(r,": ").concat(e,"/").concat(_)),t))))}const L=await Promise.all(p);let m=a.zero;for(let e=L.length-1;e>=0;e--)m=a.add(m,L[e]);return m}a.multiExp=async function(t,e,a,o){return await n(t,e,"jacobian",a,o)},a.multiExpAffine=async function(t,e,a,o){return await n(t,e,"affine",a,o)}}function We(t,e){const a=t[e],o=t.Fr,i=a.tm;async function n(t,l,r,s,d,_){r=r||"affine",s=s||"affine";let u,g,f,h,p,L,m,A;"G1"==e?("affine"==r?(u=2*a.F.n8,h="g1m_batchToJacobian"):u=3*a.F.n8,g=3*a.F.n8,l&&(A="g1m_fftFinal"),m="g1m_fftJoin",L="g1m_fftMix","affine"==s?(f=2*a.F.n8,p="g1m_batchToAffine"):f=3*a.F.n8):"G2"==e?("affine"==r?(u=2*a.F.n8,h="g2m_batchToJacobian"):u=3*a.F.n8,g=3*a.F.n8,l&&(A="g2m_fftFinal"),m="g2m_fftJoin",L="g2m_fftMix","affine"==s?(f=2*a.F.n8,p="g2m_batchToAffine"):f=3*a.F.n8):"Fr"==e&&(u=a.n8,g=a.n8,f=a.n8,l&&(A="frm_fftFinal"),L="frm_fftMix",m="frm_fftJoin");let I=!1;Array.isArray(t)?(t=Pe(t,u),I=!0):t=t.slice(0,t.byteLength);const b=t.byteLength/u,y=Se(b);if(1<<y!=b)throw new Error("fft must be multiple of 2");if(y==o.s+1){let e;return e=l?await async function(t,e,a,i,l){let r,s;r=t.slice(0,t.byteLength/2),s=t.slice(t.byteLength/2,t.byteLength);const d=[];d.push(n(r,!0,e,"jacobian",i,l)),d.push(n(s,!0,e,"jacobian",i,l)),[r,s]=await Promise.all(d);const _=await c(r,s,"fftJoinExtInv",o.one,o.shiftInv,"jacobian",a,i,l);let u;u=_[0].byteLength>1<<28?new Ue(2*_[0].byteLength):new Uint8Array(2*_[0].byteLength);return u.set(_[0]),u.set(_[1],_[0].byteLength),u}(t,r,s,d,_):await async function(t,e,a,i,l){let r,s;r=t.slice(0,t.byteLength/2),s=t.slice(t.byteLength/2,t.byteLength);const d=[];[r,s]=await c(r,s,"fftJoinExt",o.one,o.shift,e,"jacobian",i,l),d.push(n(r,!1,"jacobian",a,i,l)),d.push(n(s,!1,"jacobian",a,i,l));const _=await Promise.all(d);let u;u=_[0].byteLength>1<<28?new Ue(2*_[0].byteLength):new Uint8Array(2*_[0].byteLength);return u.set(_[0]),u.set(_[1],_[0].byteLength),u}(t,r,s,d,_),I?Oe(e,f):e}let C,w,B;l&&(C=o.inv(o.e(b))),ve(t,u);let x=Math.min(16384,b),F=b/x;for(;F<i.concurrency&&x>=16;)F*=2,x/=2;const E=Se(x),S=[];for(let e=0;e<F;e++){d&&d.debug("".concat(_,": fft ").concat(y," mix start: ").concat(e,"/").concat(F));const a=[];a.push({cmd:"ALLOC",var:0,len:g*x});const o=t.slice(x*e*u,x*(e+1)*u);a.push({cmd:"SET",var:0,buff:o}),h&&a.push({cmd:"CALL",fnName:h,params:[{var:0},{val:x},{var:0}]});for(let t=1;t<=E;t++)a.push({cmd:"CALL",fnName:L,params:[{var:0},{val:x},{val:t}]});E==y?(A&&(a.push({cmd:"ALLOCSET",var:1,buff:C}),a.push({cmd:"CALL",fnName:A,params:[{var:0},{val:x},{var:1}]})),p&&a.push({cmd:"CALL",fnName:p,params:[{var:0},{val:x},{var:0}]}),a.push({cmd:"GET",out:0,var:0,len:x*f})):a.push({cmd:"GET",out:0,var:0,len:g*x}),S.push(i.queueAction(a).then((t=>(d&&d.debug("".concat(_,": fft ").concat(y," mix end: ").concat(e,"/").concat(F)),t))))}B=await Promise.all(S);for(let e=0;e<F;e++)B[e]=B[e][0];for(let e=E+1;e<=y;e++){d&&d.debug("".concat(_,": fft  ").concat(y,"  join: ").concat(e,"/").concat(y));const t=1<<y-e,a=F/t,n=[];for(let l=0;l<t;l++)for(let c=0;c<a/2;c++){const r=o.exp(o.w[e],c*x),s=o.w[e],u=l*a+c,h=l*a+c+a/2,L=[];L.push({cmd:"ALLOCSET",var:0,buff:B[u]}),L.push({cmd:"ALLOCSET",var:1,buff:B[h]}),L.push({cmd:"ALLOCSET",var:2,buff:r}),L.push({cmd:"ALLOCSET",var:3,buff:s}),L.push({cmd:"CALL",fnName:m,params:[{var:0},{var:1},{val:x},{var:2},{var:3}]}),e==y?(A&&(L.push({cmd:"ALLOCSET",var:4,buff:C}),L.push({cmd:"CALL",fnName:A,params:[{var:0},{val:x},{var:4}]}),L.push({cmd:"CALL",fnName:A,params:[{var:1},{val:x},{var:4}]})),p&&(L.push({cmd:"CALL",fnName:p,params:[{var:0},{val:x},{var:0}]}),L.push({cmd:"CALL",fnName:p,params:[{var:1},{val:x},{var:1}]})),L.push({cmd:"GET",out:0,var:0,len:x*f}),L.push({cmd:"GET",out:1,var:1,len:x*f})):(L.push({cmd:"GET",out:0,var:0,len:x*g}),L.push({cmd:"GET",out:1,var:1,len:x*g})),n.push(i.queueAction(L).then((o=>(d&&d.debug("".concat(_,": fft ").concat(y," join  ").concat(e,"/").concat(y,"  ").concat(l+1,"/").concat(t," ").concat(c,"/").concat(a/2)),o))))}const c=await Promise.all(n);for(let e=0;e<t;e++)for(let t=0;t<a/2;t++){const o=e*a+t,i=e*a+t+a/2,n=c.shift();B[o]=n[0],B[i]=n[1]}}if(w=t instanceof Ue?new Ue(b*f):new Uint8Array(b*f),l){w.set(B[0].slice((x-1)*f));let t=f;for(let e=F-1;e>0;e--)w.set(B[e],t),t+=x*f,delete B[e];w.set(B[0].slice(0,(x-1)*f),t),delete B[0]}else for(let e=0;e<F;e++)w.set(B[e],x*f*e),delete B[e];return I?Oe(w,f):w}async function c(t,n,c,l,r,s,d,_,u){let g,f,h,p,L,m;if("G1"==e)"affine"==s?(L=2*a.F.n8,f="g1m_batchToJacobian"):L=3*a.F.n8,m=3*a.F.n8,g="g1m_"+c,"affine"==d?(h="g1m_batchToAffine",p=2*a.F.n8):p=3*a.F.n8;else if("G2"==e)"affine"==s?(L=2*a.F.n8,f="g2m_batchToJacobian"):L=3*a.F.n8,g="g2m_"+c,m=3*a.F.n8,"affine"==d?(h="g2m_batchToAffine",p=2*a.F.n8):p=3*a.F.n8;else{if("Fr"!=e)throw new Error("Invalid group");L=o.n8,p=o.n8,m=o.n8,g="frm_"+c}if(t.byteLength!=n.byteLength)throw new Error("Invalid buffer size");const A=Math.floor(t.byteLength/L);if(A!=1<<Se(A))throw new Error("Invalid number of points");let I=Math.floor(A/i.concurrency);I<16&&(I=16),I>65536&&(I=65536);const b=[];for(let e=0;e<A;e+=I){_&&_.debug("".concat(u,": fftJoinExt Start: ").concat(e,"/").concat(A));const a=Math.min(A-e,I),c=o.mul(l,o.exp(r,e)),s=[],d=t.slice(e*L,(e+a)*L),y=n.slice(e*L,(e+a)*L);s.push({cmd:"ALLOC",var:0,len:m*a}),s.push({cmd:"SET",var:0,buff:d}),s.push({cmd:"ALLOC",var:1,len:m*a}),s.push({cmd:"SET",var:1,buff:y}),s.push({cmd:"ALLOCSET",var:2,buff:c}),s.push({cmd:"ALLOCSET",var:3,buff:r}),f&&(s.push({cmd:"CALL",fnName:f,params:[{var:0},{val:a},{var:0}]}),s.push({cmd:"CALL",fnName:f,params:[{var:1},{val:a},{var:1}]})),s.push({cmd:"CALL",fnName:g,params:[{var:0},{var:1},{val:a},{var:2},{var:3},{val:o.s}]}),h&&(s.push({cmd:"CALL",fnName:h,params:[{var:0},{val:a},{var:0}]}),s.push({cmd:"CALL",fnName:h,params:[{var:1},{val:a},{var:1}]})),s.push({cmd:"GET",out:0,var:0,len:a*p}),s.push({cmd:"GET",out:1,var:1,len:a*p}),b.push(i.queueAction(s).then((t=>(_&&_.debug("".concat(u,": fftJoinExt End: ").concat(e,"/").concat(A)),t))))}const y=await Promise.all(b);let C,w;A*p>1<<28?(C=new Ue(A*p),w=new Ue(A*p)):(C=new Uint8Array(A*p),w=new Uint8Array(A*p));let B=0;for(let e=0;e<y.length;e++)C.set(y[e][0],B),w.set(y[e][1],B),B+=y[e][0].byteLength;return[C,w]}a.fft=async function(t,e,a,o,i){return await n(t,!1,e,a,o,i)},a.ifft=async function(t,e,a,o,i){return await n(t,!0,e,a,o,i)},a.lagrangeEvaluations=async function(t,i,l,r,s){let d;if(i=i||"affine",l=l||"affine","G1"==e)d="affine"==i?2*a.F.n8:3*a.F.n8;else if("G2"==e)d="affine"==i?2*a.F.n8:3*a.F.n8;else{if("Fr"!=e)throw new Error("Invalid group");d=o.n8}const _=t.byteLength/d,u=Se(_);if(2**u*d!=t.byteLength)throw r&&r.error("lagrangeEvaluations iinvalid input size"),new Error("lagrangeEvaluations invalid Input size");if(u<=o.s)return await a.ifft(t,i,l,r,s);if(u>o.s+1)throw r&&r.error("lagrangeEvaluations input too big"),new Error("lagrangeEvaluations input too big");let g=t.slice(0,t.byteLength/2),f=t.slice(t.byteLength/2,t.byteLength);const h=o.exp(o.shift,_/2),p=o.inv(o.sub(o.one,h));[g,f]=await c(g,f,"prepareLagrangeEvaluation",p,o.shiftInv,i,"jacobian",r,s+" prep");const L=[];let m;return L.push(n(g,!0,"jacobian",l,r,s+" t0")),L.push(n(f,!0,"jacobian",l,r,s+" t1")),[g,f]=await Promise.all(L),m=g.byteLength>1<<28?new Ue(2*g.byteLength):new Uint8Array(2*g.byteLength),m.set(g),m.set(f,g.byteLength),m},a.fftMix=async function(t){const n=3*a.F.n8;let c,l;if("G1"==e)c="g1m_fftMix",l="g1m_fftJoin";else if("G2"==e)c="g2m_fftMix",l="g2m_fftJoin";else{if("Fr"!=e)throw new Error("Invalid group");c="frm_fftMix",l="frm_fftJoin"}const r=Math.floor(t.byteLength/n),s=Se(r);let d=1<<Se(i.concurrency);r<=2*d&&(d=1);const _=r/d,u=Se(_),g=[];for(let e=0;e<d;e++){const a=[],o=t.slice(e*_*n,(e+1)*_*n);a.push({cmd:"ALLOCSET",var:0,buff:o});for(let t=1;t<=u;t++)a.push({cmd:"CALL",fnName:c,params:[{var:0},{val:_},{val:t}]});a.push({cmd:"GET",out:0,var:0,len:_*n}),g.push(i.queueAction(a))}const f=await Promise.all(g),h=[];for(let e=0;e<f.length;e++)h[e]=f[e][0];for(let e=u+1;e<=s;e++){const t=1<<s-e,a=d/t,c=[];for(let s=0;s<t;s++)for(let t=0;t<a/2;t++){const r=o.exp(o.w[e],t*_),d=o.w[e],u=s*a+t,g=s*a+t+a/2,f=[];f.push({cmd:"ALLOCSET",var:0,buff:h[u]}),f.push({cmd:"ALLOCSET",var:1,buff:h[g]}),f.push({cmd:"ALLOCSET",var:2,buff:r}),f.push({cmd:"ALLOCSET",var:3,buff:d}),f.push({cmd:"CALL",fnName:l,params:[{var:0},{var:1},{val:_},{var:2},{var:3}]}),f.push({cmd:"GET",out:0,var:0,len:_*n}),f.push({cmd:"GET",out:1,var:1,len:_*n}),c.push(i.queueAction(f))}const r=await Promise.all(c);for(let e=0;e<t;e++)for(let t=0;t<a/2;t++){const o=e*a+t,i=e*a+t+a/2,n=r.shift();h[o]=n[0],h[i]=n[1]}}let p;p=t instanceof Ue?new Ue(r*n):new Uint8Array(r*n);let L=0;for(let e=0;e<d;e++)p.set(h[e],L),L+=h[e].byteLength;return p},a.fftJoin=async function(t,n,c,l){const r=3*a.F.n8;let s;if("G1"==e)s="g1m_fftJoin";else if("G2"==e)s="g2m_fftJoin";else{if("Fr"!=e)throw new Error("Invalid group");s="frm_fftJoin"}if(t.byteLength!=n.byteLength)throw new Error("Invalid buffer size");const d=Math.floor(t.byteLength/r);if(d!=1<<Se(d))throw new Error("Invalid number of points");let _=1<<Se(i.concurrency);d<=2*_&&(_=1);const u=d/_,g=[];for(let e=0;e<_;e++){const a=[],d=o.mul(c,o.exp(l,e*u)),_=t.slice(e*u*r,(e+1)*u*r),f=n.slice(e*u*r,(e+1)*u*r);a.push({cmd:"ALLOCSET",var:0,buff:_}),a.push({cmd:"ALLOCSET",var:1,buff:f}),a.push({cmd:"ALLOCSET",var:2,buff:d}),a.push({cmd:"ALLOCSET",var:3,buff:l}),a.push({cmd:"CALL",fnName:s,params:[{var:0},{var:1},{val:u},{var:2},{var:3}]}),a.push({cmd:"GET",out:0,var:0,len:u*r}),a.push({cmd:"GET",out:1,var:1,len:u*r}),g.push(i.queueAction(a))}const f=await Promise.all(g);let h,p;t instanceof Ue?(h=new Ue(d*r),p=new Ue(d*r)):(h=new Uint8Array(d*r),p=new Uint8Array(d*r));let L=0;for(let e=0;e<f.length;e++)h.set(f[e][0],L),p.set(f[e][1],L),L+=f[e][0].byteLength;return[h,p]},a.fftFinal=async function(t,o){const n=3*a.F.n8,c=2*a.F.n8;let l,r;if("G1"==e)l="g1m_fftFinal",r="g1m_batchToAffine";else{if("G2"!=e)throw new Error("Invalid group");l="g2m_fftFinal",r="g2m_batchToAffine"}const s=Math.floor(t.byteLength/n);if(s!=1<<Se(s))throw new Error("Invalid number of points");const d=Math.floor(s/i.concurrency),_=[];for(let e=0;e<i.concurrency;e++){let a;if(a=e<i.concurrency-1?d:s-e*d,0==a)continue;const u=[],g=t.slice(e*d*n,(e*d+a)*n);u.push({cmd:"ALLOCSET",var:0,buff:g}),u.push({cmd:"ALLOCSET",var:1,buff:o}),u.push({cmd:"CALL",fnName:l,params:[{var:0},{val:a},{var:1}]}),u.push({cmd:"CALL",fnName:r,params:[{var:0},{val:a},{var:0}]}),u.push({cmd:"GET",out:0,var:0,len:a*c}),_.push(i.queueAction(u))}const u=await Promise.all(_);let g;g=t instanceof Ue?new Ue(s*c):new Uint8Array(s*c);let f=0;for(let e=u.length-1;e>=0;e--)g.set(u[e][0],f),f+=u[e][0].byteLength;return g}}async function Ze(t){const e=await Ve(t.wasm,t.singleThread),a={};return a.q=n(t.wasm.q.toString()),a.r=n(t.wasm.r.toString()),a.name=t.name,a.tm=e,a.prePSize=t.wasm.prePSize,a.preQSize=t.wasm.preQSize,a.Fr=new ze(e,"frm",t.n8r,t.r),a.F1=new ze(e,"f1m",t.n8q,t.q),a.F2=new De(e,"f2m",a.F1),a.G1=new ke(e,"g1m",a.F1,t.wasm.pG1gen,t.wasm.pG1b,t.cofactorG1),a.G2=new ke(e,"g2m",a.F2,t.wasm.pG2gen,t.wasm.pG2b,t.cofactorG2),a.F6=new Ge(e,"f6m",a.F2),a.F12=new De(e,"ftm",a.F6),a.Gt=a.F12,He(a,"G1"),He(a,"G2"),He(a,"Fr"),Je(a,"G1"),Je(a,"G2"),We(a,"G1"),We(a,"G2"),We(a,"Fr"),function(t){const e=t.tm;t.pairing=function(a,o){e.startSyncOp();const i=e.allocBuff(t.G1.toJacobian(a)),n=e.allocBuff(t.G2.toJacobian(o)),c=e.alloc(t.Gt.n8);e.instance.exports[t.name+"_pairing"](i,n,c);const l=e.getBuff(c,t.Gt.n8);return e.endSyncOp(),l},t.pairingEq=async function(){let a,o;arguments.length%2==1?(a=arguments[arguments.length-1],o=(arguments.length-1)/2):(a=t.Gt.one,o=arguments.length/2);const i=[];for(let s=0;s<o;s++){const a=[],o=t.G1.toJacobian(arguments[2*s]);a.push({cmd:"ALLOCSET",var:0,buff:o}),a.push({cmd:"ALLOC",var:1,len:t.prePSize});const n=t.G2.toJacobian(arguments[2*s+1]);a.push({cmd:"ALLOCSET",var:2,buff:n}),a.push({cmd:"ALLOC",var:3,len:t.preQSize}),a.push({cmd:"ALLOC",var:4,len:t.Gt.n8}),a.push({cmd:"CALL",fnName:t.name+"_prepareG1",params:[{var:0},{var:1}]}),a.push({cmd:"CALL",fnName:t.name+"_prepareG2",params:[{var:2},{var:3}]}),a.push({cmd:"CALL",fnName:t.name+"_millerLoop",params:[{var:1},{var:3},{var:4}]}),a.push({cmd:"GET",out:0,var:4,len:t.Gt.n8}),i.push(e.queueAction(a))}const n=await Promise.all(i);e.startSyncOp();const c=e.alloc(t.Gt.n8);e.instance.exports.ftm_one(c);for(let t=0;t<n.length;t++){const a=e.allocBuff(n[t][0]);e.instance.exports.ftm_mul(c,a,c)}e.instance.exports[t.name+"_finalExponentiation"](c,c);const l=e.allocBuff(a),r=!!e.instance.exports.ftm_eq(c,l);return e.endSyncOp(),r},t.prepareG1=function(t){this.tm.startSyncOp();const e=this.tm.allocBuff(t),a=this.tm.alloc(this.prePSize);this.tm.instance.exports[this.name+"_prepareG1"](e,a);const o=this.tm.getBuff(a,this.prePSize);return this.tm.endSyncOp(),o},t.prepareG2=function(t){this.tm.startSyncOp();const e=this.tm.allocBuff(t),a=this.tm.alloc(this.preQSize);this.tm.instance.exports[this.name+"_prepareG2"](e,a);const o=this.tm.getBuff(a,this.preQSize);return this.tm.endSyncOp(),o},t.millerLoop=function(t,e){this.tm.startSyncOp();const a=this.tm.allocBuff(t),o=this.tm.allocBuff(e),i=this.tm.alloc(this.Gt.n8);this.tm.instance.exports[this.name+"_millerLoop"](a,o,i);const n=this.tm.getBuff(i,this.Gt.n8);return this.tm.endSyncOp(),n},t.finalExponentiation=function(t){this.tm.startSyncOp();const e=this.tm.allocBuff(t),a=this.tm.alloc(this.Gt.n8);this.tm.instance.exports[this.name+"_finalExponentiation"](e,a);const o=this.tm.getBuff(a,this.Gt.n8);return this.tm.endSyncOp(),o}}(a),a.array2buffer=function(t,e){const a=new Uint8Array(e*t.length);for(let o=0;o<t.length;o++)a.set(t[o],o*e);return a},a.buffer2array=function(t,e){const a=t.byteLength/e,o=new Array(a);for(let i=0;i<a;i++)o[i]=t.slice(i*e,i*e+e);return o},a}function Xe(t){return BigInt(t)}function $e(t){return t<0n}function ta(t){return 0n===t}function ea(t){const e=[],a=Xe(t);return e.push(Number(0xFFn&a)),e.push(Number(a>>8n&0xFFn)),e.push(Number(a>>16n&0xFFn)),e.push(Number(a>>24n&0xFFn)),e}function aa(t){const e=function(t){for(var e=[],a=0;a<t.length;a++){var o=t.charCodeAt(a);o<128?e.push(o):o<2048?e.push(192|o>>6,128|63&o):o<55296||o>=57344?e.push(224|o>>12,128|o>>6&63,128|63&o):(a++,o=65536+((1023&o)<<10|1023&t.charCodeAt(a)),e.push(240|o>>18,128|o>>12&63,128|o>>6&63,128|63&o))}return e}(t);return[...la(e.length),...e]}function oa(t){const e=[];let a=Xe(t);if($e(a))throw new Error("Number cannot be negative");for(;!ta(a);)e.push(Number(0x7Fn&a)),a>>=7n;0==e.length&&e.push(0);for(let o=0;o<e.length-1;o++)e[o]=128|e[o];return e}function ia(t){let e,a;const o=function(t){return $e(t)?t.toString(2).length-1:t.toString(2).length}(t);t<0?(a=!0,e=(1n<<BigInt(o))+t):(a=!1,e=Xe(t));const i=7-o%7,n=(1<<7-i)-1|128,c=oa(e+((1n<<BigInt(i))-1n<<BigInt(o)));return a||(c[c.length-1]=c[c.length-1]&n),c}function na(t){let e=Xe(t);if(e>0xFFFFFFFFn)throw new Error("Number too big");if(e>0x7FFFFFFFn&&(e-=0x100000000n),e<-2147483648n)throw new Error("Number too small");return ia(e)}function ca(t){let e=Xe(t);if(e>0xFFFFFFFFFFFFFFFFn)throw new Error("Number too big");if(e>0x7FFFFFFFFFFFFFFFn&&(e-=0x10000000000000000n),e<-9223372036854775808n)throw new Error("Number too small");return ia(e)}function la(t){let e=Xe(t);if(e>0xFFFFFFFFn)throw new Error("Number too big");return oa(e)}function ra(t){return Array.from(t,(function(t){return("0"+(255&t).toString(16)).slice(-2)})).join("")}class sa{constructor(t){this.func=t,this.functionName=t.functionName,this.module=t.module}setLocal(t,e){const a=this.func.localIdxByName[t];if(void 0===a)throw new Error("Local Variable not defined: Function: ".concat(this.functionName," local: ").concat(t," "));return[...e,33,...la(a)]}teeLocal(t,e){const a=this.func.localIdxByName[t];if(void 0===a)throw new Error("Local Variable not defined: Function: ".concat(this.functionName," local: ").concat(t," "));return[...e,34,...la(a)]}getLocal(t){const e=this.func.localIdxByName[t];if(void 0===e)throw new Error("Local Variable not defined: Function: ".concat(this.functionName," local: ").concat(t," "));return[32,...la(e)]}i64_load8_s(t,e,a){return[...t,48,void 0===a?0:a,...la(e||0)]}i64_load8_u(t,e,a){return[...t,49,void 0===a?0:a,...la(e||0)]}i64_load16_s(t,e,a){return[...t,50,void 0===a?1:a,...la(e||0)]}i64_load16_u(t,e,a){return[...t,51,void 0===a?1:a,...la(e||0)]}i64_load32_s(t,e,a){return[...t,52,void 0===a?2:a,...la(e||0)]}i64_load32_u(t,e,a){return[...t,53,void 0===a?2:a,...la(e||0)]}i64_load(t,e,a){return[...t,41,void 0===a?3:a,...la(e||0)]}i64_store(t,e,a,o){let i,n,c;return Array.isArray(e)?(i=0,n=3,c=e):Array.isArray(a)?(i=e,n=3,c=a):Array.isArray(o)&&(i=e,n=a,c=o),[...t,...c,55,n,...la(i)]}i64_store32(t,e,a,o){let i,n,c;return Array.isArray(e)?(i=0,n=2,c=e):Array.isArray(a)?(i=e,n=2,c=a):Array.isArray(o)&&(i=e,n=a,c=o),[...t,...c,62,n,...la(i)]}i64_store16(t,e,a,o){let i,n,c;return Array.isArray(e)?(i=0,n=1,c=e):Array.isArray(a)?(i=e,n=1,c=a):Array.isArray(o)&&(i=e,n=a,c=o),[...t,...c,61,n,...la(i)]}i64_store8(t,e,a,o){let i,n,c;return Array.isArray(e)?(i=0,n=0,c=e):Array.isArray(a)?(i=e,n=0,c=a):Array.isArray(o)&&(i=e,n=a,c=o),[...t,...c,60,n,...la(i)]}i32_load8_s(t,e,a){return[...t,44,void 0===a?0:a,...la(e||0)]}i32_load8_u(t,e,a){return[...t,45,void 0===a?0:a,...la(e||0)]}i32_load16_s(t,e,a){return[...t,46,void 0===a?1:a,...la(e||0)]}i32_load16_u(t,e,a){return[...t,47,void 0===a?1:a,...la(e||0)]}i32_load(t,e,a){return[...t,40,void 0===a?2:a,...la(e||0)]}i32_store(t,e,a,o){let i,n,c;return Array.isArray(e)?(i=0,n=2,c=e):Array.isArray(a)?(i=e,n=2,c=a):Array.isArray(o)&&(i=e,n=a,c=o),[...t,...c,54,n,...la(i)]}i32_store16(t,e,a,o){let i,n,c;return Array.isArray(e)?(i=0,n=1,c=e):Array.isArray(a)?(i=e,n=1,c=a):Array.isArray(o)&&(i=e,n=a,c=o),[...t,...c,59,n,...la(i)]}i32_store8(t,e,a,o){let i,n,c;return Array.isArray(e)?(i=0,n=0,c=e):Array.isArray(a)?(i=e,n=0,c=a):Array.isArray(o)&&(i=e,n=a,c=o),[...t,...c,58,n,...la(i)]}call(t){const e=this.module.functionIdxByName[t];if(void 0===e)throw new Error("Function not defined: Function: ".concat(t));for(var a=arguments.length,o=new Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];return[...[].concat(...o),16,...la(e)]}call_indirect(t){for(var e=arguments.length,a=new Array(e>1?e-1:0),o=1;o<e;o++)a[o-1]=arguments[o];return[...[].concat(...a),...t,17,0,0]}if(t,e,a){return a?[...t,4,64,...e,5,...a,11]:[...t,4,64,...e,11]}block(t){return[2,64,...t,11]}loop(){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];return[3,64,...[].concat(...e),11]}br_if(t,e){return[...e,13,...la(t)]}br(t){return[12,...la(t)]}ret(t){return[...t,15]}drop(t){return[...t,26]}i64_const(t){return[66,...ca(t)]}i32_const(t){return[65,...na(t)]}i64_eqz(t){return[...t,80]}i64_eq(t,e){return[...t,...e,81]}i64_ne(t,e){return[...t,...e,82]}i64_lt_s(t,e){return[...t,...e,83]}i64_lt_u(t,e){return[...t,...e,84]}i64_gt_s(t,e){return[...t,...e,85]}i64_gt_u(t,e){return[...t,...e,86]}i64_le_s(t,e){return[...t,...e,87]}i64_le_u(t,e){return[...t,...e,88]}i64_ge_s(t,e){return[...t,...e,89]}i64_ge_u(t,e){return[...t,...e,90]}i64_add(t,e){return[...t,...e,124]}i64_sub(t,e){return[...t,...e,125]}i64_mul(t,e){return[...t,...e,126]}i64_div_s(t,e){return[...t,...e,127]}i64_div_u(t,e){return[...t,...e,128]}i64_rem_s(t,e){return[...t,...e,129]}i64_rem_u(t,e){return[...t,...e,130]}i64_and(t,e){return[...t,...e,131]}i64_or(t,e){return[...t,...e,132]}i64_xor(t,e){return[...t,...e,133]}i64_shl(t,e){return[...t,...e,134]}i64_shr_s(t,e){return[...t,...e,135]}i64_shr_u(t,e){return[...t,...e,136]}i64_extend_i32_s(t){return[...t,172]}i64_extend_i32_u(t){return[...t,173]}i64_clz(t){return[...t,121]}i64_ctz(t){return[...t,122]}i32_eqz(t){return[...t,69]}i32_eq(t,e){return[...t,...e,70]}i32_ne(t,e){return[...t,...e,71]}i32_lt_s(t,e){return[...t,...e,72]}i32_lt_u(t,e){return[...t,...e,73]}i32_gt_s(t,e){return[...t,...e,74]}i32_gt_u(t,e){return[...t,...e,75]}i32_le_s(t,e){return[...t,...e,76]}i32_le_u(t,e){return[...t,...e,77]}i32_ge_s(t,e){return[...t,...e,78]}i32_ge_u(t,e){return[...t,...e,79]}i32_add(t,e){return[...t,...e,106]}i32_sub(t,e){return[...t,...e,107]}i32_mul(t,e){return[...t,...e,108]}i32_div_s(t,e){return[...t,...e,109]}i32_div_u(t,e){return[...t,...e,110]}i32_rem_s(t,e){return[...t,...e,111]}i32_rem_u(t,e){return[...t,...e,112]}i32_and(t,e){return[...t,...e,113]}i32_or(t,e){return[...t,...e,114]}i32_xor(t,e){return[...t,...e,115]}i32_shl(t,e){return[...t,...e,116]}i32_shr_s(t,e){return[...t,...e,117]}i32_shr_u(t,e){return[...t,...e,118]}i32_rotl(t,e){return[...t,...e,119]}i32_rotr(t,e){return[...t,...e,120]}i32_wrap_i64(t){return[...t,167]}i32_clz(t){return[...t,103]}i32_ctz(t){return[...t,104]}unreachable(){return[0]}current_memory(){return[63,0]}comment(){return[]}}const da={i32:127,i64:126,f32:125,f64:124,anyfunc:112,func:96,emptyblock:64};class _a{constructor(t,e,a,o,i){if("import"==a)this.fnType="import",this.moduleName=o,this.fieldName=i;else{if("internal"!=a)throw new Error("Invalid function fnType: "+a);this.fnType="internal"}this.module=t,this.fnName=e,this.params=[],this.locals=[],this.localIdxByName={},this.code=[],this.returnType=null,this.nextLocal=0}addParam(t,e){if(this.localIdxByName[t])throw new Error("param already exists. Function: ".concat(this.fnName,", Param: ").concat(t," "));const a=this.nextLocal++;this.localIdxByName[t]=a,this.params.push({type:e})}addLocal(t,e,a){const o=a||1;if(this.localIdxByName[t])throw new Error("local already exists. Function: ".concat(this.fnName,", Param: ").concat(t," "));const i=this.nextLocal++;this.localIdxByName[t]=i,this.locals.push({type:e,length:o})}setReturnType(t){if(this.returnType)throw new Error("returnType already defined. Function: ".concat(this.fnName));this.returnType=t}getSignature(){return[96,...[...la(this.params.length),...this.params.map((t=>da[t.type]))],...this.returnType?[1,da[this.returnType]]:[0]]}getBody(){const t=this.locals.map((t=>[...la(t.length),da[t.type]])),e=[...la(this.locals.length),...[].concat(...t),...this.code,11];return[...la(e.length),...e]}addCode(){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];this.code.push(...[].concat(...e))}getCodeBuilder(){return new sa(this)}}class ua{constructor(){this.functions=[],this.functionIdxByName={},this.nImportFunctions=0,this.nInternalFunctions=0,this.memory={pagesSize:1,moduleName:"env",fieldName:"memory"},this.free=8,this.datas=[],this.modules={},this.exports=[],this.functionsTable=[]}build(){return this._setSignatures(),new Uint8Array([...ea(1836278016),...ea(1),...this._buildType(),...this._buildImport(),...this._buildFunctionDeclarations(),...this._buildFunctionsTable(),...this._buildExports(),...this._buildElements(),...this._buildCode(),...this._buildData()])}addFunction(t){if("undefined"!==typeof this.functionIdxByName[t])throw new Error("Function already defined: ".concat(t));const e=this.functions.length;return this.functionIdxByName[t]=e,this.functions.push(new _a(this,t,"internal")),this.nInternalFunctions++,this.functions[e]}addIimportFunction(t,e,a){if("undefined"!==typeof this.functionIdxByName[t])throw new Error("Function already defined: ".concat(t));if(this.functions.length>0&&"internal"==this.functions[this.functions.length-1].type)throw new Error("Import functions must be declared before internal: ".concat(t));let o=a||t;const i=this.functions.length;return this.functionIdxByName[t]=i,this.functions.push(new _a(this,t,"import",e,o)),this.nImportFunctions++,this.functions[i]}setMemory(t,e,a){this.memory={pagesSize:t,moduleName:e||"env",fieldName:a||"memory"}}exportFunction(t,e){const a=e||t;if("undefined"===typeof this.functionIdxByName[t])throw new Error("Function not defined: ".concat(t));const o=this.functionIdxByName[t];a!=t&&(this.functionIdxByName[a]=o),this.exports.push({exportName:a,idx:o})}addFunctionToTable(t){const e=this.functionIdxByName[t];this.functionsTable.push(e)}addData(t,e){this.datas.push({offset:t,bytes:e})}alloc(t,e){let a,o;(Array.isArray(t)||ArrayBuffer.isView(t))&&"undefined"===typeof e?(a=t.length,o=t):(a=t,o=e),a=1+(a-1>>3)<<3;const i=this.free;return this.free+=a,o&&this.addData(i,o),i}allocString(t){const e=(new globalThis.TextEncoder).encode(t);return this.alloc([...e,0])}_setSignatures(){this.signatures=[];const t={};if(this.functionsTable.length>0){const e=this.functions[this.functionsTable[0]].getSignature();t["s_"+ra(e)]=0,this.signatures.push(e)}for(let e=0;e<this.functions.length;e++){const a=this.functions[e].getSignature(),o="s_"+ra(a);"undefined"===typeof t[o]&&(t[o]=this.signatures.length,this.signatures.push(a)),this.functions[e].signatureIdx=t[o]}}_buildSection(t,e){return[t,...la(e.length),...e]}_buildType(){return this._buildSection(1,[...la(this.signatures.length),...[].concat(...this.signatures)])}_buildImport(){const t=[];t.push([...aa(this.memory.moduleName),...aa(this.memory.fieldName),2,0,...la(this.memory.pagesSize)]);for(let e=0;e<this.nImportFunctions;e++)t.push([...aa(this.functions[e].moduleName),...aa(this.functions[e].fieldName),0,...la(this.functions[e].signatureIdx)]);return this._buildSection(2,la(t.length).concat(...t))}_buildFunctionDeclarations(){const t=[];for(let e=this.nImportFunctions;e<this.nImportFunctions+this.nInternalFunctions;e++)t.push(...la(this.functions[e].signatureIdx));return this._buildSection(3,[...la(t.length),...t])}_buildFunctionsTable(){return 0==this.functionsTable.length?[]:this._buildSection(4,[...la(1),112,0,...la(this.functionsTable.length)])}_buildElements(){if(0==this.functionsTable.length)return[];const t=[];for(let e=0;e<this.functionsTable.length;e++)t.push(...la(this.functionsTable[e]));return this._buildSection(9,[...la(1),...la(0),65,...na(0),11,...la(this.functionsTable.length),...t])}_buildExports(){const t=[];for(let e=0;e<this.exports.length;e++)t.push([...aa(this.exports[e].exportName),0,...la(this.exports[e].idx)]);return this._buildSection(7,la(t.length).concat(...t))}_buildCode(){const t=[];for(let e=this.nImportFunctions;e<this.nImportFunctions+this.nInternalFunctions;e++)t.push(this.functions[e].getBody());return this._buildSection(10,la(t.length).concat(...t))}_buildData(){const t=[];t.push([0,65,0,11,4,...ea(this.free)]);for(let e=0;e<this.datas.length;e++)t.push([0,65,...na(this.datas[e].offset),11,...la(this.datas[e].bytes.length),...this.datas[e].bytes]);return this._buildSection(11,la(t.length).concat(...t))}}async function ga(t,e){if(!t&&globalThis.curve_bn128)return globalThis.curve_bn128;const a=new ua;a.setMemory(25),Ce(a),e&&e(a);const o={};o.code=a.build(),o.pq=a.modules.f1m.pq,o.pr=a.modules.frm.pq,o.pG1gen=a.modules.bn128.pG1gen,o.pG1zero=a.modules.bn128.pG1zero,o.pG1b=a.modules.bn128.pG1b,o.pG2gen=a.modules.bn128.pG2gen,o.pG2zero=a.modules.bn128.pG2zero,o.pG2b=a.modules.bn128.pG2b,o.pOneT=a.modules.bn128.pOneT,o.prePSize=a.modules.bn128.prePSize,o.preQSize=a.modules.bn128.preQSize,o.n8q=32,o.n8r=32,o.q=a.modules.bn128.q,o.r=a.modules.bn128.r;const i={name:"bn128",wasm:o,q:n("21888242871839275222246405745257275088696311157297823662689037894645226208583"),r:n("21888242871839275222246405745257275088548364400416034343698204186575808495617"),n8q:32,n8r:32,cofactorG2:n("30644e72e131a029b85045b68181585e06ceecda572a2489345f2299c0f9fa8d",16),singleThread:!!t},c=await Ze(i);return c.terminate=async function(){i.singleThread||(globalThis.curve_bn128=null,await this.tm.terminate())},t||(globalThis.curve_bn128=c),c}async function fa(t,e){if(!t&&globalThis.curve_bls12381)return globalThis.curve_bls12381;const a=new ua;a.setMemory(25),we(a),e&&e(a);const o={};o.code=a.build(),o.pq=a.modules.f1m.pq,o.pr=a.modules.frm.pq,o.pG1gen=a.modules.bls12381.pG1gen,o.pG1zero=a.modules.bls12381.pG1zero,o.pG1b=a.modules.bls12381.pG1b,o.pG2gen=a.modules.bls12381.pG2gen,o.pG2zero=a.modules.bls12381.pG2zero,o.pG2b=a.modules.bls12381.pG2b,o.pOneT=a.modules.bls12381.pOneT,o.prePSize=a.modules.bls12381.prePSize,o.preQSize=a.modules.bls12381.preQSize,o.n8q=48,o.n8r=32,o.q=a.modules.bls12381.q,o.r=a.modules.bls12381.r;const i={name:"bls12381",wasm:o,q:n("1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab",16),r:n("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16),n8q:48,n8r:32,cofactorG1:n("0x396c8c005555e1568c00aaab0000aaab",16),cofactorG2:n("0x5d543a95414e7f1091d50792876a202cd91de4547085abaa68a205b2e5a7ddfa628f1cb4d9e82ef21537e293a6691ae1616ec6e786f0c70cf1c38e31c7238e5",16),singleThread:!!t},c=await Ze(i);return c.terminate=async function(){i.singleThread||(globalThis.curve_bls12381=null,await this.tm.terminate())},t||(globalThis.curve_bls12381=c),c}globalThis.curve_bn128=null,globalThis.curve_bls12381=null;n("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16),n("21888242871839275222246405745257275088548364400416034343698204186575808495617"),n("1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab",16),n("21888242871839275222246405745257275088696311157297823662689037894645226208583");const ha=M,pa=Qe;var La={};async function ma(t,e,a,o){if(a=a||262144,"number"!==typeof e&&["w+","wx+","r","ax+","a+"].indexOf(e)<0)throw new Error("Invalid open option");const i=await La.promises.open(t,e),n=await i.stat();return new Aa(i,n,a,o,t)}class Aa{constructor(t,e,a,o,i){for(this.fileName=i,this.fd=t,this.pos=0,this.pageSize=o||256;this.pageSize<e.blksize;)this.pageSize*=2;this.totalSize=e.size,this.totalPages=Math.floor((e.size-1)/this.pageSize)+1,this.maxPagesLoaded=Math.floor(a/this.pageSize)+1,this.pages={},this.pendingLoads=[],this.writing=!1,this.reading=!1,this.avBuffs=[],this.history={}}_loadPage(t){const e=this,a=new Promise(((a,o)=>{e.pendingLoads.push({page:t,resolve:a,reject:o})}));return e.__statusPage("After Load request: ",t),a}__statusPage(t,e){const a=[],o=this;if(!o.logHistory)return;a.push("=="+t+" "+e);let i="";for(let n=0;n<o.pendingLoads.length;n++)o.pendingLoads[n].page==e&&(i=i+" "+n);if(i&&a.push("Pending loads:"+i),"undefined"!=typeof o.pages[e]){const t=o.pages[e];a.push("Loaded"),a.push("pendingOps: "+t.pendingOps),t.loading&&a.push("loading: "+t.loading),t.writing&&a.push("writing"),t.dirty&&a.push("dirty")}a.push("=="),o.history[e]||(o.history[e]=[]),o.history[e].push(a)}__printHistory(t){const e=this;e.history[t]||console.log("Empty History ",t),console.log("History "+t);for(let a=0;a<e.history[t].length;a++)for(let o=0;o<e.history[t][a].length;o++)console.log("-> "+e.history[t][a][o])}_triggerLoad(){const t=this;if(t.reading)return;if(0==t.pendingLoads.length)return;const e=Object.keys(t.pages),a=[];for(let c=0;c<e.length;c++){const o=t.pages[parseInt(e[c])];0!=o.dirty||0!=o.pendingOps||o.writing||o.loading||a.push(parseInt(e[c]))}let o=t.maxPagesLoaded-e.length;const i=[];for(;t.pendingLoads.length>0&&("undefined"!=typeof t.pages[t.pendingLoads[0].page]||o>0||a.length>0);){const e=t.pendingLoads.shift();if("undefined"!=typeof t.pages[e.page]){t.pages[e.page].pendingOps++;const o=a.indexOf(e.page);o>=0&&a.splice(o,1),t.pages[e.page].loading?t.pages[e.page].loading.push(e):e.resolve(),t.__statusPage("After Load (cached): ",e.page)}else{if(o)o--;else{const e=a.shift();t.__statusPage("Before Unload: ",e),t.avBuffs.unshift(t.pages[e]),delete t.pages[e],t.__statusPage("After Unload: ",e)}e.page>=t.totalPages?(t.pages[e.page]=n(),e.resolve(),t.__statusPage("After Load (new): ",e.page)):(t.reading=!0,t.pages[e.page]=n(),t.pages[e.page].loading=[e],i.push(t.fd.read(t.pages[e.page].buff,0,t.pageSize,e.page*t.pageSize).then((a=>{t.pages[e.page].size=a.bytesRead;const o=t.pages[e.page].loading;delete t.pages[e.page].loading;for(let t=0;t<o.length;t++)o[t].resolve();return t.__statusPage("After Load (loaded): ",e.page),a}),(t=>{e.reject(t)}))),t.__statusPage("After Load (loading): ",e.page))}}function n(){if(t.avBuffs.length>0){const e=t.avBuffs.shift();return e.dirty=!1,e.pendingOps=1,e.size=0,e}return{dirty:!1,buff:new Uint8Array(t.pageSize),pendingOps:1,size:0}}Promise.all(i).then((()=>{t.reading=!1,t.pendingLoads.length>0&&setImmediate(t._triggerLoad.bind(t)),t._tryClose()}))}_triggerWrite(){const t=this;if(t.writing)return;const e=Object.keys(t.pages),a=[];for(let o=0;o<e.length;o++){const i=t.pages[parseInt(e[o])];i.dirty&&(i.dirty=!1,i.writing=!0,t.writing=!0,a.push(t.fd.write(i.buff,0,i.size,parseInt(e[o])*t.pageSize).then((()=>{i.writing=!1}),(e=>{console.log("ERROR Writing: "+e),t.error=e,t._tryClose()}))))}t.writing&&Promise.all(a).then((()=>{t.writing=!1,setImmediate(t._triggerWrite.bind(t)),t._tryClose(),t.pendingLoads.length>0&&setImmediate(t._triggerLoad.bind(t))}))}_getDirtyPage(){for(let t in this.pages)if(this.pages[t].dirty)return t;return-1}async write(t,e){if(0==t.byteLength)return;const a=this;if("undefined"==typeof e&&(e=a.pos),a.pos=e+t.byteLength,a.totalSize<e+t.byteLength&&(a.totalSize=e+t.byteLength),a.pendingClose)throw new Error("Writing a closing file");const o=Math.floor(e/a.pageSize),i=Math.floor((e+t.byteLength-1)/a.pageSize),n=[];for(let s=o;s<=i;s++)n.push(a._loadPage(s));a._triggerLoad();let c=o,l=e%a.pageSize,r=t.byteLength;for(;r>0;){await n[c-o];const e=l+r>a.pageSize?a.pageSize-l:r,i=t.slice(t.byteLength-r,t.byteLength-r+e);new Uint8Array(a.pages[c].buff.buffer,l,e).set(i),a.pages[c].dirty=!0,a.pages[c].pendingOps--,a.pages[c].size=Math.max(l+e,a.pages[c].size),c>=a.totalPages&&(a.totalPages=c+1),r-=e,c++,l=0,a.writing||setImmediate(a._triggerWrite.bind(a))}}async read(t,e){let a=new Uint8Array(t);return await this.readToBuffer(a,0,t,e),a}async readToBuffer(t,e,a,o){if(0==a)return;const i=this;if(a>i.pageSize*i.maxPagesLoaded*.8){const t=Math.floor(1.1*a);this.maxPagesLoaded=Math.floor(t/i.pageSize)+1}if("undefined"==typeof o&&(o=i.pos),i.pos=o+a,i.pendingClose)throw new Error("Reading a closing file");const n=Math.floor(o/i.pageSize),c=Math.floor((o+a-1)/i.pageSize),l=[];for(let _=n;_<=c;_++)l.push(i._loadPage(_));i._triggerLoad();let r=n,s=o%i.pageSize,d=o+a>i.totalSize?a-(o+a-i.totalSize):a;for(;d>0;){await l[r-n],i.__statusPage("After Await (read): ",r);const o=s+d>i.pageSize?i.pageSize-s:d,c=new Uint8Array(i.pages[r].buff.buffer,i.pages[r].buff.byteOffset+s,o);t.set(c,e+a-d),i.pages[r].pendingOps--,i.__statusPage("After Op done: ",r),d-=o,r++,s=0,i.pendingLoads.length>0&&setImmediate(i._triggerLoad.bind(i))}this.pos=o+a}_tryClose(){const t=this;if(!t.pendingClose)return;t.error&&t.pendingCloseReject(t.error);t._getDirtyPage()>=0||t.writing||t.reading||t.pendingLoads.length>0||t.pendingClose()}close(){const t=this;if(t.pendingClose)throw new Error("Closing the file twice");return new Promise(((e,a)=>{t.pendingClose=e,t.pendingCloseReject=a,t._tryClose()})).then((()=>{t.fd.close()}),(e=>{throw t.fd.close(),e}))}async discard(){await this.close(),await La.promises.unlink(this.fileName)}async writeULE32(t,e){const a=new Uint8Array(4);new DataView(a.buffer).setUint32(0,t,!0),await this.write(a,e)}async writeUBE32(t,e){const a=new Uint8Array(4);new DataView(a.buffer).setUint32(0,t,!1),await this.write(a,e)}async writeULE64(t,e){const a=new Uint8Array(8),o=new DataView(a.buffer);o.setUint32(0,4294967295&t,!0),o.setUint32(4,Math.floor(t/4294967296),!0),await this.write(a,e)}async readULE32(t){const e=await this.read(4,t);return new Uint32Array(e.buffer)[0]}async readUBE32(t){const e=await this.read(4,t);return new DataView(e.buffer).getUint32(0,!1)}async readULE64(t){const e=await this.read(8,t),a=new Uint32Array(e.buffer);return 4294967296*a[1]+a[0]}async readString(t){const e=this;if(e.pendingClose)throw new Error("Reading a closing file");let a="undefined"==typeof t?e.pos:t,o=Math.floor(a/e.pageSize),i=!1,n="";for(;!i;){let t=e._loadPage(o);e._triggerLoad(),await t,e.__statusPage("After Await (read): ",o);let c=a%e.pageSize;const l=new Uint8Array(e.pages[o].buff.buffer,e.pages[o].buff.byteOffset+c,e.pageSize-c);let r=l.findIndex((t=>0===t));i=-1!==r,i?(n+=(new TextDecoder).decode(l.slice(0,r)),e.pos=o*this.pageSize+c+r+1):(n+=(new TextDecoder).decode(l),e.pos=o*this.pageSize+c+l.length),e.pages[o].pendingOps--,e.__statusPage("After Op done: ",o),a=e.pos,o++,e.pendingLoads.length>0&&setImmediate(e._triggerLoad.bind(e))}return n}}const Ia=new Uint8Array(4),ba=new DataView(Ia.buffer),ya=new Uint8Array(8),Ca=new DataView(ya.buffer);class wa{constructor(){this.pageSize=16384}_resizeIfNeeded(t){if(t>this.allocSize){const e=Math.max(this.allocSize+(1<<20),Math.floor(1.1*this.allocSize),t),a=new Uint8Array(e);a.set(this.o.data),this.o.data=a,this.allocSize=e}}async write(t,e){if("undefined"==typeof e&&(e=this.pos),this.readOnly)throw new Error("Writing a read only file");this._resizeIfNeeded(e+t.byteLength),this.o.data.set(t.slice(),e),e+t.byteLength>this.totalSize&&(this.totalSize=e+t.byteLength),this.pos=e+t.byteLength}async readToBuffer(t,e,a,o){if("undefined"==typeof o&&(o=this.pos),this.readOnly&&o+a>this.totalSize)throw new Error("Reading out of bounds");this._resizeIfNeeded(o+a);const i=new Uint8Array(this.o.data.buffer,this.o.data.byteOffset+o,a);t.set(i,e),this.pos=o+a}async read(t,e){const a=new Uint8Array(t);return await this.readToBuffer(a,0,t,e),a}close(){this.o.data.byteLength!=this.totalSize&&(this.o.data=this.o.data.slice(0,this.totalSize))}async discard(){}async writeULE32(t,e){ba.setUint32(0,t,!0),await this.write(Ia,e)}async writeUBE32(t,e){ba.setUint32(0,t,!1),await this.write(Ia,e)}async writeULE64(t,e){Ca.setUint32(0,4294967295&t,!0),Ca.setUint32(4,Math.floor(t/4294967296),!0),await this.write(ya,e)}async readULE32(t){const e=await this.read(4,t);return new Uint32Array(e.buffer)[0]}async readUBE32(t){const e=await this.read(4,t);return new DataView(e.buffer).getUint32(0,!1)}async readULE64(t){const e=await this.read(8,t),a=new Uint32Array(e.buffer);return 4294967296*a[1]+a[0]}async readString(t){const e=this;let a="undefined"==typeof t?e.pos:t;if(a>this.totalSize){if(this.readOnly)throw new Error("Reading out of bounds");this._resizeIfNeeded(t)}const o=new Uint8Array(e.o.data.buffer,a,this.totalSize-a);let i=o.findIndex((t=>0===t)),n="";return-1!==i?(n=(new TextDecoder).decode(o.slice(0,i)),e.pos=a+i+1):e.pos=a,n}}const Ba=1<<22;const xa=new Uint8Array(4),Fa=new DataView(xa.buffer),Ea=new Uint8Array(8),Sa=new DataView(Ea.buffer);class va{constructor(){this.pageSize=16384}_resizeIfNeeded(t){if(t<=this.totalSize)return;if(this.readOnly)throw new Error("Reading out of file bounds");const e=Math.floor((t-1)/Ba)+1;for(let a=Math.max(this.o.data.length-1,0);a<e;a++){const o=new Uint8Array(a<e-1?Ba:t-(e-1)*Ba);a==this.o.data.length-1&&o.set(this.o.data[a]),this.o.data[a]=o}this.totalSize=t}async write(t,e){const a=this;if("undefined"==typeof e&&(e=a.pos),this.readOnly)throw new Error("Writing a read only file");this._resizeIfNeeded(e+t.byteLength);let o=Math.floor(e/Ba),i=e%Ba,n=t.byteLength;for(;n>0;){const e=i+n>Ba?Ba-i:n,c=t.slice(t.byteLength-n,t.byteLength-n+e);new Uint8Array(a.o.data[o].buffer,i,e).set(c),n-=e,o++,i=0}this.pos=e+t.byteLength}async readToBuffer(t,e,a,o){const i=this;if("undefined"==typeof o&&(o=i.pos),this.readOnly&&o+a>this.totalSize)throw new Error("Reading out of bounds");this._resizeIfNeeded(o+a);let n=Math.floor(o/Ba),c=o%Ba,l=a;for(;l>0;){const o=c+l>Ba?Ba-c:l,r=new Uint8Array(i.o.data[n].buffer,c,o);t.set(r,e+a-l),l-=o,n++,c=0}this.pos=o+a}async read(t,e){const a=new Uint8Array(t);return await this.readToBuffer(a,0,t,e),a}close(){}async discard(){}async writeULE32(t,e){Fa.setUint32(0,t,!0),await this.write(xa,e)}async writeUBE32(t,e){Fa.setUint32(0,t,!1),await this.write(xa,e)}async writeULE64(t,e){Sa.setUint32(0,4294967295&t,!0),Sa.setUint32(4,Math.floor(t/4294967296),!0),await this.write(Ea,e)}async readULE32(t){const e=await this.read(4,t);return new Uint32Array(e.buffer)[0]}async readUBE32(t){const e=await this.read(4,t);return new DataView(e.buffer).getUint32(0,!1)}async readULE64(t){const e=await this.read(8,t),a=new Uint32Array(e.buffer);return 4294967296*a[1]+a[0]}async readString(t){const e=this;let a="undefined"==typeof t?e.pos:t;if(a>this.totalSize){if(this.readOnly)throw new Error("Reading out of bounds");this._resizeIfNeeded(t)}let o=!1,i="";for(;!o;){let t=Math.floor(a/Ba),n=a%Ba;if(void 0===e.o.data[t])throw new Error("ERROR");let c=Math.min(2048,e.o.data[t].length-n);const l=new Uint8Array(e.o.data[t].buffer,n,c);let r=l.findIndex((t=>0===t));o=-1!==r,o?(i+=(new TextDecoder).decode(l.slice(0,r)),e.pos=t*Ba+n+r+1):(i+=(new TextDecoder).decode(l),e.pos=t*Ba+n+l.length),a=e.pos}return i}}const Pa=1024,Oa=512,Qa=2,qa=0,Ua=65536,Ma=8192;async function za(t,e,a){if("string"===typeof t&&(t={type:"file",fileName:t,cacheSize:e||Ua,pageSize:a||Ma}),"file"==t.type)return await ma(t.fileName,Pa|Oa|Qa,t.cacheSize,t.pageSize);if("mem"==t.type)return function(t){const e=t.initialSize||1<<20,a=new wa;return a.o=t,a.o.data=new Uint8Array(e),a.allocSize=e,a.totalSize=0,a.readOnly=!1,a.pos=0,a}(t);if("bigMem"==t.type)return function(t){const e=t.initialSize||0,a=new va;a.o=t;const o=e?Math.floor((e-1)/Ba)+1:0;a.o.data=[];for(let i=0;i<o-1;i++)a.o.data.push(new Uint8Array(Ba));return o&&a.o.data.push(new Uint8Array(e-Ba*(o-1))),a.totalSize=0,a.readOnly=!1,a.pos=0,a}(t);throw new Error("Invalid FastFile type: "+t.type)}async function Da(t,e,a){if(t instanceof Uint8Array&&(t={type:"mem",data:t}),"string"===typeof t){t={type:"mem",data:await fetch(t).then((function(t){return t.arrayBuffer()})).then((function(t){return new Uint8Array(t)}))}}if("file"==t.type)return await ma(t.fileName,qa,t.cacheSize,t.pageSize);if("mem"==t.type)return await function(t){const e=new wa;return e.o=t,e.allocSize=t.data.byteLength,e.totalSize=t.data.byteLength,e.readOnly=!0,e.pos=0,e}(t);if("bigMem"==t.type)return await function(t){const e=new va;return e.o=t,e.totalSize=(t.data.length-1)*Ba+t.data[t.data.length-1].byteLength,e.readOnly=!0,e.pos=0,e}(t);throw new Error("Invalid FastFile type: "+t.type)}async function Ga(t,e,a,o,i){const n=await Da(t),c=await n.read(4);let l="";for(let d=0;d<4;d++)l+=String.fromCharCode(c[d]);if(l!=e)throw new Error(t+": Invalid File format");if(await n.readULE32()>a)throw new Error("Version not supported");const r=await n.readULE32();let s=[];for(let d=0;d<r;d++){let t=await n.readULE32(),e=await n.readULE64();"undefined"==typeof s[t]&&(s[t]=[]),s[t].push({p:n.pos,size:e}),n.pos+=e}return{fd:n,sections:s}}async function ka(t,e,a,o,i,n){const c=await za(t,i,n),l=new Uint8Array(4);for(let r=0;r<4;r++)l[r]=e.charCodeAt(r);return await c.write(l,0),await c.writeULE32(a),await c.writeULE32(o),c}async function Ta(t,e){if("undefined"!==typeof t.writingSection)throw new Error("Already writing a section");await t.writeULE32(e),t.writingSection={pSectionSize:t.pos},await t.writeULE64(0)}async function Na(t){if("undefined"===typeof t.writingSection)throw new Error("Not writing a section");const e=t.pos-t.writingSection.pSectionSize-8,a=t.pos;t.pos=t.writingSection.pSectionSize,await t.writeULE64(e),t.pos=a,delete t.writingSection}async function Ra(t,e,a){if("undefined"!==typeof t.readingSection)throw new Error("Already reading a section");if(!e[a])throw new Error(t.fileName+": Missing section "+a);if(e[a].length>1)throw new Error(t.fileName+": Section Duplicated "+a);t.pos=e[a][0].p,t.readingSection=e[a][0]}async function Ka(t,e){if("undefined"===typeof t.readingSection)throw new Error("Not reading a section");if(!e&&t.pos-t.readingSection.p!=t.readingSection.size)throw new Error("Invalid section size reading");delete t.readingSection}async function Va(t,e,a,o){const i=new Uint8Array(a);ha.toRprLE(i,0,e,a),await t.write(i,o)}async function ja(t,e,a){const o=await t.read(e,a);return ha.fromRprLE(o,0,e)}async function Ha(t,e,a,o,i){if((o="undefined"===typeof o?0:o)+(i="undefined"===typeof i?e[a][0].size-o:i)>e[a][0].size)throw new Error("Reading out of the range of the section");let n;return n=i<1<<30?new Uint8Array(i):new Ue(i),await t.readToBuffer(n,0,i,e[a][0].p+o),n}ha.e("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16),ha.e("21888242871839275222246405745257275088548364400416034343698204186575808495617");const Ya=ha.e("1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab",16),Ja=ha.e("21888242871839275222246405745257275088696311157297823662689037894645226208583");async function Wa(t){let e;if(ha.eq(t,Ja))e=await ga();else{if(!ha.eq(t,Ya))throw new Error("Curve not supported: ".concat(ha.toString(t)));e=await fa()}return e}async function Za(t){let e;const a=t.toUpperCase().match(/[A-Za-z0-9]+/g).join("");if(["BN128","BN254","ALTBN128"].indexOf(a)>=0)e=await ga();else{if(!(["BLS12381"].indexOf(a)>=0))throw new Error("Curve not supported: ".concat(t));e=await fa()}return e}var Xa="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},$a={exports:{}},to=function t(e,a){if(!e){var o=new eo(a);throw Error.captureStackTrace&&Error.captureStackTrace(o,t),o}};class eo extends Error{}eo.prototype.name="AssertionError";var ao={exports:{}};function oo(t){return t.length}var io={byteLength:oo,toString:function(t){const e=t.byteLength;let a="";for(let o=0;o<e;o++)a+=String.fromCharCode(t[o]);return a},write:function(t,e){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:oo(e);const i=Math.min(o,t.byteLength-a);for(let n=0;n<i;n++)t[a+n]=e.charCodeAt(n);return i}};const no="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",co=new Uint8Array(256);for(let yi=0;yi<64;yi++)co[no.charCodeAt(yi)]=yi;function lo(t){let e=t.length;return 61===t.charCodeAt(e-1)&&e--,e>1&&61===t.charCodeAt(e-1)&&e--,3*e>>>2}co[45]=62,co[95]=63;var ro={byteLength:lo,toString:function(t){const e=t.byteLength;let a="";for(let o=0;o<e;o+=3)a+=no[t[o]>>2]+no[(3&t[o])<<4|t[o+1]>>4]+no[(15&t[o+1])<<2|t[o+2]>>6]+no[63&t[o+2]];return e%3===2?a=a.substring(0,a.length-1)+"=":e%3===1&&(a=a.substring(0,a.length-2)+"=="),a},write:function(t,e){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:lo(e);const i=Math.min(o,t.byteLength-a);for(let n=0,c=0;c<i;n+=4){const a=co[e.charCodeAt(n)],o=co[e.charCodeAt(n+1)],i=co[e.charCodeAt(n+2)],l=co[e.charCodeAt(n+3)];t[c++]=a<<2|o>>4,t[c++]=(15&o)<<4|i>>2,t[c++]=(3&i)<<6|63&l}return i}};function so(t){return t.length>>>1}var _o={byteLength:so,toString:function(t){const e=t.byteLength;t=new DataView(t.buffer,t.byteOffset,e);let a="",o=0;for(let i=e-e%4;o<i;o+=4)a+=t.getUint32(o).toString(16).padStart(8,"0");for(;o<e;o++)a+=t.getUint8(o).toString(16).padStart(2,"0");return a},write:function(t,e){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:so(e);const i=Math.min(o,t.byteLength-a);for(let n=0;n<i;n++){const o=uo(e.charCodeAt(2*n)),i=uo(e.charCodeAt(2*n+1));if(void 0===o||void 0===i)return t.subarray(0,n);t[a+n]=o<<4|i}return i}};function uo(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:void 0}function go(t){let e=0;for(let a=0,o=t.length;a<o;a++){const i=t.charCodeAt(a);if(i>=55296&&i<=56319&&a+1<o){const o=t.charCodeAt(a+1);if(o>=56320&&o<=57343){e+=4,a++;continue}}e+=i<=127?1:i<=2047?2:3}return e}let fo,ho;if("undefined"!==typeof TextDecoder){const t=new TextDecoder;fo=function(e){return t.decode(e)}}else fo=function(t){const e=t.byteLength;let a="",o=0;for(;o<e;){let i=t[o];if(i<=127){a+=String.fromCharCode(i),o++;continue}let n=0,c=0;if(i<=223?(n=1,c=31&i):i<=239?(n=2,c=15&i):i<=244&&(n=3,c=7&i),e-o-n>0){let e=0;for(;e<n;)i=t[o+e+1],c=c<<6|63&i,e+=1}else c=65533,n=e-o;a+=String.fromCodePoint(c),o+=n+1}return a};if("undefined"!==typeof TextEncoder){const t=new TextEncoder;ho=function(e,a){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:go(a);const n=Math.min(i,e.byteLength-o);return t.encodeInto(a,e.subarray(o,o+n)),n}}else ho=function(t,e){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:go(e);const i=Math.min(o,t.byteLength-a);t=t.subarray(a,a+i);let n=0,c=0;for(;n<e.length;){const a=e.codePointAt(n);if(a<=127){t[c++]=a,n++;continue}let o=0,i=0;for(a<=2047?(o=6,i=192):a<=65535?(o=12,i=224):a<=2097151&&(o=18,i=240),t[c++]=i|a>>o,o-=6;o>=0;)t[c++]=128|a>>o&63,o-=6;n+=a>=65536?2:1}return i};var po={byteLength:go,toString:fo,write:ho};function Lo(t){return 2*t.length}var mo,Ao,Io={byteLength:Lo,toString:function(t){const e=t.byteLength;let a="";for(let o=0;o<e-1;o+=2)a+=String.fromCharCode(t[o]+256*t[o+1]);return a},write:function(t,e){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Lo(e);const i=Math.min(o,t.byteLength-a);let n=i;for(let c=0;c<e.length&&!((n-=2)<0);++c){const o=e.charCodeAt(c),i=o>>8,n=o%256;t[a+2*c]=n,t[a+2*c+1]=i}return i}};!function(t,e){const a=io,o=ro,i=_o,n=po,c=Io,l=255===new Uint8Array(Uint16Array.of(255).buffer)[0];function r(t){switch(t){case"ascii":return a;case"base64":return o;case"hex":return i;case"utf8":case"utf-8":case void 0:return n;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c;default:throw new Error("Unknown encoding: ".concat(t))}}function s(t){return t instanceof Uint8Array}function d(t,e,a){return"string"===typeof t?function(t,e){const a=r(e),o=new Uint8Array(a.byteLength(t));return a.write(o,t,0,o.byteLength),o}(t,e):Array.isArray(t)?function(t){const e=new Uint8Array(t.length);return e.set(t),e}(t):ArrayBuffer.isView(t)?function(t){const e=new Uint8Array(t.byteLength);return e.set(t),e}(t):function(t,e,a){return new Uint8Array(t,e,a)}(t,e,a)}function _(t,e,a,o,i){if(0===t.byteLength)return-1;if("string"===typeof a?(o=a,a=0):void 0===a?a=i?0:t.length-1:a<0&&(a+=t.byteLength),a>=t.byteLength){if(i)return-1;a=t.byteLength-1}else if(a<0){if(!i)return-1;a=0}if("string"===typeof e)e=d(e,o);else if("number"===typeof e)return e&=255,i?t.indexOf(e,a):t.lastIndexOf(e,a);if(0===e.byteLength)return-1;if(i){let o=-1;for(let i=a;i<t.byteLength;i++)if(t[i]===e[-1===o?0:i-o]){if(-1===o&&(o=i),i-o+1===e.byteLength)return o}else-1!==o&&(i-=i-o),o=-1}else{a+e.byteLength>t.byteLength&&(a=t.byteLength-e.byteLength);for(let o=a;o>=0;o--){let a=!0;for(let i=0;i<e.byteLength;i++)if(t[o+i]!==e[i]){a=!1;break}if(a)return o}}return-1}function u(t,e,a,o){return _(t,e,a,o,!0)}function g(t,e,a){const o=t[e];t[e]=t[a],t[a]=o}t.exports=e={isBuffer:s,isEncoding:function(t){try{return r(t),!0}catch{return!1}},alloc:function(t,a,o){const i=new Uint8Array(t);return void 0!==a&&e.fill(i,a,0,i.byteLength,o),i},allocUnsafe:function(t){return new Uint8Array(t)},allocUnsafeSlow:function(t){return new Uint8Array(t)},byteLength:function(t,e){return r(e).byteLength(t)},compare:function(t,e){if(t===e)return 0;const a=Math.min(t.byteLength,e.byteLength);t=new DataView(t.buffer,t.byteOffset,t.byteLength),e=new DataView(e.buffer,e.byteOffset,e.byteLength);let o=0;for(let i=a-a%4;o<i;o+=4){if(t.getUint32(o,l)!==e.getUint32(o,l))break}for(;o<a;o++){const a=t.getUint8(o),i=e.getUint8(o);if(a<i)return-1;if(a>i)return 1}return t.byteLength>e.byteLength?1:t.byteLength<e.byteLength?-1:0},concat:function(t,e){void 0===e&&(e=t.reduce(((t,e)=>t+e.byteLength),0));const a=new Uint8Array(e);let o=0;for(const i of t){if(o+i.byteLength>a.byteLength){const t=i.subarray(0,a.byteLength-o);return a.set(t,o),a}a.set(i,o),o+=i.byteLength}return a},copy:function(t,e){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:t.byteLength;if(i>0&&i<o)return 0;if(i===o)return 0;if(0===t.byteLength||0===e.byteLength)return 0;if(a<0)throw new RangeError("targetStart is out of range");if(o<0||o>=t.byteLength)throw new RangeError("sourceStart is out of range");if(i<0)throw new RangeError("sourceEnd is out of range");a>=e.byteLength&&(a=e.byteLength),i>t.byteLength&&(i=t.byteLength),e.byteLength-a<i-o&&(i=e.length-a+o);const n=i-o;return t===e?e.copyWithin(a,o,i):e.set(t.subarray(o,i),a),n},equals:function(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;const a=t.byteLength;t=new DataView(t.buffer,t.byteOffset,t.byteLength),e=new DataView(e.buffer,e.byteOffset,e.byteLength);let o=0;for(let i=a-a%4;o<i;o+=4)if(t.getUint32(o,l)!==e.getUint32(o,l))return!1;for(;o<a;o++)if(t.getUint8(o)!==e.getUint8(o))return!1;return!0},fill:function(t,e,a,o,i){if("string"===typeof e?"string"===typeof a?(i=a,a=0,o=t.byteLength):"string"===typeof o&&(i=o,o=t.byteLength):"number"===typeof e?e&=255:"boolean"===typeof e&&(e=+e),a<0||t.byteLength<a||t.byteLength<o)throw new RangeError("Out of range index");if(void 0===a&&(a=0),void 0===o&&(o=t.byteLength),o<=a)return t;if(e||(e=0),"number"===typeof e)for(let n=a;n<o;++n)t[n]=e;else{const n=(e=s(e)?e:d(e,i)).byteLength;for(let i=0;i<o-a;++i)t[i+a]=e[i%n]}return t},from:d,includes:function(t,e,a,o){return-1!==u(t,e,a,o)},indexOf:u,lastIndexOf:function(t,e,a,o){return _(t,e,a,o,!1)},swap16:function(t){const e=t.byteLength;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let a=0;a<e;a+=2)g(t,a,a+1);return t},swap32:function(t){const e=t.byteLength;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let a=0;a<e;a+=4)g(t,a,a+3),g(t,a+1,a+2);return t},swap64:function(t){const e=t.byteLength;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let a=0;a<e;a+=8)g(t,a,a+7),g(t,a+1,a+6),g(t,a+2,a+5),g(t,a+3,a+4);return t},toBuffer:function(t){return t},toString:function(t,e){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.byteLength;const i=t.byteLength;return a>=i||o<=a?"":(a<0&&(a=0),o>i&&(o=i),(0!==a||o<i)&&(t=t.subarray(a,o)),r(e).toString(t))},write:function(t,e,a,o,i){return void 0===a?i="utf8":void 0===o&&"string"===typeof a?(i=a,a=void 0):void 0===i&&"string"===typeof o&&(i=o,o=void 0),r(i).write(t,e,a,o)},writeDoubleLE:function(t,e,a){return void 0===a&&(a=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat64(a,e,!0),a+8},writeFloatLE:function(t,e,a){return void 0===a&&(a=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat32(a,e,!0),a+4},writeUInt32LE:function(t,e,a){return void 0===a&&(a=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setUint32(a,e,!0),a+4},writeInt32LE:function(t,e,a){return void 0===a&&(a=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setInt32(a,e,!0),a+4},readDoubleLE:function(t,e){return void 0===e&&(e=0),new DataView(t.buffer,t.byteOffset,t.byteLength).getFloat64(e,!0)},readFloatLE:function(t,e){return void 0===e&&(e=0),new DataView(t.buffer,t.byteOffset,t.byteLength).getFloat32(e,!0)},readUInt32LE:function(t,e){return void 0===e&&(e=0),new DataView(t.buffer,t.byteOffset,t.byteLength).getUint32(e,!0)},readInt32LE:function(t,e){return void 0===e&&(e=0),new DataView(t.buffer,t.byteOffset,t.byteLength).getInt32(e,!0)}}}(ao,ao.exports);var bo=to,yo=ao.exports,Co=null,wo="undefined"!==typeof WebAssembly&&function(){if(Ao)return mo;Ao=1;var t=(()=>{for(var t=new Uint8Array(128),e=0;e<64;e++)t[e<26?e+65:e<52?e+71:e<62?e-4:4*e-205]=e;return e=>{for(var a=e.length,o=new Uint8Array(3*(a-("="==e[a-1])-("="==e[a-2]))/4|0),i=0,n=0;i<a;){var c=t[e.charCodeAt(i++)],l=t[e.charCodeAt(i++)],r=t[e.charCodeAt(i++)],s=t[e.charCodeAt(i++)];o[n++]=c<<2|l>>4,o[n++]=l<<4|r>>2,o[n++]=r<<6|s}return o}})(),e=((t,e)=>function(){return e||(0,t[Object.keys(t)[0]])((e={exports:{}}).exports,e),e.exports})({"wasm-binary:./blake2b.wat"(e,a){a.exports=t("AGFzbQEAAAABEANgAn9/AGADf39/AGABfwADBQQAAQICBQUBAQroBwdNBQZtZW1vcnkCAAxibGFrZTJiX2luaXQAAA5ibGFrZTJiX3VwZGF0ZQABDWJsYWtlMmJfZmluYWwAAhBibGFrZTJiX2NvbXByZXNzAAMKvz8EwAIAIABCADcDACAAQgA3AwggAEIANwMQIABCADcDGCAAQgA3AyAgAEIANwMoIABCADcDMCAAQgA3AzggAEIANwNAIABCADcDSCAAQgA3A1AgAEIANwNYIABCADcDYCAAQgA3A2ggAEIANwNwIABCADcDeCAAQoiS853/zPmE6gBBACkDAIU3A4ABIABCu86qptjQ67O7f0EIKQMAhTcDiAEgAEKr8NP0r+68tzxBECkDAIU3A5ABIABC8e30+KWn/aelf0EYKQMAhTcDmAEgAELRhZrv+s+Uh9EAQSApAwCFNwOgASAAQp/Y+dnCkdqCm39BKCkDAIU3A6gBIABC6/qG2r+19sEfQTApAwCFNwOwASAAQvnC+JuRo7Pw2wBBOCkDAIU3A7gBIABCADcDwAEgAEIANwPIASAAQgA3A9ABC20BA38gAEHAAWohAyAAQcgBaiEEIAQpAwCnIQUCQANAIAEgAkYNASAFQYABRgRAIAMgAykDACAFrXw3AwBBACEFIAAQAwsgACAFaiABLQAAOgAAIAVBAWohBSABQQFqIQEMAAsLIAQgBa03AwALYQEDfyAAQcABaiEBIABByAFqIQIgASABKQMAIAIpAwB8NwMAIABCfzcD0AEgAikDAKchAwJAA0AgA0GAAUYNASAAIANqQQA6AAAgA0EBaiEDDAALCyACIAOtNwMAIAAQAwuqOwIgfgl/IABBgAFqISEgAEGIAWohIiAAQZABaiEjIABBmAFqISQgAEGgAWohJSAAQagBaiEmIABBsAFqIScgAEG4AWohKCAhKQMAIQEgIikDACECICMpAwAhAyAkKQMAIQQgJSkDACEFICYpAwAhBiAnKQMAIQcgKCkDACEIQoiS853/zPmE6gAhCUK7zqqm2NDrs7t/IQpCq/DT9K/uvLc8IQtC8e30+KWn/aelfyEMQtGFmu/6z5SH0QAhDUKf2PnZwpHagpt/IQ5C6/qG2r+19sEfIQ9C+cL4m5Gjs/DbACEQIAApAwAhESAAKQMIIRIgACkDECETIAApAxghFCAAKQMgIRUgACkDKCEWIAApAzAhFyAAKQM4IRggACkDQCEZIAApA0ghGiAAKQNQIRsgACkDWCEcIAApA2AhHSAAKQNoIR4gACkDcCEfIAApA3ghICANIAApA8ABhSENIA8gACkD0AGFIQ8gASAFIBF8fCEBIA0gAYVCIIohDSAJIA18IQkgBSAJhUIYiiEFIAEgBSASfHwhASANIAGFQhCKIQ0gCSANfCEJIAUgCYVCP4ohBSACIAYgE3x8IQIgDiAChUIgiiEOIAogDnwhCiAGIAqFQhiKIQYgAiAGIBR8fCECIA4gAoVCEIohDiAKIA58IQogBiAKhUI/iiEGIAMgByAVfHwhAyAPIAOFQiCKIQ8gCyAPfCELIAcgC4VCGIohByADIAcgFnx8IQMgDyADhUIQiiEPIAsgD3whCyAHIAuFQj+KIQcgBCAIIBd8fCEEIBAgBIVCIIohECAMIBB8IQwgCCAMhUIYiiEIIAQgCCAYfHwhBCAQIASFQhCKIRAgDCAQfCEMIAggDIVCP4ohCCABIAYgGXx8IQEgECABhUIgiiEQIAsgEHwhCyAGIAuFQhiKIQYgASAGIBp8fCEBIBAgAYVCEIohECALIBB8IQsgBiALhUI/iiEGIAIgByAbfHwhAiANIAKFQiCKIQ0gDCANfCEMIAcgDIVCGIohByACIAcgHHx8IQIgDSAChUIQiiENIAwgDXwhDCAHIAyFQj+KIQcgAyAIIB18fCEDIA4gA4VCIIohDiAJIA58IQkgCCAJhUIYiiEIIAMgCCAefHwhAyAOIAOFQhCKIQ4gCSAOfCEJIAggCYVCP4ohCCAEIAUgH3x8IQQgDyAEhUIgiiEPIAogD3whCiAFIAqFQhiKIQUgBCAFICB8fCEEIA8gBIVCEIohDyAKIA98IQogBSAKhUI/iiEFIAEgBSAffHwhASANIAGFQiCKIQ0gCSANfCEJIAUgCYVCGIohBSABIAUgG3x8IQEgDSABhUIQiiENIAkgDXwhCSAFIAmFQj+KIQUgAiAGIBV8fCECIA4gAoVCIIohDiAKIA58IQogBiAKhUIYiiEGIAIgBiAZfHwhAiAOIAKFQhCKIQ4gCiAOfCEKIAYgCoVCP4ohBiADIAcgGnx8IQMgDyADhUIgiiEPIAsgD3whCyAHIAuFQhiKIQcgAyAHICB8fCEDIA8gA4VCEIohDyALIA98IQsgByALhUI/iiEHIAQgCCAefHwhBCAQIASFQiCKIRAgDCAQfCEMIAggDIVCGIohCCAEIAggF3x8IQQgECAEhUIQiiEQIAwgEHwhDCAIIAyFQj+KIQggASAGIBJ8fCEBIBAgAYVCIIohECALIBB8IQsgBiALhUIYiiEGIAEgBiAdfHwhASAQIAGFQhCKIRAgCyAQfCELIAYgC4VCP4ohBiACIAcgEXx8IQIgDSAChUIgiiENIAwgDXwhDCAHIAyFQhiKIQcgAiAHIBN8fCECIA0gAoVCEIohDSAMIA18IQwgByAMhUI/iiEHIAMgCCAcfHwhAyAOIAOFQiCKIQ4gCSAOfCEJIAggCYVCGIohCCADIAggGHx8IQMgDiADhUIQiiEOIAkgDnwhCSAIIAmFQj+KIQggBCAFIBZ8fCEEIA8gBIVCIIohDyAKIA98IQogBSAKhUIYiiEFIAQgBSAUfHwhBCAPIASFQhCKIQ8gCiAPfCEKIAUgCoVCP4ohBSABIAUgHHx8IQEgDSABhUIgiiENIAkgDXwhCSAFIAmFQhiKIQUgASAFIBl8fCEBIA0gAYVCEIohDSAJIA18IQkgBSAJhUI/iiEFIAIgBiAdfHwhAiAOIAKFQiCKIQ4gCiAOfCEKIAYgCoVCGIohBiACIAYgEXx8IQIgDiAChUIQiiEOIAogDnwhCiAGIAqFQj+KIQYgAyAHIBZ8fCEDIA8gA4VCIIohDyALIA98IQsgByALhUIYiiEHIAMgByATfHwhAyAPIAOFQhCKIQ8gCyAPfCELIAcgC4VCP4ohByAEIAggIHx8IQQgECAEhUIgiiEQIAwgEHwhDCAIIAyFQhiKIQggBCAIIB58fCEEIBAgBIVCEIohECAMIBB8IQwgCCAMhUI/iiEIIAEgBiAbfHwhASAQIAGFQiCKIRAgCyAQfCELIAYgC4VCGIohBiABIAYgH3x8IQEgECABhUIQiiEQIAsgEHwhCyAGIAuFQj+KIQYgAiAHIBR8fCECIA0gAoVCIIohDSAMIA18IQwgByAMhUIYiiEHIAIgByAXfHwhAiANIAKFQhCKIQ0gDCANfCEMIAcgDIVCP4ohByADIAggGHx8IQMgDiADhUIgiiEOIAkgDnwhCSAIIAmFQhiKIQggAyAIIBJ8fCEDIA4gA4VCEIohDiAJIA58IQkgCCAJhUI/iiEIIAQgBSAafHwhBCAPIASFQiCKIQ8gCiAPfCEKIAUgCoVCGIohBSAEIAUgFXx8IQQgDyAEhUIQiiEPIAogD3whCiAFIAqFQj+KIQUgASAFIBh8fCEBIA0gAYVCIIohDSAJIA18IQkgBSAJhUIYiiEFIAEgBSAafHwhASANIAGFQhCKIQ0gCSANfCEJIAUgCYVCP4ohBSACIAYgFHx8IQIgDiAChUIgiiEOIAogDnwhCiAGIAqFQhiKIQYgAiAGIBJ8fCECIA4gAoVCEIohDiAKIA58IQogBiAKhUI/iiEGIAMgByAefHwhAyAPIAOFQiCKIQ8gCyAPfCELIAcgC4VCGIohByADIAcgHXx8IQMgDyADhUIQiiEPIAsgD3whCyAHIAuFQj+KIQcgBCAIIBx8fCEEIBAgBIVCIIohECAMIBB8IQwgCCAMhUIYiiEIIAQgCCAffHwhBCAQIASFQhCKIRAgDCAQfCEMIAggDIVCP4ohCCABIAYgE3x8IQEgECABhUIgiiEQIAsgEHwhCyAGIAuFQhiKIQYgASAGIBd8fCEBIBAgAYVCEIohECALIBB8IQsgBiALhUI/iiEGIAIgByAWfHwhAiANIAKFQiCKIQ0gDCANfCEMIAcgDIVCGIohByACIAcgG3x8IQIgDSAChUIQiiENIAwgDXwhDCAHIAyFQj+KIQcgAyAIIBV8fCEDIA4gA4VCIIohDiAJIA58IQkgCCAJhUIYiiEIIAMgCCARfHwhAyAOIAOFQhCKIQ4gCSAOfCEJIAggCYVCP4ohCCAEIAUgIHx8IQQgDyAEhUIgiiEPIAogD3whCiAFIAqFQhiKIQUgBCAFIBl8fCEEIA8gBIVCEIohDyAKIA98IQogBSAKhUI/iiEFIAEgBSAafHwhASANIAGFQiCKIQ0gCSANfCEJIAUgCYVCGIohBSABIAUgEXx8IQEgDSABhUIQiiENIAkgDXwhCSAFIAmFQj+KIQUgAiAGIBZ8fCECIA4gAoVCIIohDiAKIA58IQogBiAKhUIYiiEGIAIgBiAYfHwhAiAOIAKFQhCKIQ4gCiAOfCEKIAYgCoVCP4ohBiADIAcgE3x8IQMgDyADhUIgiiEPIAsgD3whCyAHIAuFQhiKIQcgAyAHIBV8fCEDIA8gA4VCEIohDyALIA98IQsgByALhUI/iiEHIAQgCCAbfHwhBCAQIASFQiCKIRAgDCAQfCEMIAggDIVCGIohCCAEIAggIHx8IQQgECAEhUIQiiEQIAwgEHwhDCAIIAyFQj+KIQggASAGIB98fCEBIBAgAYVCIIohECALIBB8IQsgBiALhUIYiiEGIAEgBiASfHwhASAQIAGFQhCKIRAgCyAQfCELIAYgC4VCP4ohBiACIAcgHHx8IQIgDSAChUIgiiENIAwgDXwhDCAHIAyFQhiKIQcgAiAHIB18fCECIA0gAoVCEIohDSAMIA18IQwgByAMhUI/iiEHIAMgCCAXfHwhAyAOIAOFQiCKIQ4gCSAOfCEJIAggCYVCGIohCCADIAggGXx8IQMgDiADhUIQiiEOIAkgDnwhCSAIIAmFQj+KIQggBCAFIBR8fCEEIA8gBIVCIIohDyAKIA98IQogBSAKhUIYiiEFIAQgBSAefHwhBCAPIASFQhCKIQ8gCiAPfCEKIAUgCoVCP4ohBSABIAUgE3x8IQEgDSABhUIgiiENIAkgDXwhCSAFIAmFQhiKIQUgASAFIB18fCEBIA0gAYVCEIohDSAJIA18IQkgBSAJhUI/iiEFIAIgBiAXfHwhAiAOIAKFQiCKIQ4gCiAOfCEKIAYgCoVCGIohBiACIAYgG3x8IQIgDiAChUIQiiEOIAogDnwhCiAGIAqFQj+KIQYgAyAHIBF8fCEDIA8gA4VCIIohDyALIA98IQsgByALhUIYiiEHIAMgByAcfHwhAyAPIAOFQhCKIQ8gCyAPfCELIAcgC4VCP4ohByAEIAggGXx8IQQgECAEhUIgiiEQIAwgEHwhDCAIIAyFQhiKIQggBCAIIBR8fCEEIBAgBIVCEIohECAMIBB8IQwgCCAMhUI/iiEIIAEgBiAVfHwhASAQIAGFQiCKIRAgCyAQfCELIAYgC4VCGIohBiABIAYgHnx8IQEgECABhUIQiiEQIAsgEHwhCyAGIAuFQj+KIQYgAiAHIBh8fCECIA0gAoVCIIohDSAMIA18IQwgByAMhUIYiiEHIAIgByAWfHwhAiANIAKFQhCKIQ0gDCANfCEMIAcgDIVCP4ohByADIAggIHx8IQMgDiADhUIgiiEOIAkgDnwhCSAIIAmFQhiKIQggAyAIIB98fCEDIA4gA4VCEIohDiAJIA58IQkgCCAJhUI/iiEIIAQgBSASfHwhBCAPIASFQiCKIQ8gCiAPfCEKIAUgCoVCGIohBSAEIAUgGnx8IQQgDyAEhUIQiiEPIAogD3whCiAFIAqFQj+KIQUgASAFIB18fCEBIA0gAYVCIIohDSAJIA18IQkgBSAJhUIYiiEFIAEgBSAWfHwhASANIAGFQhCKIQ0gCSANfCEJIAUgCYVCP4ohBSACIAYgEnx8IQIgDiAChUIgiiEOIAogDnwhCiAGIAqFQhiKIQYgAiAGICB8fCECIA4gAoVCEIohDiAKIA58IQogBiAKhUI/iiEGIAMgByAffHwhAyAPIAOFQiCKIQ8gCyAPfCELIAcgC4VCGIohByADIAcgHnx8IQMgDyADhUIQiiEPIAsgD3whCyAHIAuFQj+KIQcgBCAIIBV8fCEEIBAgBIVCIIohECAMIBB8IQwgCCAMhUIYiiEIIAQgCCAbfHwhBCAQIASFQhCKIRAgDCAQfCEMIAggDIVCP4ohCCABIAYgEXx8IQEgECABhUIgiiEQIAsgEHwhCyAGIAuFQhiKIQYgASAGIBh8fCEBIBAgAYVCEIohECALIBB8IQsgBiALhUI/iiEGIAIgByAXfHwhAiANIAKFQiCKIQ0gDCANfCEMIAcgDIVCGIohByACIAcgFHx8IQIgDSAChUIQiiENIAwgDXwhDCAHIAyFQj+KIQcgAyAIIBp8fCEDIA4gA4VCIIohDiAJIA58IQkgCCAJhUIYiiEIIAMgCCATfHwhAyAOIAOFQhCKIQ4gCSAOfCEJIAggCYVCP4ohCCAEIAUgGXx8IQQgDyAEhUIgiiEPIAogD3whCiAFIAqFQhiKIQUgBCAFIBx8fCEEIA8gBIVCEIohDyAKIA98IQogBSAKhUI/iiEFIAEgBSAefHwhASANIAGFQiCKIQ0gCSANfCEJIAUgCYVCGIohBSABIAUgHHx8IQEgDSABhUIQiiENIAkgDXwhCSAFIAmFQj+KIQUgAiAGIBh8fCECIA4gAoVCIIohDiAKIA58IQogBiAKhUIYiiEGIAIgBiAffHwhAiAOIAKFQhCKIQ4gCiAOfCEKIAYgCoVCP4ohBiADIAcgHXx8IQMgDyADhUIgiiEPIAsgD3whCyAHIAuFQhiKIQcgAyAHIBJ8fCEDIA8gA4VCEIohDyALIA98IQsgByALhUI/iiEHIAQgCCAUfHwhBCAQIASFQiCKIRAgDCAQfCEMIAggDIVCGIohCCAEIAggGnx8IQQgECAEhUIQiiEQIAwgEHwhDCAIIAyFQj+KIQggASAGIBZ8fCEBIBAgAYVCIIohECALIBB8IQsgBiALhUIYiiEGIAEgBiARfHwhASAQIAGFQhCKIRAgCyAQfCELIAYgC4VCP4ohBiACIAcgIHx8IQIgDSAChUIgiiENIAwgDXwhDCAHIAyFQhiKIQcgAiAHIBV8fCECIA0gAoVCEIohDSAMIA18IQwgByAMhUI/iiEHIAMgCCAZfHwhAyAOIAOFQiCKIQ4gCSAOfCEJIAggCYVCGIohCCADIAggF3x8IQMgDiADhUIQiiEOIAkgDnwhCSAIIAmFQj+KIQggBCAFIBN8fCEEIA8gBIVCIIohDyAKIA98IQogBSAKhUIYiiEFIAQgBSAbfHwhBCAPIASFQhCKIQ8gCiAPfCEKIAUgCoVCP4ohBSABIAUgF3x8IQEgDSABhUIgiiENIAkgDXwhCSAFIAmFQhiKIQUgASAFICB8fCEBIA0gAYVCEIohDSAJIA18IQkgBSAJhUI/iiEFIAIgBiAffHwhAiAOIAKFQiCKIQ4gCiAOfCEKIAYgCoVCGIohBiACIAYgGnx8IQIgDiAChUIQiiEOIAogDnwhCiAGIAqFQj+KIQYgAyAHIBx8fCEDIA8gA4VCIIohDyALIA98IQsgByALhUIYiiEHIAMgByAUfHwhAyAPIAOFQhCKIQ8gCyAPfCELIAcgC4VCP4ohByAEIAggEXx8IQQgECAEhUIgiiEQIAwgEHwhDCAIIAyFQhiKIQggBCAIIBl8fCEEIBAgBIVCEIohECAMIBB8IQwgCCAMhUI/iiEIIAEgBiAdfHwhASAQIAGFQiCKIRAgCyAQfCELIAYgC4VCGIohBiABIAYgE3x8IQEgECABhUIQiiEQIAsgEHwhCyAGIAuFQj+KIQYgAiAHIB58fCECIA0gAoVCIIohDSAMIA18IQwgByAMhUIYiiEHIAIgByAYfHwhAiANIAKFQhCKIQ0gDCANfCEMIAcgDIVCP4ohByADIAggEnx8IQMgDiADhUIgiiEOIAkgDnwhCSAIIAmFQhiKIQggAyAIIBV8fCEDIA4gA4VCEIohDiAJIA58IQkgCCAJhUI/iiEIIAQgBSAbfHwhBCAPIASFQiCKIQ8gCiAPfCEKIAUgCoVCGIohBSAEIAUgFnx8IQQgDyAEhUIQiiEPIAogD3whCiAFIAqFQj+KIQUgASAFIBt8fCEBIA0gAYVCIIohDSAJIA18IQkgBSAJhUIYiiEFIAEgBSATfHwhASANIAGFQhCKIQ0gCSANfCEJIAUgCYVCP4ohBSACIAYgGXx8IQIgDiAChUIgiiEOIAogDnwhCiAGIAqFQhiKIQYgAiAGIBV8fCECIA4gAoVCEIohDiAKIA58IQogBiAKhUI/iiEGIAMgByAYfHwhAyAPIAOFQiCKIQ8gCyAPfCELIAcgC4VCGIohByADIAcgF3x8IQMgDyADhUIQiiEPIAsgD3whCyAHIAuFQj+KIQcgBCAIIBJ8fCEEIBAgBIVCIIohECAMIBB8IQwgCCAMhUIYiiEIIAQgCCAWfHwhBCAQIASFQhCKIRAgDCAQfCEMIAggDIVCP4ohCCABIAYgIHx8IQEgECABhUIgiiEQIAsgEHwhCyAGIAuFQhiKIQYgASAGIBx8fCEBIBAgAYVCEIohECALIBB8IQsgBiALhUI/iiEGIAIgByAafHwhAiANIAKFQiCKIQ0gDCANfCEMIAcgDIVCGIohByACIAcgH3x8IQIgDSAChUIQiiENIAwgDXwhDCAHIAyFQj+KIQcgAyAIIBR8fCEDIA4gA4VCIIohDiAJIA58IQkgCCAJhUIYiiEIIAMgCCAdfHwhAyAOIAOFQhCKIQ4gCSAOfCEJIAggCYVCP4ohCCAEIAUgHnx8IQQgDyAEhUIgiiEPIAogD3whCiAFIAqFQhiKIQUgBCAFIBF8fCEEIA8gBIVCEIohDyAKIA98IQogBSAKhUI/iiEFIAEgBSARfHwhASANIAGFQiCKIQ0gCSANfCEJIAUgCYVCGIohBSABIAUgEnx8IQEgDSABhUIQiiENIAkgDXwhCSAFIAmFQj+KIQUgAiAGIBN8fCECIA4gAoVCIIohDiAKIA58IQogBiAKhUIYiiEGIAIgBiAUfHwhAiAOIAKFQhCKIQ4gCiAOfCEKIAYgCoVCP4ohBiADIAcgFXx8IQMgDyADhUIgiiEPIAsgD3whCyAHIAuFQhiKIQcgAyAHIBZ8fCEDIA8gA4VCEIohDyALIA98IQsgByALhUI/iiEHIAQgCCAXfHwhBCAQIASFQiCKIRAgDCAQfCEMIAggDIVCGIohCCAEIAggGHx8IQQgECAEhUIQiiEQIAwgEHwhDCAIIAyFQj+KIQggASAGIBl8fCEBIBAgAYVCIIohECALIBB8IQsgBiALhUIYiiEGIAEgBiAafHwhASAQIAGFQhCKIRAgCyAQfCELIAYgC4VCP4ohBiACIAcgG3x8IQIgDSAChUIgiiENIAwgDXwhDCAHIAyFQhiKIQcgAiAHIBx8fCECIA0gAoVCEIohDSAMIA18IQwgByAMhUI/iiEHIAMgCCAdfHwhAyAOIAOFQiCKIQ4gCSAOfCEJIAggCYVCGIohCCADIAggHnx8IQMgDiADhUIQiiEOIAkgDnwhCSAIIAmFQj+KIQggBCAFIB98fCEEIA8gBIVCIIohDyAKIA98IQogBSAKhUIYiiEFIAQgBSAgfHwhBCAPIASFQhCKIQ8gCiAPfCEKIAUgCoVCP4ohBSABIAUgH3x8IQEgDSABhUIgiiENIAkgDXwhCSAFIAmFQhiKIQUgASAFIBt8fCEBIA0gAYVCEIohDSAJIA18IQkgBSAJhUI/iiEFIAIgBiAVfHwhAiAOIAKFQiCKIQ4gCiAOfCEKIAYgCoVCGIohBiACIAYgGXx8IQIgDiAChUIQiiEOIAogDnwhCiAGIAqFQj+KIQYgAyAHIBp8fCEDIA8gA4VCIIohDyALIA98IQsgByALhUIYiiEHIAMgByAgfHwhAyAPIAOFQhCKIQ8gCyAPfCELIAcgC4VCP4ohByAEIAggHnx8IQQgECAEhUIgiiEQIAwgEHwhDCAIIAyFQhiKIQggBCAIIBd8fCEEIBAgBIVCEIohECAMIBB8IQwgCCAMhUI/iiEIIAEgBiASfHwhASAQIAGFQiCKIRAgCyAQfCELIAYgC4VCGIohBiABIAYgHXx8IQEgECABhUIQiiEQIAsgEHwhCyAGIAuFQj+KIQYgAiAHIBF8fCECIA0gAoVCIIohDSAMIA18IQwgByAMhUIYiiEHIAIgByATfHwhAiANIAKFQhCKIQ0gDCANfCEMIAcgDIVCP4ohByADIAggHHx8IQMgDiADhUIgiiEOIAkgDnwhCSAIIAmFQhiKIQggAyAIIBh8fCEDIA4gA4VCEIohDiAJIA58IQkgCCAJhUI/iiEIIAQgBSAWfHwhBCAPIASFQiCKIQ8gCiAPfCEKIAUgCoVCGIohBSAEIAUgFHx8IQQgDyAEhUIQiiEPIAogD3whCiAFIAqFQj+KIQUgISAhKQMAIAEgCYWFNwMAICIgIikDACACIAqFhTcDACAjICMpAwAgAyALhYU3AwAgJCAkKQMAIAQgDIWFNwMAICUgJSkDACAFIA2FhTcDACAmICYpAwAgBiAOhYU3AwAgJyAnKQMAIAcgD4WFNwMAICggKCkDACAIIBCFhTcDAAs=")}}),a=e(),o=WebAssembly.compile(a);return mo=async t=>(await WebAssembly.instantiate(await o,t)).exports}()().then((t=>{Co=t})),Bo=64,xo=[];$a.exports=Qo;var Fo=$a.exports.BYTES_MIN=16,Eo=$a.exports.BYTES_MAX=64;$a.exports.BYTES=32;var So=$a.exports.KEYBYTES_MIN=16,vo=$a.exports.KEYBYTES_MAX=64;$a.exports.KEYBYTES=32;var Po=$a.exports.SALTBYTES=16,Oo=$a.exports.PERSONALBYTES=16;function Qo(t,e,a,o,i){if(!(this instanceof Qo))return new Qo(t,e,a,o,i);if(!Co)throw new Error("WASM not loaded. Wait for Blake2b.ready(cb)");t||(t=32),!0!==i&&(bo(t>=Fo,"digestLength must be at least "+Fo+", was given "+t),bo(t<=Eo,"digestLength must be at most "+Eo+", was given "+t),null!=e&&(bo(e instanceof Uint8Array,"key must be Uint8Array or Buffer"),bo(e.length>=So,"key must be at least "+So+", was given "+e.length),bo(e.length<=vo,"key must be at least "+vo+", was given "+e.length)),null!=a&&(bo(a instanceof Uint8Array,"salt must be Uint8Array or Buffer"),bo(a.length===Po,"salt must be exactly "+Po+", was given "+a.length)),null!=o&&(bo(o instanceof Uint8Array,"personal must be Uint8Array or Buffer"),bo(o.length===Oo,"personal must be exactly "+Oo+", was given "+o.length))),xo.length||(xo.push(Bo),Bo+=216),this.digestLength=t,this.finalized=!1,this.pointer=xo.pop(),this._memory=new Uint8Array(Co.memory.buffer),this._memory.fill(0,0,64),this._memory[0]=this.digestLength,this._memory[1]=e?e.length:0,this._memory[2]=1,this._memory[3]=1,a&&this._memory.set(a,32),o&&this._memory.set(o,48),this.pointer+216>this._memory.length&&this._realloc(this.pointer+216),Co.blake2b_init(this.pointer,this.digestLength),e&&(this.update(e),this._memory.fill(0,Bo,Bo+e.length),this._memory[this.pointer+200]=128)}function qo(){}function Uo(t){return(0!==(4294901760&t)?(t&=4294901760,16):0)|(0!==(4278255360&t)?(t&=4278255360,8):0)|(0!==(4042322160&t)?(t&=4042322160,4):0)|(0!==(3435973836&t)?(t&=3435973836,2):0)|0!==(2863311530&t)}Qo.prototype._realloc=function(t){Co.memory.grow(Math.max(0,Math.ceil(Math.abs(t-this._memory.length)/65536))),this._memory=new Uint8Array(Co.memory.buffer)},Qo.prototype.update=function(t){return bo(!1===this.finalized,"Hash instance finalized"),bo(t instanceof Uint8Array,"input must be Uint8Array or Buffer"),Bo+t.length>this._memory.length&&this._realloc(Bo+t.length),this._memory.set(t,Bo),Co.blake2b_update(this.pointer,Bo,Bo+t.length),this},Qo.prototype.digest=function(t){if(bo(!1===this.finalized,"Hash instance finalized"),this.finalized=!0,xo.push(this.pointer),Co.blake2b_final(this.pointer),!t||"binary"===t)return this._memory.slice(this.pointer+128,this.pointer+128+this.digestLength);if("string"===typeof t)return yo.toString(this._memory,t,this.pointer+128,this.pointer+128+this.digestLength);bo(t instanceof Uint8Array&&t.length>=this.digestLength,"input must be Uint8Array or Buffer");for(var e=0;e<this.digestLength;e++)t[e]=this._memory[this.pointer+128+e];return t},Qo.prototype.final=Qo.prototype.digest,Qo.WASM=Co,Qo.SUPPORTED="undefined"!==typeof WebAssembly,Qo.ready=function(t){return t||(t=qo),wo?wo.then((()=>t()),t):t(new Error("WebAssembly not supported"))},Qo.prototype.ready=Qo.ready,Qo.prototype.getPartialHash=function(){return this._memory.slice(this.pointer,this.pointer+216)},Qo.prototype.setPartialHash=function(t){this._memory.set(t,this.pointer)};const Mo=1,zo=2,Do=10,Go=2;async function ko(t,e,a){const o=await t.read(2*e.G1.F.n8),i=e.G1.fromRprLEM(o,0);return a?e.G1.toObject(i):i}async function To(t,e,a){const o=await t.read(2*e.G2.F.n8),i=e.G2.fromRprLEM(o,0);return a?e.G2.toObject(i):i}async function No(t,e,a){await Ra(t,e,1);const o=await t.readULE32();if(await Ka(t),o===Mo)return await async function(t,e,a){const o={protocol:"groth16"};await Ra(t,e,2);const i=await t.readULE32();o.n8q=i,o.q=await ja(t,i);const n=await t.readULE32();return o.n8r=n,o.r=await ja(t,n),o.curve=await Wa(o.q),o.nVars=await t.readULE32(),o.nPublic=await t.readULE32(),o.domainSize=await t.readULE32(),o.power=Uo(o.domainSize),o.vk_alpha_1=await ko(t,o.curve,a),o.vk_beta_1=await ko(t,o.curve,a),o.vk_beta_2=await To(t,o.curve,a),o.vk_gamma_2=await To(t,o.curve,a),o.vk_delta_1=await ko(t,o.curve,a),o.vk_delta_2=await To(t,o.curve,a),await Ka(t),o}(t,e,a);if(o===zo)return await async function(t,e,a){const o={protocol:"plonk"};await Ra(t,e,2);const i=await t.readULE32();o.n8q=i,o.q=await ja(t,i);const n=await t.readULE32();return o.n8r=n,o.r=await ja(t,n),o.curve=await Wa(o.q),o.nVars=await t.readULE32(),o.nPublic=await t.readULE32(),o.domainSize=await t.readULE32(),o.power=Uo(o.domainSize),o.nAdditions=await t.readULE32(),o.nConstraints=await t.readULE32(),o.k1=await t.read(n),o.k2=await t.read(n),o.Qm=await ko(t,o.curve,a),o.Ql=await ko(t,o.curve,a),o.Qr=await ko(t,o.curve,a),o.Qo=await ko(t,o.curve,a),o.Qc=await ko(t,o.curve,a),o.S1=await ko(t,o.curve,a),o.S2=await ko(t,o.curve,a),o.S3=await ko(t,o.curve,a),o.X_2=await To(t,o.curve,a),await Ka(t),o}(t,e,a);if(o===Do)return await async function(t,e,a){const o={protocol:"fflonk"};o.protocolId=Do,await Ra(t,e,Go);const i=await t.readULE32();o.n8q=i,o.q=await ja(t,i),o.curve=await Wa(o.q);const n=await t.readULE32();return o.n8r=n,o.r=await ja(t,n),o.nVars=await t.readULE32(),o.nPublic=await t.readULE32(),o.domainSize=await t.readULE32(),o.power=Uo(o.domainSize),o.nAdditions=await t.readULE32(),o.nConstraints=await t.readULE32(),o.k1=await t.read(n),o.k2=await t.read(n),o.w3=await t.read(n),o.w4=await t.read(n),o.w8=await t.read(n),o.wr=await t.read(n),o.X_2=await To(t,o.curve,a),o.C0=await ko(t,o.curve,a),await Ka(t),o}(t,e,a);throw new Error("Protocol not supported: ")}async function Ro(t,e){await Ra(t,e,1);const a=await t.readULE32(),o=await ja(t,a),i=await t.readULE32();return await Ka(t),{n8:a,q:o,nWitness:i}}const{stringifyBigInts:Ko}=pa;async function Vo(t,e,a){const{fd:o,sections:i}=await Ga(e,"wtns",2),n=await Ro(o,i),{fd:c,sections:l}=await Ga(t,"zkey",2),r=await No(c,l);if("groth16"!=r.protocol)throw new Error("zkey file is not groth16");if(!ha.eq(r.r,n.q))throw new Error("Curve of the witness does not match the curve of the proving key");if(n.nWitness!=r.nVars)throw new Error("Invalid witness length. Circuit: ".concat(r.nVars,", witness: ").concat(n.nWitness));const s=r.curve,d=s.Fr,_=s.G1,u=s.G2,g=Uo(r.domainSize);a&&a.debug("Reading Wtns");const f=await Ha(o,i,2);a&&a.debug("Reading Coeffs");const h=await Ha(c,l,4);a&&a.debug("Building ABC");const[p,L,m]=await async function(t,e,a,o,i){const n=t.Fr.n8,c=12+e.n8r,l=(o.byteLength-4)/c,r=new Ue(e.domainSize*n),s=new Ue(e.domainSize*n),d=new Ue(e.domainSize*n),_=[r,s];for(let u=0;u<l;u++){i&&u%1e6==0&&i.debug("QAP AB: ".concat(u,"/").concat(l));const e=o.slice(4+u*c,4+u*c+c),r=new DataView(e.buffer),s=r.getUint32(0,!0),d=r.getUint32(4,!0),g=r.getUint32(8,!0),f=e.slice(12,12+n);_[s].set(t.Fr.add(_[s].slice(d*n,d*n+n),t.Fr.mul(f,a.slice(g*n,g*n+n))),d*n)}for(let u=0;u<e.domainSize;u++)i&&u%1e6==0&&i.debug("QAP C: ".concat(u,"/").concat(e.domainSize)),d.set(t.Fr.mul(r.slice(u*n,u*n+n),s.slice(u*n,u*n+n)),u*n);return[r,s,d]}(s,r,f,h,a),A=g==d.s?s.Fr.shift:s.Fr.w[g+1],I=await d.ifft(p,"","",a,"IFFT_A"),b=await d.batchApplyKey(I,d.e(1),A),y=await d.fft(b,"","",a,"FFT_A"),C=await d.ifft(L,"","",a,"IFFT_B"),w=await d.batchApplyKey(C,d.e(1),A),B=await d.fft(w,"","",a,"FFT_B"),x=await d.ifft(m,"","",a,"IFFT_C"),F=await d.batchApplyKey(x,d.e(1),A),E=await d.fft(F,"","",a,"FFT_C");a&&a.debug("Join ABC");const S=await async function(t,e,a,o,i,n){const c=1<<22,l=t.Fr.n8,r=Math.floor(a.byteLength/t.Fr.n8),s=[];for(let g=0;g<r;g+=c){n&&n.debug("JoinABC: ".concat(g,"/").concat(r));const e=Math.min(r-g,c),d=[],_=a.slice(g*l,(g+e)*l),u=o.slice(g*l,(g+e)*l),f=i.slice(g*l,(g+e)*l);d.push({cmd:"ALLOCSET",var:0,buff:_}),d.push({cmd:"ALLOCSET",var:1,buff:u}),d.push({cmd:"ALLOCSET",var:2,buff:f}),d.push({cmd:"ALLOC",var:3,len:e*l}),d.push({cmd:"CALL",fnName:"qap_joinABC",params:[{var:0},{var:1},{var:2},{val:e},{var:3}]}),d.push({cmd:"CALL",fnName:"frm_batchFromMontgomery",params:[{var:3},{val:e},{var:3}]}),d.push({cmd:"GET",out:0,var:3,len:e*l}),s.push(t.tm.queueAction(d))}const d=await Promise.all(s);let _;_=a instanceof Ue?new Ue(a.byteLength):new Uint8Array(a.byteLength);let u=0;for(let g=0;g<d.length;g++)_.set(d[g][0],u),u+=d[g][0].byteLength;return _}(s,0,y,B,E,a);let v={};a&&a.debug("Reading A Points");const P=await Ha(c,l,5);v.pi_a=await s.G1.multiExpAffine(P,f,a,"multiexp A"),a&&a.debug("Reading B1 Points");const O=await Ha(c,l,6);let Q=await s.G1.multiExpAffine(O,f,a,"multiexp B1");a&&a.debug("Reading B2 Points");const q=await Ha(c,l,7);v.pi_b=await s.G2.multiExpAffine(q,f,a,"multiexp B2"),a&&a.debug("Reading C Points");const U=await Ha(c,l,8);v.pi_c=await s.G1.multiExpAffine(U,f.slice((r.nPublic+1)*s.Fr.n8),a,"multiexp C"),a&&a.debug("Reading H Points");const M=await Ha(c,l,9),z=await s.G1.multiExpAffine(M,S,a,"multiexp H"),D=s.Fr.random(),G=s.Fr.random();v.pi_a=_.add(v.pi_a,r.vk_alpha_1),v.pi_a=_.add(v.pi_a,_.timesFr(r.vk_delta_1,D)),v.pi_b=u.add(v.pi_b,r.vk_beta_2),v.pi_b=u.add(v.pi_b,u.timesFr(r.vk_delta_2,G)),Q=_.add(Q,r.vk_beta_1),Q=_.add(Q,_.timesFr(r.vk_delta_1,G)),v.pi_c=_.add(v.pi_c,z),v.pi_c=_.add(v.pi_c,_.timesFr(v.pi_a,G)),v.pi_c=_.add(v.pi_c,_.timesFr(Q,D)),v.pi_c=_.add(v.pi_c,_.timesFr(r.vk_delta_1,d.neg(d.mul(D,G))));let k=[];for(let T=1;T<=r.nPublic;T++){const t=f.slice(T*d.n8,T*d.n8+d.n8);k.push(ha.fromRprLE(t))}return v.pi_a=_.toObject(_.toAffine(v.pi_a)),v.pi_b=u.toObject(u.toAffine(v.pi_b)),v.pi_c=_.toObject(_.toAffine(v.pi_c)),v.protocol="groth16",v.curve=s.name,await c.close(),await o.close(),v=Ko(v),k=Ko(k),{proof:v,publicSignals:k}}function jo(t){var e=[];return function t(e,a){if(Array.isArray(a))for(let o=0;o<a.length;o++)t(e,a[o]);else e.push(a)}(e,t),e}function Ho(t,e){let a=BigInt(t)%e;return a<0&&(a+=e),a}function Yo(t){const e=BigInt(2)**BigInt(64);let a=BigInt("0xCBF29CE484222325");for(var o=0;o<t.length;o++)a^=BigInt(t[o].charCodeAt()),a*=BigInt(1099511628211),a%=e;let i=a.toString(16),n=16-i.length;return i="0".repeat(n).concat(i),i}function Jo(t,e){const a=[];let o=BigInt(t);const i=BigInt(4294967296);for(;o;)a.unshift(Number(o%i)),o/=i;if(e)for(var n=e-a.length;n>0;)a.unshift(0),n--;return a}async function Wo(t,e){e=e||{};let a,o=32767,i=!1;for(;!i;)try{a=new WebAssembly.Memory({initial:o}),i=!0}catch(p){if(1===o)throw p;console.warn("Could not allocate "+1024*o*64+" bytes. This may cause severe instability. Trying with "+1024*o*64/2+" bytes"),o=Math.floor(o/2)}const n=await WebAssembly.compile(t);let c,l="",r="",s=1,d=0,_=0;const u=await WebAssembly.instantiate(n,{env:{memory:a},runtime:{exceptionHandler:function(t){let e;throw e=1==t?"Signal not found. ":2==t?"Too many signals set. ":3==t?"Signal already set. ":4==t?"Assert Failed. ":5==t?"Not enough memory. ":6==t?"Input signal array access exceeds the size. ":"Unknown error. ",console.error("ERROR: ",t,l),new Error(e+l)},printErrorMessage:function(){l+=f()+"\n"},writeBufferMessage:function(){const t=f();"\n"===t?(console.log(r),r=""):(""!==r&&(r+=" "),r+=t)},showSharedRWMemory:function(){const t=u.exports.getFieldNumLen32(),e=new Uint32Array(t);for(let a=0;a<t;a++)e[t-1-a]=u.exports.readSharedRWMemory(a);if(s>=2&&(d>=1||_>=7)){""!==r&&(r+=" ");const t=ha.fromArray(e,4294967296).toString();r+=t}else console.log(ha.fromArray(e,4294967296))},error:function(t,a,o,i,n,l){let r;throw r=7==t?h(a)+" "+c.getFr(i).toString()+" != "+c.getFr(n).toString()+" "+h(l):9==t?h(a)+" "+c.getFr(i).toString()+" "+h(n):5==t&&e.sym?h(a)+" "+e.sym.labelIdx2Name[n]:h(a)+" "+o+" "+i+" "+n+" "+l,console.log("ERROR: ",t,r),new Error(r)},log:function(t){console.log(c.getFr(t).toString())},logGetSignal:function(t,a){e.logGetSignal&&e.logGetSignal(t,c.getFr(a))},logSetSignal:function(t,a){e.logSetSignal&&e.logSetSignal(t,c.getFr(a))},logStartComponent:function(t){e.logStartComponent&&e.logStartComponent(t)},logFinishComponent:function(t){e.logFinishComponent&&e.logFinishComponent(t)}}});"function"==typeof u.exports.getVersion&&(s=u.exports.getVersion()),"function"==typeof u.exports.getMinorVersion&&(d=u.exports.getMinorVersion()),"function"==typeof u.exports.getPatchVersion&&(_=u.exports.getPatchVersion());const g=e&&(e.sanityCheck||e.logGetSignal||e.logSetSignal||e.logStartComponent||e.logFinishComponent);return c=2===s?new Xo(u,g):new Zo(a,u,g),c;function f(){for(var t="",e=u.exports.getMessageChar();0!=e;)t+=String.fromCharCode(e),e=u.exports.getMessageChar();return t}function h(t){const e=new Uint8Array(a.buffer),o=[];for(let a=0;e[t+a]>0;a++)o.push(e[t+a]);return String.fromCharCode.apply(null,o)}}class Zo{constructor(t,e,a){this.memory=t,this.i32=new Uint32Array(t.buffer),this.instance=e,this.n32=(this.instance.exports.getFrLen()>>2)-2;const o=this.instance.exports.getPRawPrime(),i=new Array(this.n32);for(let n=0;n<this.n32;n++)i[this.n32-1-n]=this.i32[(o>>2)+n];this.prime=ha.fromArray(i,4294967296),this.Fr=new J(this.prime),this.mask32=ha.fromString("FFFFFFFF",16),this.NVars=this.instance.exports.getNVars(),this.n64=Math.floor((this.Fr.bitLength-1)/64)+1,this.R=this.Fr.e(ha.shiftLeft(1,64*this.n64)),this.RInv=this.Fr.inv(this.R),this.sanityCheck=a}circom_version(){return 1}async _doCalculateWitness(t,e){this.instance.exports.init(this.sanityCheck||e?1:0);const a=this.allocInt(),o=this.allocFr();Object.keys(t).forEach((e=>{const i=Yo(e),n=parseInt(i.slice(0,8),16),c=parseInt(i.slice(8,16),16);try{this.instance.exports.getSignalOffset32(a,0,n,c)}catch(s){throw new Error("Signal ".concat(e," is not an input of the circuit."))}const l=this.getInt(a),r=jo(t[e]);for(let t=0;t<r.length;t++)this.setFr(o,r[t]),this.instance.exports.setSignal(0,0,l+t,o)}))}async calculateWitness(t,e){const a=this,o=a.i32[0],i=[];await a._doCalculateWitness(t,e);for(let n=0;n<a.NVars;n++){const t=a.instance.exports.getPWitness(n);i.push(a.getFr(t))}return a.i32[0]=o,i}async calculateBinWitness(t,e){const a=this,o=a.i32[0];await a._doCalculateWitness(t,e);const i=a.instance.exports.getWitnessBuffer();a.i32[0]=o;const n=a.memory.buffer.slice(i,i+a.NVars*a.n64*8);return new Uint8Array(n)}allocInt(){const t=this.i32[0];return this.i32[0]=t+8,t}allocFr(){const t=this.i32[0];return this.i32[0]=t+4*this.n32+8,t}getInt(t){return this.i32[t>>2]}setInt(t,e){this.i32[t>>2]=e}getFr(t){const e=this,a=t>>2;if(2147483648&e.i32[a+1]){const t=new Array(e.n32);for(let o=0;o<e.n32;o++)t[e.n32-1-o]=e.i32[a+2+o];const i=e.Fr.e(ha.fromArray(t,4294967296));return 1073741824&e.i32[a+1]?(o=i,e.Fr.mul(e.RInv,o)):i}return 2147483648&e.i32[a]?e.Fr.e(e.i32[a]-4294967296):e.Fr.e(e.i32[a]);var o}setFr(t,e){const a=this;e=a.Fr.e(e);const o=a.Fr.neg(a.Fr.e("80000000",16)),i=a.Fr.e("7FFFFFFF",16);if(a.Fr.geq(e,o)&&a.Fr.leq(e,i)){let i;return a.Fr.geq(e,a.Fr.zero)?i=ha.toNumber(e):(i=ha.toNumber(a.Fr.sub(e,o)),i-=2147483648,i=4294967296+i),a.i32[t>>2]=i,void(a.i32[1+(t>>2)]=0)}a.i32[t>>2]=0,a.i32[1+(t>>2)]=2147483648;const n=ha.toArray(e,4294967296);for(let c=0;c<a.n32;c++){const e=n.length-1-c;a.i32[2+(t>>2)+c]=e>=0?n[e]:0}}}class Xo{constructor(t,e){this.instance=t,this.version=this.instance.exports.getVersion(),this.n32=this.instance.exports.getFieldNumLen32(),this.instance.exports.getRawPrime();const a=new Uint32Array(this.n32);for(let o=0;o<this.n32;o++)a[this.n32-1-o]=this.instance.exports.readSharedRWMemory(o);this.prime=ha.fromArray(a,4294967296),this.witnessSize=this.instance.exports.getWitnessSize(),this.sanityCheck=e}circom_version(){return this.instance.exports.getVersion()}async _doCalculateWitness(t,e){this.instance.exports.init(this.sanityCheck||e?1:0);const a=Object.keys(t);var o=0;if(a.forEach((e=>{const a=Yo(e),i=parseInt(a.slice(0,8),16),n=parseInt(a.slice(8,16),16),c=jo(t[e]);if("function"===typeof this.instance.exports.getInputSignalSize){let t=this.instance.exports.getInputSignalSize(i,n);if(t<0)throw new Error("Signal ".concat(e," not found\n"));if(c.length<t)throw new Error("Not enough values for input signal ".concat(e,"\n"));if(c.length>t)throw new Error("Too many values for input signal ".concat(e,"\n"))}for(let t=0;t<c.length;t++){const e=Jo(Ho(c[t],this.prime),this.n32);for(let t=0;t<this.n32;t++)this.instance.exports.writeSharedRWMemory(t,e[this.n32-1-t]);try{this.instance.exports.setInputSignal(i,n,t),o++}catch(l){throw new Error(l)}}})),o<this.instance.exports.getInputSize())throw new Error("Not all inputs have been set. Only ".concat(o," out of ").concat(this.instance.exports.getInputSize()))}async calculateWitness(t,e){const a=[];await this._doCalculateWitness(t,e);for(let o=0;o<this.witnessSize;o++){this.instance.exports.getWitness(o);const t=new Uint32Array(this.n32);for(let e=0;e<this.n32;e++)t[this.n32-1-e]=this.instance.exports.readSharedRWMemory(e);a.push(ha.fromArray(t,4294967296))}return a}async calculateWTNSBin(t,e){const a=new Uint32Array(this.witnessSize*this.n32+this.n32+11),o=new Uint8Array(a.buffer);await this._doCalculateWitness(t,e),o[0]="w".charCodeAt(0),o[1]="t".charCodeAt(0),o[2]="n".charCodeAt(0),o[3]="s".charCodeAt(0),a[1]=2,a[2]=2,a[3]=1;const i=4*this.n32,n=(8+i).toString(16);a[4]=parseInt(n.slice(0,8),16),a[5]=parseInt(n.slice(8,16),16),a[6]=i,this.instance.exports.getRawPrime();var c=7;for(let r=0;r<this.n32;r++)a[c+r]=this.instance.exports.readSharedRWMemory(r);a[c+=this.n32]=this.witnessSize,a[++c]=2,c++;const l=(i*this.witnessSize).toString(16);a[c]=parseInt(l.slice(0,8),16),a[c+1]=parseInt(l.slice(8,16),16),c+=2;for(let r=0;r<this.witnessSize;r++){this.instance.exports.getWitness(r);for(let t=0;t<this.n32;t++)a[c+t]=this.instance.exports.readSharedRWMemory(t);c+=this.n32}return o}}const{unstringifyBigInts:$o}=pa;async function ti(t,e,a,o){const i=$o(t),n=await Da(e),c=await n.read(n.totalSize);await n.close();const l=await Wo(c);if(1==l.circom_version()){const t=await l.calculateBinWitness(i),e=await ka(a,"wtns",2,2);await async function(t,e,a){await Ta(t,1);const o=8*(Math.floor((ha.bitLength(a)-1)/64)+1);if(await t.writeULE32(o),await Va(t,a,o),e.byteLength%o!=0)throw new Error("Invalid witness length");await t.writeULE32(e.byteLength/o),await Na(t),await Ta(t,2),await t.write(e),await Na(t)}(e,t,l.prime),await e.close()}else{const t=await za(a),e=await l.calculateWTNSBin(i);await t.write(e),await t.close()}}const{unstringifyBigInts:ei}=pa;const{unstringifyBigInts:ai}=pa;const{unstringifyBigInts:oi}=pa;function ii(t){let e=t.toString(16);for(;e.length<64;)e="0"+e;return e='"0x'.concat(e,'"'),e}var ni=Object.freeze({__proto__:null,fullProve:async function(t,e,a,o){const i=ei(t),n={type:"mem"};return await ti(i,e,n),await Vo(a,n,o)},prove:Vo,verify:async function(t,e,a,o){const i=ai(t),n=ai(a),c=ai(e),l=await Za(i.curve),r=l.G1.fromObject(i.IC[0]),s=new Uint8Array(2*l.G1.F.n8*c.length),d=new Uint8Array(l.Fr.n8*c.length);if(!function(t,e){for(let a=0;a<e.length;a++)if(!ha.lt(e[a],t.r))return!1;return!0}(l,c))return o&&o.error("Public inputs are not valid."),!1;for(let A=0;A<c.length;A++){const t=l.G1.fromObject(i.IC[A+1]);s.set(t,A*l.G1.F.n8*2),ha.toRprLE(d,l.Fr.n8*A,c[A],l.Fr.n8)}let _=await l.G1.multiExpAffine(s,d);_=l.G1.add(_,r);const u=l.G1.fromObject(n.pi_a),g=l.G2.fromObject(n.pi_b),f=l.G1.fromObject(n.pi_c);if(!function(t,e){const a=t.G1,o=t.G2;return a.isValid(e.pi_a)&&o.isValid(e.pi_b)&&a.isValid(e.pi_c)}(l,{pi_a:u,pi_b:g,pi_c:f}))return o&&o.error("Proof commitments are not valid."),!1;const h=l.G2.fromObject(i.vk_gamma_2),p=l.G2.fromObject(i.vk_delta_2),L=l.G1.fromObject(i.vk_alpha_1),m=l.G2.fromObject(i.vk_beta_2);return await l.pairingEq(l.G1.neg(u),g,_,h,f,p,L,m)?(o&&o.info("OK!"),!0):(o&&o.error("Invalid proof"),!1)},exportSolidityCallData:async function(t,e){const a=oi(t),o=oi(e);let i,n="";for(let c=0;c<o.length;c++)""!=n&&(n+=","),n+=ii(o[c]);return i="[".concat(ii(a.pi_a[0]),", ").concat(ii(a.pi_a[1]),"],")+"[[".concat(ii(a.pi_b[0][1]),", ").concat(ii(a.pi_b[0][0]),"],[").concat(ii(a.pi_b[1][1]),", ").concat(ii(a.pi_b[1][0]),"]],")+"[".concat(ii(a.pi_c[0]),", ").concat(ii(a.pi_c[1]),"],")+"[".concat(n,"]"),i}});ha.e("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16),ha.e("21888242871839275222246405745257275088548364400416034343698204186575808495617");const{unstringifyBigInts:ci}=pa;const{stringifyBigInts:li}=pa;const{unstringifyBigInts:ri,stringifyBigInts:si}=pa;var di,_i={exports:{}};di=_i,function(){var t="input is invalid type",e="object"===typeof window,a=e?window:{};a.JS_SHA3_NO_WINDOW&&(e=!1);var o=!e&&"object"===typeof self;!a.JS_SHA3_NO_NODE_JS&&"object"===typeof process&&process.versions&&process.versions.node?a=Xa:o&&(a=self);var i=!a.JS_SHA3_NO_COMMON_JS&&di.exports,n=!a.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!==typeof ArrayBuffer,c="0123456789abcdef".split(""),l=[4,1024,262144,67108864],r=[0,8,16,24],s=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],d=[224,256,384,512],_=[128,256],u=["hex","buffer","arrayBuffer","array","digest"],g={128:168,256:136};!a.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),!n||!a.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(t){return"object"===typeof t&&t.buffer&&t.buffer.constructor===ArrayBuffer});for(var f=function(t,e,a){return function(o){return new S(t,e,t).update(o)[a]()}},h=function(t,e,a){return function(o,i){return new S(t,e,i).update(o)[a]()}},p=function(t,e,a){return function(e,o,i,n){return b["cshake"+t].update(e,o,i,n)[a]()}},L=function(t,e,a){return function(e,o,i,n){return b["kmac"+t].update(e,o,i,n)[a]()}},m=function(t,e,a,o){for(var i=0;i<u.length;++i){var n=u[i];t[n]=e(a,o,n)}return t},A=function(t,e){var a=f(t,e,"hex");return a.create=function(){return new S(t,e,t)},a.update=function(t){return a.create().update(t)},m(a,f,t,e)},I=[{name:"keccak",padding:[1,256,65536,16777216],bits:d,createMethod:A},{name:"sha3",padding:[6,1536,393216,100663296],bits:d,createMethod:A},{name:"shake",padding:[31,7936,2031616,520093696],bits:_,createMethod:function(t,e){var a=h(t,e,"hex");return a.create=function(a){return new S(t,e,a)},a.update=function(t,e){return a.create(e).update(t)},m(a,h,t,e)}},{name:"cshake",padding:l,bits:_,createMethod:function(t,e){var a=g[t],o=p(t,0,"hex");return o.create=function(o,i,n){return i||n?new S(t,e,o).bytepad([i,n],a):b["shake"+t].create(o)},o.update=function(t,e,a,i){return o.create(e,a,i).update(t)},m(o,p,t,e)}},{name:"kmac",padding:l,bits:_,createMethod:function(t,e){var a=g[t],o=L(t,0,"hex");return o.create=function(o,i,n){return new v(t,e,i).bytepad(["KMAC",n],a).bytepad([o],a)},o.update=function(t,e,a,i){return o.create(t,a,i).update(e)},m(o,L,t,e)}}],b={},y=[],C=0;C<I.length;++C)for(var w=I[C],B=w.bits,x=0;x<B.length;++x){var F=w.name+"_"+B[x];if(y.push(F),b[F]=w.createMethod(B[x],w.padding),"sha3"!==w.name){var E=w.name+B[x];y.push(E),b[E]=b[F]}}function S(t,e,a){this.blocks=[],this.s=[],this.padding=e,this.outputBits=a,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(t<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=a>>5,this.extraBytes=(31&a)>>3;for(var o=0;o<50;++o)this.s[o]=0}function v(t,e,a){S.call(this,t,e,a)}S.prototype.update=function(e){if(this.finalized)throw new Error("finalize already called");var a,o=typeof e;if("string"!==o){if("object"!==o)throw new Error(t);if(null===e)throw new Error(t);if(n&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!Array.isArray(e)&&(!n||!ArrayBuffer.isView(e)))throw new Error(t);a=!0}for(var i,c,l=this.blocks,s=this.byteCount,d=e.length,_=this.blockCount,u=0,g=this.s;u<d;){if(this.reset)for(this.reset=!1,l[0]=this.block,i=1;i<_+1;++i)l[i]=0;if(a)for(i=this.start;u<d&&i<s;++u)l[i>>2]|=e[u]<<r[3&i++];else for(i=this.start;u<d&&i<s;++u)(c=e.charCodeAt(u))<128?l[i>>2]|=c<<r[3&i++]:c<2048?(l[i>>2]|=(192|c>>6)<<r[3&i++],l[i>>2]|=(128|63&c)<<r[3&i++]):c<55296||c>=57344?(l[i>>2]|=(224|c>>12)<<r[3&i++],l[i>>2]|=(128|c>>6&63)<<r[3&i++],l[i>>2]|=(128|63&c)<<r[3&i++]):(c=65536+((1023&c)<<10|1023&e.charCodeAt(++u)),l[i>>2]|=(240|c>>18)<<r[3&i++],l[i>>2]|=(128|c>>12&63)<<r[3&i++],l[i>>2]|=(128|c>>6&63)<<r[3&i++],l[i>>2]|=(128|63&c)<<r[3&i++]);if(this.lastByteIndex=i,i>=s){for(this.start=i-s,this.block=l[_],i=0;i<_;++i)g[i]^=l[i];P(g),this.reset=!0}else this.start=i}return this},S.prototype.encode=function(t,e){var a=255&t,o=1,i=[a];for(a=255&(t>>=8);a>0;)i.unshift(a),a=255&(t>>=8),++o;return e?i.push(o):i.unshift(o),this.update(i),i.length},S.prototype.encodeString=function(e){var a,o=typeof e;if("string"!==o){if("object"!==o)throw new Error(t);if(null===e)throw new Error(t);if(n&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!Array.isArray(e)&&(!n||!ArrayBuffer.isView(e)))throw new Error(t);a=!0}var i=0,c=e.length;if(a)i=c;else for(var l=0;l<e.length;++l){var r=e.charCodeAt(l);r<128?i+=1:r<2048?i+=2:r<55296||r>=57344?i+=3:(r=65536+((1023&r)<<10|1023&e.charCodeAt(++l)),i+=4)}return i+=this.encode(8*i),this.update(e),i},S.prototype.bytepad=function(t,e){for(var a=this.encode(e),o=0;o<t.length;++o)a+=this.encodeString(t[o]);var i=e-a%e,n=[];return n.length=i,this.update(n),this},S.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex,a=this.blockCount,o=this.s;if(t[e>>2]|=this.padding[3&e],this.lastByteIndex===this.byteCount)for(t[0]=t[a],e=1;e<a+1;++e)t[e]=0;for(t[a-1]|=2147483648,e=0;e<a;++e)o[e]^=t[e];P(o)}},S.prototype.toString=S.prototype.hex=function(){this.finalize();for(var t,e=this.blockCount,a=this.s,o=this.outputBlocks,i=this.extraBytes,n=0,l=0,r="";l<o;){for(n=0;n<e&&l<o;++n,++l)t=a[n],r+=c[t>>4&15]+c[15&t]+c[t>>12&15]+c[t>>8&15]+c[t>>20&15]+c[t>>16&15]+c[t>>28&15]+c[t>>24&15];l%e===0&&(P(a),n=0)}return i&&(t=a[n],r+=c[t>>4&15]+c[15&t],i>1&&(r+=c[t>>12&15]+c[t>>8&15]),i>2&&(r+=c[t>>20&15]+c[t>>16&15])),r},S.prototype.arrayBuffer=function(){this.finalize();var t,e=this.blockCount,a=this.s,o=this.outputBlocks,i=this.extraBytes,n=0,c=0,l=this.outputBits>>3;t=i?new ArrayBuffer(o+1<<2):new ArrayBuffer(l);for(var r=new Uint32Array(t);c<o;){for(n=0;n<e&&c<o;++n,++c)r[c]=a[n];c%e===0&&P(a)}return i&&(r[n]=a[n],t=t.slice(0,l)),t},S.prototype.buffer=S.prototype.arrayBuffer,S.prototype.digest=S.prototype.array=function(){this.finalize();for(var t,e,a=this.blockCount,o=this.s,i=this.outputBlocks,n=this.extraBytes,c=0,l=0,r=[];l<i;){for(c=0;c<a&&l<i;++c,++l)t=l<<2,e=o[c],r[t]=255&e,r[t+1]=e>>8&255,r[t+2]=e>>16&255,r[t+3]=e>>24&255;l%a===0&&P(o)}return n&&(t=l<<2,e=o[c],r[t]=255&e,n>1&&(r[t+1]=e>>8&255),n>2&&(r[t+2]=e>>16&255)),r},v.prototype=new S,v.prototype.finalize=function(){return this.encode(this.outputBits,!0),S.prototype.finalize.call(this)};var P=function(t){var e,a,o,i,n,c,l,r,d,_,u,g,f,h,p,L,m,A,I,b,y,C,w,B,x,F,E,S,v,P,O,Q,q,U,M,z,D,G,k,T,N,R,K,V,j,H,Y,J,W,Z,X,$,tt,et,at,ot,it,nt,ct,lt,rt,st,dt;for(o=0;o<48;o+=2)i=t[0]^t[10]^t[20]^t[30]^t[40],n=t[1]^t[11]^t[21]^t[31]^t[41],c=t[2]^t[12]^t[22]^t[32]^t[42],l=t[3]^t[13]^t[23]^t[33]^t[43],r=t[4]^t[14]^t[24]^t[34]^t[44],d=t[5]^t[15]^t[25]^t[35]^t[45],_=t[6]^t[16]^t[26]^t[36]^t[46],u=t[7]^t[17]^t[27]^t[37]^t[47],e=(g=t[8]^t[18]^t[28]^t[38]^t[48])^(c<<1|l>>>31),a=(f=t[9]^t[19]^t[29]^t[39]^t[49])^(l<<1|c>>>31),t[0]^=e,t[1]^=a,t[10]^=e,t[11]^=a,t[20]^=e,t[21]^=a,t[30]^=e,t[31]^=a,t[40]^=e,t[41]^=a,e=i^(r<<1|d>>>31),a=n^(d<<1|r>>>31),t[2]^=e,t[3]^=a,t[12]^=e,t[13]^=a,t[22]^=e,t[23]^=a,t[32]^=e,t[33]^=a,t[42]^=e,t[43]^=a,e=c^(_<<1|u>>>31),a=l^(u<<1|_>>>31),t[4]^=e,t[5]^=a,t[14]^=e,t[15]^=a,t[24]^=e,t[25]^=a,t[34]^=e,t[35]^=a,t[44]^=e,t[45]^=a,e=r^(g<<1|f>>>31),a=d^(f<<1|g>>>31),t[6]^=e,t[7]^=a,t[16]^=e,t[17]^=a,t[26]^=e,t[27]^=a,t[36]^=e,t[37]^=a,t[46]^=e,t[47]^=a,e=_^(i<<1|n>>>31),a=u^(n<<1|i>>>31),t[8]^=e,t[9]^=a,t[18]^=e,t[19]^=a,t[28]^=e,t[29]^=a,t[38]^=e,t[39]^=a,t[48]^=e,t[49]^=a,h=t[0],p=t[1],H=t[11]<<4|t[10]>>>28,Y=t[10]<<4|t[11]>>>28,S=t[20]<<3|t[21]>>>29,v=t[21]<<3|t[20]>>>29,lt=t[31]<<9|t[30]>>>23,rt=t[30]<<9|t[31]>>>23,R=t[40]<<18|t[41]>>>14,K=t[41]<<18|t[40]>>>14,U=t[2]<<1|t[3]>>>31,M=t[3]<<1|t[2]>>>31,L=t[13]<<12|t[12]>>>20,m=t[12]<<12|t[13]>>>20,J=t[22]<<10|t[23]>>>22,W=t[23]<<10|t[22]>>>22,P=t[33]<<13|t[32]>>>19,O=t[32]<<13|t[33]>>>19,st=t[42]<<2|t[43]>>>30,dt=t[43]<<2|t[42]>>>30,et=t[5]<<30|t[4]>>>2,at=t[4]<<30|t[5]>>>2,z=t[14]<<6|t[15]>>>26,D=t[15]<<6|t[14]>>>26,A=t[25]<<11|t[24]>>>21,I=t[24]<<11|t[25]>>>21,Z=t[34]<<15|t[35]>>>17,X=t[35]<<15|t[34]>>>17,Q=t[45]<<29|t[44]>>>3,q=t[44]<<29|t[45]>>>3,B=t[6]<<28|t[7]>>>4,x=t[7]<<28|t[6]>>>4,ot=t[17]<<23|t[16]>>>9,it=t[16]<<23|t[17]>>>9,G=t[26]<<25|t[27]>>>7,k=t[27]<<25|t[26]>>>7,b=t[36]<<21|t[37]>>>11,y=t[37]<<21|t[36]>>>11,$=t[47]<<24|t[46]>>>8,tt=t[46]<<24|t[47]>>>8,V=t[8]<<27|t[9]>>>5,j=t[9]<<27|t[8]>>>5,F=t[18]<<20|t[19]>>>12,E=t[19]<<20|t[18]>>>12,nt=t[29]<<7|t[28]>>>25,ct=t[28]<<7|t[29]>>>25,T=t[38]<<8|t[39]>>>24,N=t[39]<<8|t[38]>>>24,C=t[48]<<14|t[49]>>>18,w=t[49]<<14|t[48]>>>18,t[0]=h^~L&A,t[1]=p^~m&I,t[10]=B^~F&S,t[11]=x^~E&v,t[20]=U^~z&G,t[21]=M^~D&k,t[30]=V^~H&J,t[31]=j^~Y&W,t[40]=et^~ot&nt,t[41]=at^~it&ct,t[2]=L^~A&b,t[3]=m^~I&y,t[12]=F^~S&P,t[13]=E^~v&O,t[22]=z^~G&T,t[23]=D^~k&N,t[32]=H^~J&Z,t[33]=Y^~W&X,t[42]=ot^~nt&lt,t[43]=it^~ct&rt,t[4]=A^~b&C,t[5]=I^~y&w,t[14]=S^~P&Q,t[15]=v^~O&q,t[24]=G^~T&R,t[25]=k^~N&K,t[34]=J^~Z&$,t[35]=W^~X&tt,t[44]=nt^~lt&st,t[45]=ct^~rt&dt,t[6]=b^~C&h,t[7]=y^~w&p,t[16]=P^~Q&B,t[17]=O^~q&x,t[26]=T^~R&U,t[27]=N^~K&M,t[36]=Z^~$&V,t[37]=X^~tt&j,t[46]=lt^~st&et,t[47]=rt^~dt&at,t[8]=C^~h&L,t[9]=w^~p&m,t[18]=Q^~B&F,t[19]=q^~x&E,t[28]=R^~U&z,t[29]=K^~M&D,t[38]=$^~V&H,t[39]=tt^~j&Y,t[48]=st^~et&ot,t[49]=dt^~at&it,t[0]^=s[o],t[1]^=s[o+1]};if(i)di.exports=b;else for(C=0;C<y.length;++C)a[y[C]]=b[y[C]]}();var ui=_i.exports;const{keccak256:gi}=ui;const{stringifyBigInts:fi}=pa;const{unstringifyBigInts:hi}=pa;const{unstringifyBigInts:pi}=pa;const{unstringifyBigInts:Li}=pa;const{stringifyBigInts:mi}=pa;const{unstringifyBigInts:Ai}=pa;const{unstringifyBigInts:Ii}=pa;const{unstringifyBigInts:bi}=pa}}]);
//# sourceMappingURL=580.0e125fde.chunk.js.map